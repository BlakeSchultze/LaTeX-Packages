%*******************************************************************************************************************************%
%****************************************************** `pkgbase.sty' **********************************************************%
%*******************************************************************************************************************************%
% Establishes the most basic low-level character and control sequence definitions, those with broadest universal applicability.
% This includes:
%       (1) Defines packages required for (a) control sequence definitions in this package and (b) creation of additional package
% option commands provided by 'pkgopts.sty' and provides package loading commands used to iterately load the required packages in
% the list.
%       (1) Character definitions creating named aliases for the #s 0,1,2,...,8,16,255, improving readability
%       (2) Creation of control sequence shortcuts for temporarily changing and restoring character codes, funcioning as programming
% context environments like \makeatletter/\makeatother for (1) '|' such that |x| in math mode typesets bold 'x' and (2) '\\' changed
% to standard text character for printing control sequence name without escaping '\'.
%       (3) a set of control sequences providing a simplified usage and/or reduced character typing burden for frequently used
% commands and command sequences
%       (4) Numerous argument processing commands for controlled preexpansion of specified parameter #s and/or control sequence
% construction by name
%       (5) Creation, appending, and processing of lists of various types, particularly extensive for the parsing of comma/space
% separated and braced group values such that the corresponding values are stored and subsequently globally accessible through
% a sequence of control sequences with standardized naming scheme by type and sequential numbering
%       (6)
%
%
%
%
%-------------------------------------------------------------------------------------------------------------------------------%
%*******************************************************************************************************************************%
%********************************** Define provided package name and LaTeX/package dependencies ********************************%
%*******************************************************************************************************************************%
%-------------------------------------------------------------------------------------------------------------------------------%
\ProvidesPackage{pkgbase}[\pkginfo]                       %
%\RequirePackage{trace}
%-------------------------------------------------------------------------------------------------------------------------------%
%*******************************************************************************************************************************%
%************************************* Package options and corresponding Boolean variables *************************************%
%*******************************************************************************************************************************%
%-------------------------------------------------------------------------------------------------------------------------------%
\DeclareOption*{\PackageWarning{pkgbase}{Unknown \CurrentOption}}
%-------------------------------------------------------------------------------------------------------------------------------%
%*******************************************************************************************************************************%
%************************************************ Processing of package options ************************************************%
%*******************************************************************************************************************************%
%-------------------------------------------------------------------------------------------------------------------------------%
\ProcessOptions\relax
%-------------------------------------------------------------------------------------------------------------------------------%
\makeatletter                                           % Change @ -> catcode'@=11 (letter) for use in macro names/definition
%-------------------------------------------------------------------------------------------------------------------------------%
%*******************************************************************************************************************************%
%*******************************************************************************************************************************%
%************************************************ Plain TeX macro definitions **************************************************%
%*******************************************************************************************************************************%
%*******************************************************************************************************************************%
%-------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------ Register variable definitions ------------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\newcount\linecnt\linecnt=0
\newif\if@cmttb\@cmttbfalse
\newif\if@cmbtt\@cmbttfalse
%\newif\if@cmttb\@cmttbtrue
%\newif\if@cmbtt\@cmbtttrue
\newif\ifvalidated\validatedfalse
\newif\if@choicevals@validated\@choicevals@validatedfalse
\newif\if@rm@termfile@\@rm@termfile@true
\newread\@ifstream                              % Declare register storing input file stream pointer
\newwrite\@ofstream                             % Declare register storing output file stream pointer
%-------------------------------------------------------------------------------------------------------------------------------%
\newcount\IEEEcount                             % Declare \count register for internal IEEEtrans-tools package usage
\newif\ifIEEEbool\IEEEboolfalse                 % Declare \if<x> register token for internal IEEEtrans-tools package usage
\newtoks\filetoks                               % Declare token register for \read storage target
\newtoks\IEEEtoks                               % Declare token register for internal IEEEtrans-tools package usage
\newtoks\IEEEconfigs                            % Declare token register for storing configurations to apply after preamble
%-------------------------------------------------------------------------------------------------------------------------------%
\newcount\pkgcount                             % Declare \count register for internal IEEEtrans-tools package usage
\newif\ifpkgbool\pkgboolfalse                 % Declare \if<x> register token for internal IEEEtrans-tools package usage
\newtoks\pkgtoks                               % Declare token register for \read storage target
%-------------------------------------------------------------------------------------------------------------------------------%
%---------------------------------------------- Base package constant definitions ----------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\def\PKGNAME{R2Labs}%
\def\PKGOPTS@PACKAGES{etoolbox,kvoptions,pgffor,ifplatform,catchfile}%,xstring,xparse
\gdef\myblindtext{{Hello, here is some text without a meaning.This text should show what a printed text will look like at this place.If you read this text, you will get no  information. Really? Is there no information?Is there a difference between this text and some nonsense like ''Huardest gefburn''? Kjift -- not at all!}}
%-------------------------------------------------------------------------------------------------------------------------------%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Plain TeX macro definitions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%-------------------------------------------------------------------------------------------------------------------------------%
%----------------------------------- Control sequence numbers and character code definitions -----------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
%\catcode`\{=1 % left brace is begin-group character
%\catcode`\}=2 % right brace is end-group character
%\catcode`\$=3 % dollar sign is math shift
%\catcode`\&=4 % ampersand is alignment tab
%\catcode`\#=6 % hash mark is macro parameter character
%\catcode`\^=7 % circumflex and uparrow are for superscripts
%\catcode`\_=8 % underline and downarrow are for subscripts
%\catcode`\^^I=10 % ascii tab is a blank space
%\catcode`\^^J=10 %
%\catcode`\^^M=10 % 5 9 13 \active
%\catcode`\^^L=\active \outer\def^^L{\par}% ascii form-feed is \outer\par
%\catcode`@=11
%-------------------------------------------------------------------------------------------------------------------------------%
\chardef\n@ne=0
\chardef\zer@=0
\chardef\@ne=1
\chardef\tw@=2
\chardef\thr@@=3
\chardef\f@ur=4
\chardef\e@ght=8
\chardef\sixt@@n=16
\chardef\@cclv=255
%\chardef\@mxxiv=1024                                                   % Too big; \chardef: 0-255
%-------------------------------------------------------------------------------------------------------------------------------%
\chardef\CHARZERO=0
\chardef\CHARONE=1
\chardef\CHARTWO=2
\chardef\CHARTHREE=3
\chardef\CHARFOUR=4
\chardef\CHAREIGHT=8
\chardef\CHARSIXTEEN=16
\chardef\CHARTWOFIFTYFIVE=255
%\chardef\TENTWENTYFOUR=1024                                            % Too big; \chardef: 0-255
%-------------------------------------------------------------------------------------------------------------------------------%
%\mathchardef\@cclvi=256
%\mathchardef\@m=1000
%\mathchardef\@M=10000
%\mathchardef\@MM=20000
%\mathchardef\@Mi=10001
%\mathchardef\@Mii=10002
%\mathchardef\@Miii=10003
%\mathchardef\@Miv=10004
%-------------------------------------------------------------------------------------------------------------------------------%
\def\mathon{\catcode`|=\active}
\def\mathoff{\catcode`|=12}
\def\escapeon{\catcode`\\=0}
\def\escapeoff{\catcode`\\=12}
%\def\escapeon{\catcode`\\=0\escapechar=`\\}
%\def\escapeoff{\catcode`\\=12\escapechar=`\&}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\uchyphenoff{\uchyph=0}
\def\hyphenoff{\tolerance=1\emergencystretch=\maxdimen\hyphenpenalty=10000\hbadness=10000}
\def\exhyphenoff{\exhyphenpenalty=10000}   
\def\lhyphenoff{\lefthyphenmin=63}
\def\rhyphenoff{\righthyphenmin=63}
\def\hyphencharoff{\hyphenchar\font=-1}
%-------------------------------------------------------------------------------------------------------------------------------%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Documentclass Paper Size/Geometry Definitions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%-------------------------------------------------------------------------------------------------------------------------------%
\gdef\letterpaper@paperheight{11in}%279.4 mm
\gdef\letterpaper@paperwidth{8.5in}%215.9 mm
\gdef\letterpaper@textheight{550pt}%
\gdef\letterpaper@textwidth{345pt}%
\gdef\letterpaper@geometry@name{doc}%
\gdef\letterpaper@geometry@opt{doc}%
\gdef\legalpaper@paperheight{14in}%355.6 mm
\gdef\legalpaper@paperwidth{8.5in}%215.9 mm
\gdef\legalpaper@textheight{766pt}%
\gdef\legalpaper@textwidth{345pt}%
\gdef\legalpaper@geometry@name{doc}%
\gdef\legalpaper@geometry@opt{doc}%
\gdef\executivepaper@paperheight{10.5in}%
\gdef\executivepaper@paperwidth{7.25in}%
\gdef\executivepaper@textheight{514pt}%
\gdef\executivepaper@textwidth{345pt}%
\gdef\executivepaper@geometry@name{doc}%
\gdef\executivepaper@geometry@opt{doc}%
\gdef\aIVpaper@paperheight{297mm}%845pt
\gdef\aIVpaper@paperwidth{210mm}%597pt
\gdef\aIVpaper@textheight{598pt}%
\gdef\aIVpaper@textwidth{345pt}%
\gdef\aIVpaper@geometry@name{a4paper}%
\gdef\aIVpaper@geometry@opt{doc}%
\gdef\aVpaper@paperheight{210mm}%
\gdef\aVpaper@paperwidth{148mm}%
\gdef\aVpaper@textheight{346pt}%
\gdef\aVpaper@textwidth{276pt}%
\gdef\aVpaper@geometry@name{a5paper}%
\gdef\aVpaper@geometry@opt{doc}%
\gdef\bVpaper@paperheight{250mm}%
\gdef\bVpaper@paperwidth{176mm}%
\gdef\bVpaper@textheight{466pt}%
\gdef\bVpaper@textwidth{345pt}%
\gdef\bVpaper@geometry@name{b5paper}%
\gdef\bVpaper@geometry@opt{doc}%
%-------------------------------------------------------------------------------------------------------------------------------%
\xdef\default@geometry@name{\letterpaper@geometry@opt}%
\xdef\default@geometry@opt{\letterpaper@geometry@opt}%
\xdef\default@paperheight{\letterpaper@paperheight}%
\xdef\default@paperwidth{\letterpaper@paperwidth}%
\xdef\default@textheight{\letterpaper@textheight}%550pt
\xdef\default@textwidth{\letterpaper@textwidth}%345pt
\gdef\default@top{20pt}%
\gdef\default@bottom{0.25in}%
\gdef\default@left{1.0in}%
\gdef\default@right{1.0in}%
\gdef\default@headheight{12pt}%0.42168cm
\gdef\default@headsep{25pt}%0.8785cm
\gdef\default@footskip{30pt}%1.0542cm
%-------------------------------------------------------------------------------------------------------------------------------%
\gdef\toc@geometry@name{toc}%
\gdef\toc@geometry@opt{toc}%
\xdef\toc@paperheight{\letterpaper@paperheight}%
\xdef\toc@paperwidth{\letterpaper@paperwidth}%
\xdef\toc@textheight{\letterpaper@textheight}%550pt
\xdef\toc@textwidth{\letterpaper@textwidth}%345pt
\gdef\toc@top{0.5in}%
\gdef\toc@bottom{0.5in}%
\gdef\toc@left{1.0in}%
\gdef\toc@right{1.0in}%
\gdef\toc@headheight{0.5in}%
\gdef\toc@headsep{2pt}%
\gdef\toc@footskip{0.5cm}%
%-------------------------------------------------------------------------------------------------------------------------------%
\gdef\doc@geometry@name{doc}%
\gdef\doc@geometry@opt{doc}%
\xdef\doc@paperheight{\letterpaper@paperheight}%
\xdef\doc@paperwidth{\letterpaper@paperwidth}%
\xdef\doc@textheight{\letterpaper@textheight}%550pt
\xdef\doc@textwidth{\letterpaper@textwidth}%345pt
\gdef\doc@top{0.6in}%
\gdef\doc@bottom{0.5in}%
\gdef\doc@left{1.0in}%
\gdef\doc@right{1.0in}%
\gdef\doc@headheight{0.5in}%
\gdef\doc@headsep{8pt}%
\gdef\doc@footskip{0.5cm}%
%-------------------------------------------------------------------------------------------------------------------------------%
\gdef\coverpage@geometry@name{coverpage}%
\gdef\coverpage@geometry@opt{coverpage}%
\xdef\coverpage@paperheight{\letterpaper@paperheight}%
\xdef\coverpage@paperwidth{\letterpaper@paperwidth}%
\gdef\coverpage@textheight{758.835pt}%
\gdef\coverpage@textwidth{469.75502pt}%
\gdef\coverpage@top{0.25in}%
\gdef\coverpage@bottom{0.25in}%
\gdef\coverpage@left{1.0in}%
\gdef\coverpage@right{1.0in}%
\gdef\coverpage@headheight{12pt}%0.42168cm
\gdef\coverpage@headsep{25pt}%0.8785cm
\gdef\coverpage@footskip{30pt}%1.0542cm
%-------------------------------------------------------------------------------------------------------------------------------%
\xdef\current@geometry{doc@geometry}
\xdef\previous@geometry{toc@geometry}
\xdef\geometry@args{}
%-------------------------------------------------------------------------------------------------------------------------------%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Macro argument parsing/storage commands ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%-------------------------------------------------------------------------------------------------------------------------------%
\global\let\xp\expandafter
\global\let\@par@arg\par
\gdef\gxp{\xp\global\xp}
\gdef\twoxp{\xp\xp\xp}
\gdef\trixp{\xp\xp\xp}
\def\glet{\global\let}
%\def\@nil{}
\def\@@nil{}
\def\@@empty{\@gobble\@@empty}
\def\@nilbrackets[#1]{}
\def\@identity#1{#1}
\def\fullyexpand#1{\romannumeral - `0#1}
\def\readahead#1#2{\afterassignment\@gobble\futurelet#1{#2}}
\long\def \@gobble@star* {}
\long\def \@gobblethree #1#2#3{}
\long\def\@firstofthree#1#2#3{#1}
\long\def\@secondofthree#1#2#3{#2}
\long\def\@firsttwoofthree#1#2#3{#1#2}
\long\def\@secondtwoofthree#1#2#3{#2#3}
%-------------------------------------------------------------------------------------------------------------------------------%
\long\def\nxpfirstofone#1{{#1}}
\long\def\nxpfirstoftwo#1#2{{#1}}
\long\def\nxpsecondoftwo#1#2{{#2}}
\long\def\nxpfirstofthree#1#2#3{{#1}}
\long\def\nxpsecondofthree#1#2#3{{#2}}
\long\def\nxpthirdofthree#1#2#3{{#3}}
\long\def\nxpfirsttwoofthree#1#2#3{{#1}{#2}}
\long\def\nxpsecondtwoofthree#1#2#3{{#2}{#3}}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@csname#1{\csname #1\endcsname}
\def\thecsname#1{\xp\@secondoftwo\string#1}
\def\detok@csname#1{\xp\@secondoftwo\detokenize{#1}}
\def\csnamestr#1{\textbackslash\xp\@secondoftwo\string#1}
\def\csparam#1=#2;{\xp\global\xp\let\xp#1\csname#2\endcsname}
\def\savecs#1=#2;{\xp\xp\xp\global\xp\xp\xp\let\xp\xp\xp#1\xp\csname#2\endcsname}
%\def\foreachfirst#1in #2#3{\foreach#1 in#2{#3\breakforeach}}%
%\global\let\csstring\csnamestr
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@csvstring@append#1#2{\xappto#2{\@csvstring@sep#1}}%
\def\@csvstring@suffixed#1,\space;{#1}%
\def\@csvstring@prefixed,\space#1{#1}%
\def\@csvstring@sep{,\space}%
\def\@csvxstring@suffixed#1, ;{#1}%
\def\@csvxstring@prefixed, #1{#1}%
\def\@csvxstring@sep{, }%
\def\csvtostring#1{\xp\@tfor\xp\@csv@item\xp:\xp=#1\do{\@csv@item\xp\ifx\@csv@item,\space\fi}}%
%-------------------------------------------------------------------------------------------------------------------------------%
\def\csvlistring#1%
{%
        \undef\@@the@csvstring%
        \@for\@csv@item:=#1\do{\@add@to@csvlist{\space\@csv@item}{\@@the@csvstring}}%
        \ignorespaces\@@the@csvstring%
}%
%-------------------------------------------------------------------------------------------------------------------------------%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Macros for defining macros requiring expansion first ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\csname@cmd[1]{\xp\xp\csname#1\endcsname}
\newcommand\csname@cmd@y[2]{\csname@cmd{#1}\csname#2\endcsname}
%\newcommand\csname@ny[2]{\xp#1\csname#2\endcsname}
%\newcommand\csgname@y[2]{\gxp#1\csname#2\endcsname}
%\newcommand\csname@ny[3]{\xp#1\xp#2\xp{\csname#3\endcsname}}
\newcommand\csname@ny[2]{\xp#1\csname#2\endcsname}
\newcommand\csname@nY[2]{\xp#1\xp{\csname#2\endcsname}}
\newcommand\csgname@ny[2]{\gxp#1\csname#2\endcsname}
\newcommand\csname@nnY[3]{\xp#1\xp#2\xp{\csname#3\endcsname}}
\newcommand\csname@nyN[3]{\xp#1\csname#2\endcsname{#3}}
%\newcommand\csname@nYY[3]{\xp\csname@ny\xp#1\xp{\csname#2\endcsname}{#3}}
\newcommand\csname@nYY[3]{\xp\xp\xp#1\xp\xp\xp{\xp\csname\xp#2\xp\endcsname\xp}\xp{\csname#3\endcsname}}
\newcommand\csname@nypN[4]{\xp#1\csname#2\endcsname#3{#4}}
\newcommand\csname@nYNN[4]{\xp#1\xp{\csname#2\endcsname}{#3}{#4}}
\newcommand\csname@nNYNN[5]{\xp#1\xp{\xp#2\xp}\xp{\csname#3\endcsname}{#4}{#5}}
\newcommand\csname@nYNNN[5]{\xp#1\xp{\csname#2\endcsname}{#3}{#4}{#5}}
\newcommand\csname@nYYNN[5]{\xp\csname@nNYNN\xp#1\xp{\csname#2\endcsname}{#3}{#4}{#5}}
\newcommand\csname@nnnny[5]{\xp\xp\xp#1\xp\xp\xp#2\xp\xp\xp#3\xp\xp\xp#4\csname#5\endcsname}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\xp@ny[2]{\xp#1#2}
\newcommand\xp@nY[2]{\xp#1\xp{#2}}
\newcommand\xp@nny[3]{\xp#1\xp#2#3}
\newcommand\xp@nnY[3]{\xp#1\xp#2\xp{#3}}
\newcommand\xp@nNY[3]{\xp#1\xp{\xp#2\xp}\xp{#3}}
\newcommand\xp@nyN[3]{\xp#1#2{#3}}
\newcommand\xp@nYN[3]{\xp#1\xp{#2}{#3}}
\newcommand\xp@nyy[3]{\xp\xp\xp#1\xp\xp\xp#2#3}
\newcommand\xp@nyY[3]{\xp\xp\xp#1\xp\xp\xp#2\xp{#3}}
\newcommand\xp@nYY[3]{\xp\xp\xp#1\xp\xp\xp{\xp#2\xp}\xp{#3}}
\newcommand\xp@nyyy[4]{\xp\xp\xp\xp\xp\xp\xp#1\xp\xp\xp#2\xp#3#4}
\newcommand\xp@nyyY[4]{\xp\xp\xp\xp\xp\xp\xp#1\xp\xp\xp#2\xp#3\xp{#4}}
\newcommand\xp@nYNN[4]{\xp#1\xp{#2}{#3}{#4}}
\newcommand\xp@nnny[4]{\xp#1\xp#2\xp#3#4}
\newcommand\xp@nnyy[4]{\xp\xp\xp#1\xp\xp\xp#2\xp#3\xp#4}
\newcommand\xp@nYNNN[5]{\xp#1\xp{#2}{#3}{#4}{#5}}
\newcommand\xp@nNYNN[5]{\xp#1\xp{\xp#2\xp}\xp{#3}{#4}{#5}}
\newcommand\xp@nYYNN[5]{\xp\xp\xp#1\xp\xp\xp{\xp#2\xp}\xp{#3}{#4}{#5}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\xp@nyII[2]{\xp\xp\xp#1\xp\xp\xp#2}
\newcommand\xp@csname@ny[2]{\xp\xp\xp#1\csname#2\endcsname}
\newcommand\xp@csname@nnY[3]{\xp\xp\xp#1\xp\xp\xp#2\xp\xp\xp{\csname#3\endcsname}}
\newcommand\xp@csname@nNY[3]{\xp\xp\xp#1\xp\xp\xp{\xp\xp\xp#2\xp}\xp{\csname#3\endcsname}}
\newcommand\xp@csargs[2]{\xp@csname@ny#1{#2}}
%\def\xp@def#1#2{\csname@nnY\def{#1}{#2}}
%\def\xp@gdef#1#2{\csname@nnY\gdef{#1}{#2}}
%\def\xp@edef#1#2{\csname@nnY\edef{#1}{#2}}
%\def\xp@xdef#1#2{\csname@nnY\xdef{#1}{#2}}
\gdef\xpifx{\xp\ifx}
\gdef\xp@tfor#1#2{\xp\@tfor\xp\nextchar\xp:\xp=#1\do{#2}}%
%-------------------------------------------------------------------------------------------------------------------------------%
%\newcommand\csname@nnY[3]{\xp#1\xp#2\xp{\csname#3\endcsname}}
%\def\defcs#1#2{\xp\def\xp#1\xp{\csname#2\endcsname}}
\def\defcs#1#2{\csname@nnY\def{#1}{#2}}
\def\gdefcs#1#2{\csname@nnY\gdef{#1}{#2}}
\def\edefcs#1#2{\csname@nnY\edef{#1}{#2}}
\def\xdefcs#1#2{\csname@nnY\xdef{#1}{#2}}
%-------------------------------------------------------------------------------------------------------------------------------%
%\newcommand\xp@nyN[3]{\xp#1#2{#3}}
%\newcommand\csname@nyN[3]{\xp#1\csname#2\endcsname{#3}}
%\def\xp@@def#1#2{\csname@nyN\def{#1}{#2}}       % \xp\def\xp#2\xp{\csname#3\endcsname}
%\def\xp@@gdef#1#2{\csname@nyN\gdef{#1}{#2}}     % \xp\gdef\csname#2\endcsname{#3}
%\def\xp@@edef#1#2{\csname@nyN\edef{#1}{#2}}
%\def\xp@@xdef#1#2{\csname@nyN\xdef{#1}{#2}}
%\def\xpdef#1#2{\xp\def#1{#2}}       % \xp\def\xp#2\xp{\csname#3\endcsname}
%\def\xpgdef#1#2{\xp\gdef#1{#2}}     % \xp\gdef\csname#2\endcsname{#3}
%\def\xpedef#1#2{\xp\edef#1{#2}}
%\def\xpxdef#1#2{\xp\xdef#1{#2}}
%-------------------------------------------------------------------------------------------------------------------------------%
%\newcommand\csname@ny[2]{\xp#1\csname#2\endcsname}
%\def\xp@newif#1{\xp\newif\csname#1\endcsname}
\def\newifcs#1{\csname@ny\newif{#1}}
%\def\xp@newif#1{\csname@ny\newif{#1}}
%\newcommand\csname@nYNN[4]{\xp#1\xp{\csname#2\endcsname}{#3}{#4}}
%\def\ifcsdefempty#1#2#3{\xp\ifdefempty\xp{\csname#1\endcsname}{#2}{#3}}
\def\csifx#1{\xp\ifx\csname#1\endcsname\relax}
\def\ifcsdefempty#1#2#3{\csname@nYNN\ifdefempty{#1}{#2}{#3}}
%\def\xp@ifdefempty#1#2#3{\csname@nYNN\ifdefempty{#1}{#2}{#3}}
\def\xp@cmd#1#2{\xp#1\xp#2}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@csfor#1#2#3{\csname@nnnny\@for#1:={#2}\do{#3}}
%-------------------------------------------------------------------------------------------------------------------------------%
\protected@edef\keyeqval#1=#2{\edef#1{#2}}
%\edef\keyeqval#1=#2{\def#1{#2}}
%\def\keyeqval#1=#2{\def#1{#2}}
\def\unprotected#1#2{\let\protect\string\afterassignment\restore@protect\xdef#1{#2}}%
\def\unprotexted#1\protexted#2#3;{#1#3}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\scopecmd[3][\edef]%
{%
        \begingroup%
        #2%
        #1\x{\endgroup#3}\x%
}
%-------------------------------------------------------------------------------------------------------------------------------%
%\edef\x{\def\noexpand\dehandout##1\detokenize{_handout}{##1}}\x
\newcommand\scopedef[3][\protected@edef]%
{%
        \scopecmd[#1]{#2}{\noexpand#3}%%
%        \begingroup%
%        #2%
%        #1\x{\endgroup\noexpand#3}\x%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\preexpansion[3][\protected@edef]%
{%
        \def\preexpanded{#2}%
        \def\postexpanded{#3}%
        \scopedef[#1]{}{\postexpanded\preexpanded}%
        %\begingroup%
        %#1\x{\endgroup\noexpand\postexpanded\preexpanded}\x%
}
%-------------------------------------------------------------------------------------------------------------------------------%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Macro definition/assignment helper command definitions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%-------------------------------------------------------------------------------------------------------------------------------%
%----------------------------------------- Control sequence ssignment helper commands ------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\long\def\DoLongFutureLet #1#2#3#4%
{%
        \def\@FutureLetDecide%
        {%
                #1#2%
                \@FutureLetToken%
                        \def\@FutureLetNext{#3}%
                \else%
                        \def\@FutureLetNext{#4}%
                \fi%
                \@FutureLetNext%
        }%
        \futurelet\@FutureLetToken\@FutureLetDecide%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\DoFutureLet #1#2#3#4{\DoLongFutureLet{#1}{#2}{#3}{#4}}
%-------------------------------------------------------------------------------------------------------------------------------%
%------------------------------- Control Sequence Definition Console/Document Printing Commands --------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\def\shown#1{\xp\show\csname\string#1\endcsname}
\def\showthen#1{\xp\showthe\csname\string#1\endcsname}
\def\don#1{\csname\string#1\endcsname}
\def\defn#1{\xp\def\csname\string#1\endcsname}
\def\qq#1\qq{\\\text{Trailing Code (Braced): \{}\texttt{\detokenize{#1}}\}}     %Print code executed after environment #1 closes
%-------------------------------------------------------------------------------------------------------------------------------%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ List Creation/Modification/Manipulation/Print Commands ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%-------------------------------------------------------------------------------------------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------- Argument List Creation/Parsing Commands -------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\xdef\arg@default@prefix{arg}
\xdef\varg@default@prefix{varg}
\xdef\ssvarg@default@prefix{ssvarg}
\xdef\csvarg@default@prefix{csvarg}
\xdef\bsvarg@default@prefix{bsvarg}
\xdef\csnumname@default@prefix{arg}
\xdef\csvargG@default@prefix{csvargG}
\xdef\csvgroup@item@default@prefix{csvitem}
%-------------------------------------------------------------------------------------------------------------------------------%
\xdef\argdef@prefix{arg}
\xdef\varg@prefix{varg}
\xdef\ssvarg@prefix{ssvarg}
\xdef\csvarg@prefix{csvarg}
\xdef\bsvarg@prefix{bsvarg}
\xdef\csnumname@prefix{arg}
\xdef\csvargG@prefix{csvargG}
\xdef\csvgroup@item@prefix{csvitem}
\xdef\ssvargsep{ }
\xdef\csvargsep{,}
\xdef\bsvargsep{}
%-------------------------------------------------------------------------------------------------------------------------------%
%\gdef\csv@sep{,}
\gdef\no@sep{}
\gdef\fslash@sep{/}
\gdef\semicolon@sep{;}
\gdef\cr@sep{\\}
\gdef\whitespace@sep{ }
\gdef\space@sep{\space}
\gdef\lf@sep{
}
%-------------------------------------------------------------------------------------------------------------------------------%
\global\let\nosep\no@sep
\global\let\csv@sep\csvargsep
\global\let\csvsep\csvargsep
\global\let\fslashsep\fslash@sep
\global\let\semicolonsep\semicolon@sep
\global\let\crsep\cr@sep
\global\let\whitespacesep\whitespace@sep
\global\let\spacesep\space@sep
\global\let\lfsep\lf@sep
%-------------------------------------------------------------------------------------------------------------------------------%
\def\csvgroup@numformat{\roman}
\gdef\@xsvargs@numcmd#1{\romannumeral#1}
\gdef\xsvarg@numeral#1{\xsvarg@prefix\@xsvargs@numcmd#1}
\gdef\xsvarg@name#1{\xsvarg@prefix\@xsvargs@numformat{#1}}
\def\Romannumeral#1{\xp\uppercase\xp{\romannumeral#1\relax}}
\newcommand*{\rom}[1]{\expandafter\@slowromancap\romannumeral #1@}
\newcommand\romanarg[2][\csvarg@prefix]{\xdef\csvarg@prefix{#1}\csname\csvarg@prefix\romannumeral#2\endcsname}
\newcommand\Romanarg[2][\csvarg@prefix]{\xdef\csvarg@prefix{#1}\csname\csvarg@prefix\Romannumeral#2\endcsname}
\newcommand\lastvargcmd[1][\romannumeral]{\csuse{\csvarg@prefix#1\numexpr\narg+1\relax}}
\newcommand\lastvargcmd@def[2][\romannumeral]{\csgdef{\csvarg@prefix#1\numexpr\narg+1\relax}{#2}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\setssvargs[2][\roman]{\setxsvargs[#1]{ssv}{#2}}
\newcommand\setbsvargs[2][\roman]{\setxsvargs[#1]{bsv}{#2}}
\newcommand\setcsvargs[2][\roman]{\setxsvargs[#1]{csv}{#2}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\setxsvargs[3][\roman]%
{%
        \gdef\@xsvargs@numformat{#1}%
        \xp\gdef\xp\@xsvargs@numcmd@name\xp{\thecsname{#1}numeral}%
        \gdef\@xsvargs@numcmd##1{\@nameuse{\@xsvargs@numcmd@name}##1}%
        \xdef\xsvarg@prefix{\csuse{#2arg@prefix}}%
        \xdef\xsvargsep{\csuse{#2argsep}}%
        \gdef\parse@xsvBlock{\csname parse@#2Block\endcsname}%
        \if T\converttilde\def~{ }\else\catcode`~=12\fi%
        \protected@edef\the@string{#3}%
        \setcounter{arg@index}{0}%
        \preexpansion{\xsvargsep}{\lowercase{\xp\parse@xsvBlock\the@string}}\string@end%
        \let~\SaveHardspace%
        \catcode`~=13%
}
%-------------------------------------------------------------------------------------------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\def\parse@@xsvBlock#1%
{%
        \stepcounter{arg@index}%
        \@namedef{\xsvarg@name{arg@index}}{#1}%
        \futurelet\tmp\parse@xsvBlock@%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\parse@ssvBlock#1 {\parse@@xsvBlock{#1}}
\def\parse@csvBlock#1,{\parse@@xsvBlock{#1}}
\def\parse@bsvBlock#1{\parse@@xsvBlock{#1}}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\parse@xsvBlock@%
{%
        \ifx\tmp\string@end\edef\narg{\thearg@index}\xp\@gobble%
        \else\xp\parse@xsvBlock\fi%
}
%-------------------------------------------------------------------------------------------------------------------------------%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Generic/universal list handling definitions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@create@tokenlist#1#2%
{%
        \@tfor\nextchar:=#1\do%
        {%
                \xp\@add@to@csvlist%
                \xp{\xp\string\nextchar}%
                {#2}%
        }%
}
%-------------------------------------------------------------------------------------------------------------------------------%
%---------------------------------------------- List processing/printing commands ----------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
%\newcommand{\iffontfam}[3]{\ifthenelse{\equal{\f@family}{#1}}{#2}{#3}}
\newcommand\ifcsvmatchT[2]{\ifcsvmatch{#1}{#2}{\@firstofone}{\@gobble}}%{#3} {\@secondofthree}{\@gobbletwo}
\newcommand\ifcsvmatchF[2]{\ifcsvmatch{#1}{#2}{\@gobble}{\@firstofone}}%{#3}
\newcommand\ifcsvmatch[2]{%
        \validatedfalse%
        \xdef\@test@cs{#1}%
        \foreach \@current@choice [count=\@count] in #2%
        {%
                \ifdefequal{\@current@choice}{\@test@cs}%
                {%
                        \global\validatedtrue\breakforeach%
                        \csxdef{@validated@index}{\@count}%
                        %\csname@nyN\xdef{@validated@index}{\@count}%
                }{}%
        }%
        \ifvalidated\xp\@firstoftwo\else\xp\@secondoftwo\fi%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\isinlist#1#2#3%
{%
        \def\tmp##1#2##2\end%
        {%
                \def\tmp{##2}%
                \ifx\tmp\empty \csname iffalse\xp\endcsname \else
                \csname iftrue\xp\endcsname \fi%
        }% end of \def\tmp
        \xp\tmp#1\endlistsep#2\end
}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\ifmember#1#2%
{%
        \in@{#1}{#2}%
        \ifin@%
                \expandafter\@firstoftwo%
        \else%
                \expandafter\@secondoftwo%
        \fi%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\ifcsvlistitem#1#2%
{%
        \def\csvcheckitem{#1}%
        \xp\xp\xp\in@\xp\xp\xp{\xp\csvcheckitem\xp}\xp{#2}%
        \ifin@%
                \expandafter\@firstoftwo%
        \else%
                \expandafter\@secondoftwo%
        \fi%
}
%-------------------------------------------------------------------------------------------------------------------------------%
%---------------------------------------------------- List printing commands ---------------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\long\def\@addto#1#2#3%
{%
        \ifundef{#2}%
                {#1#2{#3}}%
                {\xp#1\xp#2\xp{#2#3}}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
%\long\def\addto#1#2{\xp\def\xp#1\xp{#1#2}}
\long\def\addto#1#2{\@addto\def{#1}{#2}}
\long\def\eaddto#1#2{\@addto\edef{#1}{#2}}
\long\def\gaddto#1#2{\@addto\gdef{#1}{#2}}
\long\def\xaddto#1#2{\@addto\xdef{#1}{#2}}
%\long\def\xaddto#1#2{\xdef#1{#1#2}}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\addtolist#1#2{\lst@lAddTo#1{#2}}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@add@to@argslist#1#2%
{%
        %\ifx#2\@empty\undef#2\fi
        \ifundef{#2}%
                {\gdef#2{{#1}}}%
                {\gdef#2{#2 {#1}}}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\gdef\@add@to@csvlist#1#2%
{%
        \ifx#2\@empty\undef#2\fi%
        \ifundef{#2}%
                {\protected@xdef#2{#1}}%
                {\protected@xdef#2{#2,#1}}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\gdef\@add@to@csvlistcs#1#2%
{%
        \xp\xp\xp\ifx\xp\csname\xp#2\xp\endcsname\xp\@empty\xp\undef\csname#2\endcsname\fi%
        \xp\ifundef\xp{\csname#2\endcsname}%
                {\xp\protected@xdef\csname#2\endcsname{#1}}%
                {\xp\protected@xdef\csname#2\endcsname{\@nameuse{#2},#1}}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\gdef\@addcs@to@csvlist#1#2%
{%
        \ifx#2\@empty\undef#2\fi%
        \ifundef{#2}%
                {\gdef#2{#1}}%
                {\xp\gdef\xp#2\xp{#2,#1}}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\gdef\@add@to@ssv@to@csvlist#1#2{\@add@to@csvlist{#2}{#1}}%
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@unique@add@to@csvlist#1#2%
{%
        \ifx#2\@empty\undef#2\fi%
        \ifundef{#2}%
        {\protected@xdef#2{#1}}%
        {%
                %\ifmember{#1}{#2}{}{\protected@xdef#2{#2,#1}}%
                \def\csvcheckitem{#1}%
                \xp\xp\xp\in@\xp\xp\xp{\xp\csvcheckitem\xp}\xp{#2}%
                \ifin@\else%
                        \protected@xdef#2{#2,#1}%
                \fi%
                %\protected@xdef#2{#2,#1}
        }%
}
%-------------------------------------------------------------------------------------------------------------------------------%
%---------------------------------------------------- List ordering commands ---------------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\def\sortbycolA#1|#2|#3|#4;%
{%
        \addtolist{\@sorted@list}{#1#2,}%
        \xp\gdef\csname#1#2\endcsname{\textit{#1}&#2&#3&#4\cr\relax}%
        \lst@BubbleSort{\@sorted@list}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\sortbycolB#1|#2|#3|#4;%
{%
        \addtolist{\@sorted@list}{#2#1,}%
        \xp\gdef\csname#2#1\endcsname{\textit{#1}&#2&#3&#4\cr\relax}%
        \lst@BubbleSort{\@sorted@list}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
%---------------------------------------------------- List printing commands ---------------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\def\printlist@addsep#1#2{\ifnumcomp{#1}{<}{#2}{,\space}{}}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@print@deflist#1%
{%
        \edef\@current@list{#1}%
        \@for\next:=\@current@list \do{\next,}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Console Message Printing Helper Commands ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%-------------------------------------------------------------------------------------------------------------------------------%
\gdef\msgtext{Default message text}
\gdef\hlptext{Default help text}
\def\IndentedMessageBreak{\MessageBreak\space\space\space\space}
\def\DoubleIndentedMessageBreak{\MessageBreak\space\space\space\space\space\space\space\space}
\xdef\DoubleIndented{\space\space\space\space\space\space\space\space}
%-------------------------------------------------------------------------------------------------------------------------------%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Package loading commands extending '\RequirePackage' ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\RequirePackageOnce[1]
{%
        \@ifpackageloaded{#1}{}%
        {%
                \RequirePackage{#1}%
                \@add@to@csvlist{#1}{\@loaded@packages}%
        }%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\RequirePackageList[1]{\@for\next:=#1\do{\xp\RequirePackageOnce\xp{\next}}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\RequirePkg[2][]%
{%
        %\ifstrempty{#1}{\edef\pkgpath{\@pkg@dir}}{\edef\pkgpath{#1}}
        \IfFileExists{\@pkg@dir#2.sty}%
               {\RequirePackage[#1]{\@pkg@dir#2}}%
               {\RequirePkgWarning{#2}\RequirePackage[#1]{#2}}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\RequirePkgOnce[2][]
{%
        \@ifpackageloaded{\@pkg@dir#2}{}%
        {%
                \IfFileExists{\@pkg@dir#2.sty}%
                       {\RequirePackage[#1]{\@pkg@dir#2}}%
                       {\RequirePkgWarning{#2}\RequirePackage[#1]{#2}}%
        }%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\RequirePkgList[1]{\@for\next:=#1\do{\xp\RequirePkg\next}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\ProvidesPkg[2][]%
{%
        %\ifstrempty{#1}{\edef\pkgpath{\@pkg@dir}}{\edef\pkgpath{#1}}
        \IfFileExists{\@pkg@dir#2.sty}%
               {\RequirePackage[#1]{\@pkg@dir#2}}%
               {\RequirePkgWarning{#2}\RequirePackage[#1]{#2}}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Windows/Unix Shell Command Definitions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%-------------------------------------------------------------------------------------------------------------------------------%
\gdef\LOCAL@PKG@PREFIX{}% ./texmf/tex/latex/R2Labs/
%-------------------------------------------------------------------------------------------------------------------------------%
\gdef\@default@glsdefs@file{glsentries}
\def\colordefs@dirname{colordefs}
\xdef\TDS@PKG@DIR{texmf-local/tex/latex/\PKGNAME/}
\def\DROPBOX@DIRNAME{Dropbox}
\def\CNF@FILENAME{texmf.cnf}
\def\TEXMFLOCAL@dirname{texmf-local}
\def\TEXMFLOCAL@default@val{\cnf@unix@envvar{SELFAUTOGRANDPARENT}/\TEXMFLOCAL@dirname}
\def\cnf@comment#1{\@percentchar\space#1\wr@endline}
\def\cnf@keyval#1{#1\wr@endline\wr@endline}
\def\cnf@win@envvar#1{\@percentchar#1\@percentchar}
\def\cnf@unix@envvar#1{\wr@dollar#1}
%-------------------------------------------------------------------------------------------------------------------------------%
\edef\wr@hashmark{\string#}\edef\wr@lbrace{\string{}\edef\wr@rbrace{\string}}
\edef\wr@dollar{\string$}\edef\wr@lbrace{\string{}\edef\wr@rbrace{\string}}
\edef\wr@percent{\expandafter\string\%}\edef\wr@lbrace{\string{}\edef\wr@rbrace{\string}}
\edef\wr@atmark{\string @}\edef\wr@lbrace{\string{}\edef\wr@rbrace{\string}}
\edef\wr@lcarat{\string<}\edef\wr@lbrace{\string{}\edef\wr@rbrace{\string}}
\edef\wr@rcarat{\string>}\edef\wr@lbrace{\string{}\edef\wr@rbrace{\string}}
\edef\wr@circumflex{\string^}\edef\wr@lbrace{\string{}\edef\wr@rbrace{\string}}
\edef\wr@endline{\string^^J}\edef\wr@lbrace{\string{}\edef\wr@rbrace{\string}}
\def\wr@par{\string^^I}\edef\wr@lbrace{\string{}\edef\wr@rbrace{\string}}
\def\totext@langle{\catcode`\<=\active\noexpand\def<{\textlangle}}
\def\totext@rangle{\catcode`\>=\active\noexpand\def<{\textrangle}}
\def\totext@underscore{\catcode`\_=\active\noexpand\def<{\textunderscore}}
%\char92        '\'
%\char94        '^'
%\char126       '~'
%-------------------------------------------------------------------------------------------------------------------------------%
\def\MAINDOC@FNAME{\jobname.tex}
\def\STDOUT@FNAME{\jobname.stdout}
\def\SYSNFO@FNAME{\jobname.nfo}
\def\PKGOPTS@FNAME{\jobname.pkgopts}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\ls@win{\immediate\write18{dir}}
\def\ls@unix{\immediate\write18{ls -a}}
\def\rm@win#1{\immediate\write18{erase #1}}
\def\rm@unix#1{\immediate\write18{rm -f -- #1}}
\def\rmdir@win#1{\immediate\write18{rmdir #1}}
\def\rmdir@unix#1{\immediate\write18{rmdir #1}}
\def\mkdir@win#1{\immediate\write18{mkdir #1}}
\def\mkdir@unix#1{\immediate\write18{mkdir -p #1}}
\def\chdir@win#1{\immediate\write18{chdir #1}}
\def\chdir@unix#1{\immediate\write18{cd #1}}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\TeXcompiler{pdflatex}
\def\verflag{--version}
\def\compileTeX#1{#1}
\def\@shell@esc{--shell-escape}
\def\@recorder@esc{-recorder}
\def\@shell@skip{\space\space}
%\CatchFileEdef{\stdoutB}{"|find -type d -maxdepth 1"}{\endlinechar=-1}%
%\edef\x{\endgroup\def\noexpand\TeXpath{\@@input|"which tex" }}\x
%\def\x{\endgroup\def\noexpand\TeXpath{\@@input|"dir" }}
%\begingroup\makeatletter\endlinechar=\m@ne\everyeof{\noexpand}
%-------------------------------------------------------------------------------------------------------------------------------%
\edef\envvar@prefix{COMPUTERNAME,ComSpec,COMSPEC,HOMEDRIVE,HOMEPATH,PDFLATEX,SHELL,SYSTEMROOT,TERM,TEXEDIT,USERPROFILE,WINDIR}
\edef\texenvvar@prefix{TEX}
\edef\sysenvvar@prefix{USER}
\edef\sysenvvar@winlist{COMPUTERNAME,ComSpec,COMSPEC,HOMEDRIVE,HOMEPATH,PDFLATEX,SHELL,SYSTEMROOT,TERM,TEXEDIT,USERPROFILE,WINDIR}
%\gdef\envvar@winlist{USERPROFILE}
\edef\texenvvar@winlist{TEXMFDIST,TEXEDIT,TEXMFHOME,TEXMFROOT,TEXMFVAR}
\edef\sysenvvar@unixlist{HOME}
%\edef\texenvvar@unixlist{\texenvvar@winlist}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\fname@recorder}[1][\jobname.tex]{-recorder #1}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\ifOScmd}[2][\OScmd]{\def\OScmd{\@csname{\ifOS{#2@win}{#2@unix}}}}
\newcommand{\ifOSdo}[1]{\ifOScmd{#1}\OScmd}
\newcommand{\ifOS}[2]{\ifwindows#1\else#2\fi}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             %-------------------------------------------------------------------------------------------------------------------------------%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Terminal Execution & File Writing Commands ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%-------------------------------------------------------------------------------------------------------------------------------%
%cp -lRr * /drives/c/texlive/2014/texmf-dist/tex/latex/mymacros/colordefs/%\DeleteFile
%\ProvideDirectory
%-------------------------------------------------------------------------------------------------------------------------------%
\def\nloop#1{%
        \def\nl@@p##1##2\repeat#1{%
                \def##1{##2\relax\xp##1\fi}%
                ##1\let##1\relax%
        }%
        \xp\nl@@p\csname nl@@p-\string#1\endcsname%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\noendline{\endlinechar=\m@ne\relax}
\def\makeallother{%
        \pkgcount=0\relax%
        \nloop\A\ifnum\pkgcount<256\relax%
                \catcode\pkgcount=12\relax%
                \advance\pkgcount by 1\relax%
        \repeat\A%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\ifinvalidIEEEoption#1{\ifIEEEbool\else#1\fi}
\def\ifinvalidpkgoption#1{\ifpkgbool\else#1\fi}
\def\ifboolkey#1#2#3{\ifnumequal{\commandkey{#1}}{1}{#2}{#3}}
%\long\def\ifboolkey#1#2#3{\ifnumequal{\commandkey{#1}}{\binaryT}{#2}{#3}}
\def\ifTFval#1{\@csname{if#1}true\else false\fi}
\def\ifTF@parse#1{#1\xp\@firstoftwo\else\xp\@secondoftwo\fi}
\def\ifT@parse#1{#1\xp\@firstofone\else\xp\@gobble\fi}
\def\ifF@parse#1{#1\xp\@gobble\else\xp\@firstofone\fi}
\def\if@empty#1{\ifTF@parse{\ifx#1\@empty\relax}}
\def\if@emptyT#1{\ifT@parse{\ifx#1\@empty\relax}}
\def\if@emptyF#1{\ifF@parse{\ifx#1\@empty\relax}}
\def\ifTF#1{\ifTF@parse{\@csname{if#1}}}
\def\ifT#1{\ifT@parse{\@csname{if#1}}}
\def\ifF#1{\ifF@parse{\@csname{if#1}}}
\def\ifTF@onearg#1#2{#1{#2}{\@firstoftwo}{\@secondoftwo}}
\def\ifT@onearg#1#2{#1{#2}{\@firstofone}{\@gobble}}
\def\ifF@onearg#1#2{#1{#2}{\@gobble}{\@firstofone}}
\def\ifTF@twoarg#1#2#3{#1{#2}{#3}{\@firstoftwo}{\@secondoftwo}}
\def\ifT@twoarg#1#2#3{#1{#2}{#3}{\@firstofone}{\@gobble}}
\def\ifF@twoarg#1#2#3{#1{#2}{#3}{\@gobble}{\@firstofone}}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@ifOr#1{\pkgboolfalse\@for\next:=#1\do{\@nameuse{if\next}\global\pkgbooltrue\fi}}
\def\ifOr#1{\@ifOr{#1}\ifTF{pkgbool}}
\def\iffOr#1{\@ifOr{#1}\ifT{pkgbool}}
\def\ifNOr#1{\@ifOr{#1}\ifF{pkgbool}}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@ifxOr#1#2{\pkgboolfalse\@for\next:=#2\do{\xp\ifx\xp#1\next\global\pkgbooltrue\fi}}
\def\ifxOr#1#2{\@ifxOr{#1}{#2}\ifTF{pkgbool}}
\def\iffxOr#1#2{\@ifxOr{#1}{#2}\ifT{pkgbool}}
\def\ifxNOr#1#2{\@ifxOr{#1}{#2}\ifF{pkgbool}}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@ifxAnd#1#2{\pkgbooltrue\@for\next:=#2\do{\xp\ifx\xp#1\next\else\global\pkgboolfalse\fi}}
\def\ifxAnd#1#2{\@ifxAnd{#1}{#2}\ifTF{pkgbool}}
\def\iffxAnd#1#2{\@ifxAnd{#1}{#2}\ifT{pkgbool}}
\def\ifxNAnd#1#2{\@ifxAnd{#1}{#2}\ifF{pkgbool}}
%-------------------------------------------------------------------------------------------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\apptotoks[2]{\xp\global\csname#2\endcsname\xp\xp\xp{\xp\the\csname#2\endcsname#1}}
\newcommand\appendtoks[2]{\global\pkgtoks\xp\xp\xp\xp\xp{\xp\xp\xp\the\xp\csname\xp#2\xp\endcsname#1}}
\newcommand\csvapptoks[3]{\@for\next:=#1\do{\xp\appendtoks\xp{#2\next}{#3}}}
\newcommand*\resettoks[1]{\xp\global\@csname{#1}{}}
%\newcommand*\resettoks[1]{\xp\global\csname#1\endcsname{}}
\newcommand*\printtoks[1]{\xp\the\@csname{#1}}
%\newcommand*\printtoks[1]{\xp\the\csname#1\endcsname}
\newcommand*\cmdprinttoks[2]{\xp#1\xp{\xp\the\@csname{#2}}}
%\newcommand*\cmdprinttoks[2]{\xp#1\xp{\xp\the\csname#2\endcsname}}
%\newcommand*\addIEEEconfig[1]{\global\IEEEconfigs\xp{\the\IEEEconfigs#1}}
%\newcommand*\setIEEEconfigs[0]{\the\IEEEconfigs}
%\newcommand*\resetIEEEtoks[0]{\global\IEEEtoks{}}
%\newcommand*\printIEEEtoks[0]{\the\IEEEtoks}
%\newcommand*\printIEEEcsvtoks[0]{\xp\@gobble\the\IEEEtoks}
%\newcommand\apptoIEEEtoks[1]{\global\IEEEtoks\xp\xp\xp{\xp\the\xp\IEEEtoks#1}}
%\newcommand\csvappIEEEtoks[2]{\@for\next:=#1\do{\xp\apptoIEEEtoks\xp{#2\next}}}
\newcommand*\resetpkgtoks[0]{\global\pkgtoks{}}
\newcommand*\printpkgtoks[0]{\the\pkgtoks}
\newcommand*\printpkgcsvtoks[0]{\xp\@gobble\the\pkgtoks}
\newcommand\apptopkgtoks[1]{\global\pkgtoks\xp\xp\xp{\xp\the\xp\pkgtoks#1}}
\newcommand\csvapppkgtoks[2]{\@for\next:=#1\do{\xp\apptopkgtoks\xp{#2\next}}}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\clean@filetoks#1^^J;{#1}
\def\fopenout@writetoks#1{\fopenout{#1}\xp\xp\xp\fwriteout\xp\xp\xp{\xp\clean@filetoks\the\pkgtoks;}}%
\def\fopenout@apptoks#1#2{\fopenout@writetoks{#1}\xp\xp\xp\fwriteout\xp\xp\xp{\xp\clean@filetoks#2;}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\fopenin[1]{\immediate\openin\@ifstream=#1\relax}
\newcommand\fclosein{\immediate\closein\@ifstream}
\newcommand\fopenout[1]{\immediate\openout\@ofstream=#1\relax}
\newcommand\fcloseout{\immediate\closeout\@ofstream}
\newcommand\freadin[1][\filetoks]{\immediate\read\@ifstream to#1}
\newcommand\freadlinein[1][\filetoks]{\immediate\readline\@ifstream to#1}
\newcommand\fwriteout[1]{\immediate\write\@ofstream{#1}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\freadtoks[3][\filetoks]{%
        \begingroup\makeallother\noendline\resetpkgtoks\fopenin{#2}%
        \loop\unless\ifeof\@ifstream\freadin[#1]%
                \ifx#1\@empty\else\apptopkgtoks{#1#3}\fi%
        \repeat\fclosein\endgroup%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\freadlist[2][\filetoks]{\freadtoks[#1]{#2}{,}}
\newcommand\fcopytoks[2][\filetoks]{\freadtoks[#1]{#2}{^^J}}
\newcommand\finout[3][\filetoks]{\begingroup\fcopytoks[#1]{#2}#3\fcloseout\endgroup}
\newcommand\fcopy[2][\filetoks]{\finout[#1]{#2}{\fopenout@writetoks{#2}}}
\newcommand\fappend[3][\filetoks]{\finout[#1]{#2}{\fopenout@apptoks{#2}{#3}}}
%\newcommand\bibdefs[1][\filetoks]{\freadlist[#1]{../pct-bib-list.txt}\xdef\thebibdefs{\printpkgtoks}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\fdefs[2][\filetoks]%
{%
        \resetpkgtoks\fopenin{#2}\begingroup%
        \loop\unless\ifeof\@ifstream\freadin[#1]%\filetoks\fdata
                \ifxNAnd{#1}{\@par@arg,\@empty}{\apptopkgtoks{#1}}
        \repeat\fclosein\endgroup\printpkgtoks%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\fread[2]{\immediate\openin\@ifstream=#1 #2\immediate\closein\@ifstream}
\newcommand\fwrite[2]{\immediate\openout\@ofstream=#1 #2\immediate\closeout\@ofstream}
\newcommand\mklfile[1]{\IfFileExists{#1}{}{\fwrite{#1}}}
\newcommand\wrlfile[2]{\fwrite{#1}{\immediate\write\@ofstream{#2}}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\wrpipe[2]{\immediate\write18{|"echo #2 > '#1'"}}%#1->'#1'
\newcommand\wrfile[2]{\immediate\write18{#2 > '#1'}}%#1->'#1'
\newcommand\wrline[1]{\immediate\write\@ofstream{#1}}
\newcommand\mkfile{\@ifstar{\mkfile@withstar}{\mkfile@withoutstar}}%\mkfile[1]{\wrfile{\cr}{#1}}
\newcommand\mkfile@withstar[1]{\wrfile{#1}{\cr}}
\newcommand\mkfile@withoutstar[1]{\IfFileExists{#1}{}{\wrfile{#1}{\cr}}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\fcontents[2][\finput]%
{
        \immediate\openin\@ifstream=\jobname.nfo
        \begingroup\obeylines\obeyspaces\catcode37=11 % %
        \loop\unless\ifeof\@ifstream
                \advance\linecnt by \@ne%
                \immediate\read\@ifstream to \finputline
                \ifundef{\finput}
                        {\xp\gdef\xp\finput\xp{\finputline}}
                        {\xaddto\finput\finputline}
        \repeat\finput\endgroup
}
%-------------------------------------------------------------------------------------------------------------------------------%
%\immediate\write18{/usr/local/bin/my-shell-script.sh > scriptoutput.tex}
%\input{|"/usr/local/bin/my-shell-script.sh"}
\newcommand{\gettexenv}[2][\stdout]%
{%
      \terminal[#1]{kpsewhich --var-value #2}%
      %\terminal[#1]{set #2}%
      %\CatchFileEdef{#1}{"|set #2"}{\catcode`\\=12\endlinechar=-1}%
      %\CatchFileEdef{#1}{"|set #2"}{\@sanitize\endlinechar=-1}%
      %\CatchFileEdef{\stdout}{"|kpsewhich --var-value #2"}{\endlinechar=-1}%
      %\if\relax\detokenize{#1}\relax\stdout\else\let#1\stdout\fi%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\getenv}[2][\stdout]%
{%
      %\CatchFileEdef{#1}{"|set TEXMFHOME=C:\Users\Blake\texmf"}{\catcode`\\=12\endlinechar=-1}%
      %\terminal[#1]{kpsewhich -expand-braces -var-value #2}%
      %\terminal[#1]{set #2}%
      %\CatchFileEdef{#1}{"|set #2"}{\catcode`\\=12\endlinechar=-1}%
      %\CatchFileEdef{#1}{"|set #2"}{\@sanitize\endlinechar=-1}%
      \CatchFileEdef{#1}{"|kpsewhich -var-value #2"}{\catcode37=11\endlinechar=-1}%-expand-var
      %\def\stdout{\input{|"kpsewhich -var-value #2"}}
      %  \begingroup\everyeof{\noexpand}
      %  \def\x{\endgroup\def\USER@TEXEDIT{\@@input|"kpsewhich --var-value #2"}}\x%
        %\edef\x{\endgroup\noexpand\zap@space\x\noexpand\@empty}\x%
      %\if\relax\detokenize{#1}\relax\stdout\else\let#1\stdout\fi%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\fullpath{%
        \begingroup\everyeof{\noexpand}\@sanitize
        \edef\x{\@@input|"find test.tex" }%
        \edef\x{\endgroup\noexpand\zap@space\x\noexpand\@empty}\x%
        \begingroup\makeatletter\endlinechar=\m@ne\obeylines\everyeof{\noexpand}\@sanitize%\obeyspaces
        %\edef\x{\endgroup\def\noexpand\TeXpath{\@@input|"which tex" }}\x
        \edef\x{\endgroup\def\noexpand\TeXpath{\@@input|"dir" }}\x
        %\edef\termoutput{\xp\xp\xp\macroname\xp\xp\xp{\input{|"dir" }}}
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\terminal}{\@ifstar{\@terminal@withstar}{\@terminal@withoutstar}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\@terminal@withoutstar}[2][\stdout]%
{%
      \CatchFileEdef{#1}{"|#2"}{\endlinechar=-1}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\@terminal@withstar}[2][\stdout]%
{%
        \begingroup%
                %{\catcode`\^^M13 \gdef\obeycr{\catcode`\^^M13 \def^^M{^^J}%
                %\@gobblecr}
                %\@sanitize\everyeof{\noexpand}
                %\catcode`\^^M=\active\let^^M\wr@endline%
                %\CatchFileDef{\stdout}{"|#1"}{\endlinechar=-1}%
                %\CatchFileDef{#1}{"|#2"}{\@sanitize\obeycr\obeylines}%\endlinechar=-1
                \CatchFileDef{#1}{"|#2"}{}%
                \if\relax\detokenize{#1}\relax\stdout\else\global\let#1\stdout\fi%
        \endgroup
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\termexec{\@ifstar{\@rm@termfile@false\@termexec}{\@rm@termfile@true\@termexec}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\@termexec[2][\stdout]%
{
        %\newread\@ifstream
        %\immediate\write18{#2 > '\STDOUT@FNAME'}
        \wrfile{\STDOUT@FNAME}{#2}%
        \immediate\openin\@ifstream=\jobname.stdout
        \bgroup
          \endlinechar=-1
          \read\@ifstream to \finputline
          \global\let#1\finputline
        \egroup
        \closein\@ifstream
        \if@rm@termfile@
                \ifOSdo{rm}{'\jobname.stdout'}
        \fi
        \@rm@termfile@true
}
%\def\@makeletter#1{\catcode`#111\relax}
\def\@makeletter#1{\catcode`#1=11\relax}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@cssanitize{\@makeother\\ \@makeother\$\@makeother\&\@makeother\#\@makeother\^\@makeother\_\@makeother\%\@makeother\~}
%-------------------------------------------------------------------------------------------------------------------------------%
\def\@makeactive#1{\catcode`\#1\active}
%-------------------------------------------------------------------------------------------------------------------------------%
%\begingroup\escapechar=-1\edef\x{\endgroup\string\power}\x
\newcommand\csprint[1]{\scopecmd{\escapechar=-1}{\string#1}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\dosystem{\@ifstar{\@tempswafalse\do@system}{\@tempswatrue\do@system}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand\do@system[1]{%
  \begingroup
  \let\%\@percentchar
  \let\#\wr@hashmark
  \let\$\wr@dollar
  \let\<\wr@lcarat
  \let\>\wr@rcarat
  \let\{\wr@lbrace
  \let\}\wr@rbrace
  \if@tempswa\expandafter\immediate\fi
  \write18{#1}%
  \endgroup
}
%-------------------------------------------------------------------------------------------------------------------------------%
%*******************************************************************************************************************************%
%******************* Package loading commands extending '\RequirePackage' and package option handler commands ******************%
%*******************************************************************************************************************************%
%-------------------------------------------------------------------------------------------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
%*******************************************************************************************************************************%
%*********************************************** End of 'pkgbase.sty' package **************************************************%
%*******************************************************************************************************************************%
%-------------------------------------------------------------------------------------------------------------------------------%
\makeatother
%-------------------------------------------------------------------------------------------------------------------------------%
\endinput
%-------------------------------------------------------------------------------------------------------------------------------%
%*******************************************************************************************************************************%
%*********************************************************** NOTES *************************************************************%
%*******************************************************************************************************************************%
%-------------------------------------------------------------------------------------------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\def\nfss@catcodes{%
     \makeatletter
     \catcode`\ 9%
     \catcode`\^^I9%
     \catcode`\^^M9%
     \catcode`\\\z@
     \catcode`\{\@ne
     \catcode`\}\tw@
     \catcode`\#6%
     \catcode`\^7%
     \catcode`\%14%
   \@makeother\<%
   \@makeother\>%
   \@makeother\*%
   \@makeother\.%
   \@makeother\-%
   \@makeother\/%
   \@makeother\[%
   \@makeother\]%
   \@makeother\`%
   \@makeother\'%
   \@makeother\"%
}
