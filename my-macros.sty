%******************************************************************************************************************************%
%****************************************************** `my-macros.sty' *******************************************************%
%******************************************************************************************************************************%
% Provides definitions of standardized/universal document type environments used in place of the standard 'document' environment (e.g. 'homework', 'documentation', etc.), with options to include a coverpage and automatically configure document dimensions/properties/content, as well as the package macros/commands/environments/etc.
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Define provided package name and LaTeX/package dependencies ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
\NeedsTeXFormat{LaTeX2e}[2005/12/01]
\ProvidesPackage{my-macros}
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Package options and corresponding Boolean variables ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
\DeclareOption*{\PackageWarning{my-macros}{Unknown \CurrentOption}}
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Processing of package options ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
\ProcessOptions\relax
%------------------------------------------------------------------------------------------------------------------------------%
\makeatletter                           % Change @ to standard letter, \catcode'@=11 so it can be used in macro names/definition
%------------------------------------------------------------------------------------------------------------------------------%
%******************************************************************************************************************************%
%******************************************************** Package Body ********************************************************%
%******************************************************************************************************************************%

%------------------------------------------------------------------------------------------------------------------------------%
%----------------------------------------------------- Command Definitions ----------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%

%------------------------------------------------------------------------------------------------------------------------------%
% Calculate length of alignat environment
\DeclareDocumentCommand{\settowidthofalign}{m m}
{%
    \setbox\z@=\vbox
    {
        \begin{alignat*}{2}
            #2
            \ifmeasuring@\else\global\let\got@maxcolwd\maxcolumn@widths\fi
        \end{alignat*}
    }%
    \begingroup
    \def\or{+}\edef\x{\endgroup#1=\dimexpr\got@maxcolwd\relax}\x
}
%------------------------------------------------------------------------------------------------------------------------------%
% Insert a blank page, with (default) or without (starred version) increasing the page #
\DeclareDocumentCommand{\blankpage}{s}
{
    \newpage%
    \thispagestyle{empty}%
    \mbox{}%
    \newpage%
    \IfBooleanTF{#1}{\decrementcounter{page}}{}
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\pagelink}{s m O{}}
{
        \begingroup%
                \pgfmathsetmacro{\@destination@pagenum}{#2}
                \pgfmathparse{ifthenelse(\@destination@pagenum==1, 1, 0)}
                \if\pgfmathresult 1\relax
                        \hyperlink{\@page@one@target@name}{#3}%
                \else
                        \hyperlink{\@page@n@target@name#2}{#3}%
                \fi
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbhypertarget}{o m m}
{%
        \IfValueTF{#1}%
                {\hypertarget{#2}{\fontcolor{#1}#3}}%
                {\hypertarget{#2}{#3}}%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbhyperlink}{o m m}
{%
        \IfValueTF{#1}
                {\hyperlink{#2}{\fontcolor{#1}#3}}%
                {\hyperlink{#2}{#3}}%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@autohyperlink}{m m m}
{%
        \begingroup%
                \ifcsstrequal{#1}{Chapter}{\unskipspacing\docsectionX@hyperlink[0pt]{#1}{#2}{#3}}{}%
                \ifcsstrequal{#1}{Section}{\unskipspacing\docsectionX@hyperlink[0pt]{#1}{#2}{#3}}{}%
                \ifcsstrequal{#1}{Subsection}{\unskipspacing\docsectionX@hyperlink[0pt]{#1}{#2}{#3}}{}%
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                           1 2          3        4 5 6
\DeclareDocumentCommand{\cftX@uparrow@link}{s D(){arrow} D<>{0.4} m o D(){upload-button.png}}%
{%\cftX@uparrow@link*<clear page>!<add vskip after>'color scheme'{Subsection title}(hypertarget label prefix)[description text]
        %\flushleft\unskipspacing%
        \IfValueTF{#5}%
                {\def\@link@address{#5}}%
                {\def\@link@address{\@nameuse{cft#4@toc@hyperaddress}}}%
                %{\def\@link@address{\cft@hyperaddress{#2}}}
        \IfBooleanTF{#1}%
        {%
                \reversemarginpar%
                \marginnote%
                {%
                        %\BMKcircle[shape=arrow,scale=0.5, colorscheme=tcbBlueScheme, draw=stdblue, fill=stdblue, outline=black]
                        %\tocX@hyperlink{#1}%colorscheme=tcbBlueScheme, draw=stdblue, fill=stdblue,
                        \hyperlink{\@link@address}%
                        {%
                                \normalsize\normalfont\BMKcircle[shape=#2,scale=#3, outline=black]%
                                %\includegraphics[width=6.5mm]{#2}%
                        }%
                        %{\includegraphics[width=6.5mm]{#2}}%
                        %\hfill%
                }%%
        }%
        {%
                \hyperlink{\@link@address}%
                {%
                       \normalsize\normalfont\BMKcircle[shape=#2,scale=#3, outline=black]%
                       %\includegraphics[width=6.5mm]{#2}%
                }%
        }%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\autotcbref}{D(){figure} O{1}}
{%
    \ifstrequal{#1}{figure}{\autoref{\reffig{#2}}}{}%
    \ifstrequal{#1}{equation}{\autoref\refeq{#2}}{}%
    \ifstrequal{#1}{listing}{\autoref{\reflst{#2}}}{}
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                1   2   3   4       5
\DeclareDocumentCommand{\tikzUL}{d<> d<> d() O{rect} m}
{%
        \IfValueTF{#1}{\setlength\@tikzUL@thickness{#1}}{}%
        \IfValueTF{#2}{\setlength\@tikzUL@depth{#2}}{}%
        \IfValueTF{#3}{\def\@tikzUL@color{#3}}{}%
        %\@set@current@tcb@colors{default}%
        \setkeys[tcb]{tikzUL}{linecap=#4}
        \tikz%
        [
                baseline=(text.base),
                node font=\the\font,
                inner sep=0pt,
                line width=\@tikzUL@thickness,
                line cap=\@tikzUL@line@cap, % rect, butt, also decorations, ...
        ]
        \draw node (text) {\@use@curr@font@color#5}
                (text.south east) ++(0.0pt, -\@tikzUL@depth) coordinate (tmp)
                -- (text.south west |- tmp);
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@section@sep}{m m}
{       %
        \begingroup%
        \@enforce@sizeX%
        \centering\minibox%
        {
                \fontcolor{#1}\rule{\textwidth}{1pt}\\[\dimexpr-10pt-3.5pt\relax]
                \fontcolor{#2}\rule{\textwidth}{1pt}\\[\dimexpr-10pt-3.5pt\relax]
                \fontcolor{#2}\rule{\textwidth}{1pt}\\[\dimexpr-1em-3.5pt\relax]
                \fontcolor{#1}\rule{\textwidth}{1pt}\\[\dimexpr-10pt-3.5pt\relax]%
                \par\smallskip%
        }%
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\baylorsection}{}{\@section@sep{BaylorGreenCMYK}{BaylorGoldCMYK}}
%------------------------------------------------------------------------------------------------------------------------------%
%                                       1 2  3                        4 5                  6
\DeclareDocumentCommand{\sectionheader}{s t! O{\tcbsectionheaderfont} m O{BaylorGreenCMYK} O{BaylorGoldCMYK}}
{%
        \begingroup%
        \let\parindent\@par@indent%
        \setlength{\parindent}{0pt}%
        \settowidth\@macro@width{\shadowtext{#3{#4}}}%
        \shadowcolor{#6}%
        \color{#5}%
        \par\vspace{-\parskip}%
        \parbox{\textwidth}%
        {%
                \@section@sep{#5}{#6}%
                \@enforce@sizeX
                \\%
                \centering%
                \pgfmathparse{ifthenelse(\@macro@width>= \linewidth, 1, 0)}%
                \ifnumcomp{\pgfmathresult}{=}{1}%
                        {\shadowtext{\parbox{\textwidth}{\raggedright#3{#4}}}}%
                        {\shadowtext{\raggedright#3{#4}}}%
                \\%
                \@section@sep{#5}{#6}%
        }%
        \endgroup%
        \let\parindent\@par@indent%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\caratenclosed}{s m}
{%\shadowText<title font>'color style'{title text}
        \IfBooleanTF{#1}%
                {$<$\emph{#2}$>$}%
                {$<$#2$>$}%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\legendentry}{s O{documentation-file} m m}
{
        \begingroup%
                \bfseries\fontcolor{#2}{\textbf{#3}} \fontcolor{Black}: #4%
                \IfBooleanTF{#1}{\parnoskip}%
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\fileentry}{s O{documentation-file} m m}
{
        \begingroup%
                \fontcolor{#2}{\textbf{\textit{#3}}} \fontcolor{Black}: #4%
                \IfBooleanTF{#1}{\parnoskip}%
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\docentry}{s t! O{file} m}
{%
        \begingroup%
        %\@xp@def\expandafter\@text@input\expandafter{#4}%
        \xpdef\@text@input{#4}%
        \IfBooleanTF{#1}%
                {\def\@text@entry{``\@text@input''}}%\textcolor{blue}
                {\def\@text@entry{\@text@input}}%
        \ifstrequal{#3}{file}{\def\@Atext@entry{\coloredtext*!{documentation-#3}{\textit{\@text@entry}}}}{}%
        \ifstrequal{#3}{fileset}{\def\@Atext@entry{\coloredtext*!{documentation-#3}{\textit{\@text@entry}}}}{}%
        \ifstrequal{#3}{constdir}{\def\@Atext@entry{\coloredtext*{documentation-#3}{\dirsep\@text@entry}}}{}%
        \ifstrequal{#3}{dir}{\def\@Atext@entry{\coloredtext*{documentation-#3}{\dirsep\@text@entry}}}{}%
        \ifstrequal{#3}{subcategory}{\def\@Atext@entry{\coloredtext*!{documentation-#3}{\textit{\@text@entry}}}}{}%
        \ifstrequal{#3}{gitrepo}{\def\@Atext@entry{\coloredtext*{documentation-#3}{\dirsep\@text@entry}}}{}%
        \ifstrequal{#3}{gitaccount}{\def\@Atext@entry{\coloredtext*{documentation-#3}{\dirsep\@text@entry}}}{}%
        \ifstrequal{#3}{gitbranch}{\def\@Atext@entry{\coloredtext*{documentation-#3}{\texttt{\@text@entry}}}}{}%
        \ifstrequal{#3}{script}{\def\@Atext@entry{\coloredtext*!{documentation-#3}{\textup\@text@entry}}}{}%
        \IfBooleanTF{#2}%
                {\bfseries``\@Atext@entry''\unskipspacing}%
                {\bfseries\@Atext@entry\unskipspacing}%
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                        1 2         3            4            5   6 7        8
\DeclareDocumentCommand{\fillednumshape}{s O{circle} D(){\arabic} D''{current} d() m D(){5mm} D<>{0.5pt}}
{%\fillednumshape[*<counter on>][shape](counter print format){color style}{character/text or counter}(min size)<inner sep>
        \@set@current@tcb@colors{#4}
        \IfBooleanTF{#1}
                {\edef\shapecontents{#3{#6}}}
                {\edef\shapecontents{#6}}
        \IfValueTF{#5}
                {\def\@line@color{#5}}
                {\def\@line@color{#4-colfillborder}}
        \tikz[baseline=(char.base)]%
        {%
                \node[shape=#2, font=\small, fill=fillednumshape-colfill, draw=\@line@color, thick, minimum size=#7, inner sep=#8, align=flush center] (char) {\textcolor{fillednumshape-colfilltext}{\hspace{0pt}\bfseries\shapecontents}};%
        }%
}
%------------------------------------------------------------------------------------------------------------------------------%
% Boxed equation maintaining alignment w/ previous equations that use '&' alignment character
\DeclareDocumentCommand{\@format@counters}{s o}
{%\tcbequation{<LHS>}{<RHS>}[</tcb/.style>]
        \renewcommand{\thesection}%
        {%
                \ifnum\c@chapter<1 \@arabic\c@section
                \else \thechapter.\@arabic\c@section
                \fi
        }
        \renewcommand{\the@prob@counter}{%
                \ifnum\c@@chap@counter<1 \@arabic\c@@prob@counter
                \else \the@chap@counter.\@arabic\c@@prob@counter
                \fi
        }
        \renewcommand{\theTopic}{%
                \ifnum\c@Part<1
                        \@arabic\c@Topic
                \else
                        \thePart-\@arabic\c@Topic
                \fi
        }
        \addtolength{\cftPartnumwidth}{\widthof{\thePart} + 0.75em}
        \addtolength{\cftTopicnumwidth}{\widthof{\theTopic} + 1.0em}
}
%------------------------------------------------------------------------------------------------------------------------------%
% Boxed equation maintaining alignment w/ previous equations that use '&' alignment character
%                                     1 2  3 4 5                   6
\DeclareDocumentCommand{\tcbequation}{s t! m m O{tcbequationStyle} d''}
{%\tcbequation{<LHS>}{<RHS>}[</tcb/.style>]
    &
    \begingroup
        \settowidth\@macro@width{$\displaystyle #3$}
        \addtolength\@macro@width{4\fboxsep+4\fboxrule}
        \hspace{-\@macro@width}
    \endgroup
    \IfValueTF{#6}
            {\@set@current@tcb@colors{#6}}
            {
                \IfBooleanTF{#1}
                        {\@set@current@tcb@colors{tcbequationColorset}}
                        {\@set@current@tcb@colors{tcbsolutionColorset}}
            }
    \tcboxmath[#5]{\boldsymbol{#3 #4}}
    \\\notag
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbfigboxlist}{>{\SplitList{\\}} m O{\@tcb@figbox@width}}
{%
        \begin{tabular}[#2]{c}%
                \ProcessList{#1}{\tcbfigboxrow}%
        \end{tabular}\xspace%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbfigboxrow}{>{\SplitList{|}} m}
{%
        \resetcounter{@num@tcbfigures}\ignorespaces%
        \ProcessList{#1}{\@increment@tcbfigure@counter}%
        %\ProcessList{#1}{\ProcessList@gobble@cmd{\stepcounter{@num@tcbfigures}}}%
        \setlength{\@tcb@figbox@figure@width}{\dimexpr\@tcb@figbox@width/\value{@num@tcbfigures}\relax}%
        \ProcessList{#1}{\tcbfigboxfigure}\\%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbfigboxfigure}{>{ \SplitList{;}} m}{\tcbfigboximage#1}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbfigboximage}{m m G{\@default@fig@ref@label}}
{%
        \stepcounter{figboxfigure}%
        \@set@current@tcb@colors{tcbfigureColorset}%
        \ifstrempty{#2}%
                {\def\@title@sep{}}%
                {\def\@title@sep{\@tcb@title@sep}}%
        \def\titleargwrapper{#2}%
        \begin{figboxfigure}{#2}[#3]%
                \includegraphics[width=\@tcb@figbox@figure@width]{#1}%
        \end{figboxfigure}%
}
%******************************************************************************************************************************%
%**************************************** Custom mdframed/tcolorbox Boxed Environments ****************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
\newmdtheoremenv[hidealllines=true, backgroundcolor=current-colback, innertopmargin=\f@size pt,
linewidth=4pt, linecolor=current-coldraw,
        singleextra=
        {
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(1cm,0cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(0cm,-1cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O-|P) -- +(-1cm,0cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O-|P) -- +(0cm,1cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O) -- +(1cm,0cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O) -- +(0cm,1cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (P) -- +(-1cm,0cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (P) -- +(0cm,-1cm);
        },
        firstextra=
        {
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(1cm,0cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(0cm,-1cm);
        },
        secondextra=
        {
          \draw[line width=3pt,current-coldraw,line cap=rect] (O-|P) -- +(-1cm,0cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O-|P) -- +(0cm,1cm);
        }
]{mdfdef@fullcornerbox}{\@defbox@title}
%------------------------------------------------------------------------------------------------------------------------------%
\newmdtheoremenv[hidealllines=true, backgroundcolor=current-colback, innertopmargin=\f@size pt,
linewidth=4pt, linecolor=current-coldraw,
        singleextra=
        {
          \draw[line width=3pt,current-coldraw,line cap=rect] (P|-O) -- +(-1cm,0cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (P|-O) -- +(0cm,1cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(1cm,0cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(0cm,-1cm);
        }
]{mdfdef@cornerbox}{\@defbox@title}
%------------------------------------------------------------------------------------------------------------------------------%
\newmdtheoremenv
[roundcorner=5pt, backgroundcolor=current-colback, innertopmargin=7.5pt, innerbottommargin=\f@size pt, linewidth=4pt, linecolor=current-coldraw]
{mdfdef@borderbox}{\@defbox@title}
%------------------------------------------------------------------------------------------------------------------------------%
\newmdenv
[%
        innertopmargin=0pt, backgroundcolor=current-colback, roundcorner=8pt, linewidth=2pt,
        linecolor=current-coldraw, leftmargin=0mm, innertopmargin=\baselineskip, innerleftmargin=10pt, innerrightmargin=10pt,
        %innerbottommargin = 4pt,
        singleextra=
        {
                \node[anchor=west, inner xsep=6pt, inner ysep=4pt, xshift=10pt, fill=current-colfill, rounded corners=4pt, line width=1pt, draw]%
                        at (P-|O) {\normalsize\sffamily\bfseries\fontcolor{current-coltitle}\@defbox@title:};
        },
        firstextra=
        {
                \node[anchor=west, inner xsep=5pt, inner ysep=3pt, fill=current-colfill, rounded corners=4pt, line width=1pt, draw]%
                        at (P-|O) {\normalsize\sffamily\bfseries\fontcolor{current-coltitle}\@defbox@title:};
        }
]{mdfdef@titlebox}
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ tcolorbox Environment Definitions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%------------------------------------------------------------------------------------------------------------------------------%
\newtcolorbox[auto counter, number within=section]{mdfdef@tabbox}[2][]
{%
        before=\bigskip\centering, after=\bigskip, enhanced, arc=15pt, colframe=current-colframe, colback=white,
        fonttitle=\sffamily\bfseries, title=\@defbox@title\space~\thetcbcounter, sharp corners, rounded corners=northeast,
        attach boxed title to top left, colback=stdbackground, left=6pt, right=6pt,
        boxed title style=
        {%
                enhanced, colframe=current-colframe, colback=current-colframeborder, arc=5pt, bottomrule=0pt,
                rightrule=1pt, sharp corners, rounded corners=northeast,
        },
        interior style={},
        frame style={left color=current-colframe, right color=current-coldoubleline, fill=none},
        overlay unbroken and first={\node[anchor=west,font=\sffamily, color=current-coldoubleline] at (title.east) {{\small #2}};},
        #1
}
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
\newtcolorbox{tcbContentsBox}
{%
        reset, enhanced, capture=minipage, boxrule=3pt, breakable, @set@tcb@property@colors=tcbBlueScheme,
        before=\par\bigskip\smallskip\noindent, after=\par\bigskip, %fontupper=\tcbX@title@fontfamily,
        fonttitle=\tcbX@title@fontdef,
        top=1mm, bottom=0.5pt, left=6mm, left skip=1mm, %colback=stdbackground,
        titleframeComboInteriorSetup,
        titleframeComboSetup
}
%------------------------------------------------------------------------------------------------------------------------------%
\newtcbox{\tcbinlinetextbox}[1][inlineboxgray]{enhanced, arc=2pt, boxsep=1pt, top=2.5pt, bottom=1.5pt, left=4pt, right=4pt, fontupper=\fontfamily{cmss}\selectfont,
        colback=white, coltext=black, colframe=#1, boxrule=0.5pt,
        borderline={1.5pt}{1pt}{white}, fuzzy shadow={0.0pt}{-1.5pt}{0.5pt}{0.1mm}{stdgray},%
        interior code=
        {
                \filldraw[draw=#1, fill=#1, sharp corners, line width=0pt]
                        ([xshift=-2pt, yshift =-2pt]interior.north east)
                        --([xshift=2pt, yshift =-2pt]interior.north west)
                        --([xshift=2pt, yshift =2pt]interior.south west)
                        --([xshift=-2pt, yshift =2pt]interior.south east)
                        -- cycle;
        }%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTotalTCBox{\tcboxVerb}{O{red} v O{}}
{
        fontupper=\ttfamily, nobeforeafter, tcbox raise base, arc=0pt, outer arc=0pt, top=0pt, bottom=0pt,
        left=0mm, right=0mm, leftrule=0pt, rightrule=0pt, toprule=0.3mm, bottomrule=0.3mm, boxsep=0.5mm,
        colback=#1!10!white, colframe=#1!50!black, #3
}
{#2}
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox{figbox}{ O{} m O{fig:fig\thefigure}}
{
        tcbfigboxStyle=
                {\@tcb@boxrule@linewidth}
                {single}
                {tcbfigboxColorset-colframeborder}
                {tcbfigboxColorset-colinteriorborder},
        label={#3},
        blend before title code=
        {%
                \bookmarkX@hypertarget{figbox}%
                \cftfigbox@hyperblend*%
                        '\@tcb@subtitle@font'%
                        {\@title@sep}%
                        \unskipspacing%
        },
        title=
        {%
                \cftfigbox@contentsline{#2}%
                \bookmarkX@hypertarget{figbox}%
                \cftfigbox@hypertitle*%
                '{\shadowText*:\Large:'%
                tcbfigboxColorset'[black]}'{}{#2}%
        },
        #1
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox[blend into=figures, number within=figbox]{figboxfigure}{ O{} m O{fig:fig\thefigure}}
{
        reset, tcbfigureStyle, #1, capture=hbox, label={#3}, every float=\centering,
        code=
        {
                \@set@current@tcb@colors{tcbfigureColorset}
                \ifstrempty{#2}
                        {\def\@title@sep{}}
                        {\def\@title@sep{\@tcb@title@sep}}
        },
        blend before title code=
        {%
                \bookmarkX@hypertarget{figboxfigure}%
                \cftfigboxfigure@hyperblend*'\@tcb@subtitle@font'{\@title@sep}%
                \unskipspacing%
        },
        title={\cftfigboxfigure@hyperblend@title*{}{#2}},
        list entry={\hspace{\cftfigboxfigureindent}\cftfigboxfigure@listentry{\@title@sep}#2},
        after={\cftfigboxfigure@bookmark}
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox[blend into=tables]{IBPtable}{O{} m m O{}}
{
        tabular*={}{#2},
        IBPStyle={\@tcb@default@boxrule@linewidth}{single}{IBPColorset-colframeborder}{IBPColorset-colinteriorborder},
        code=
        {%
                \def\@title@sep{}
                \def\@listentry@title@sep{}
                \ifdefempty{#3}%
                {%
                        \vspace{5mm}%
                        \setlength{\@tcb@IBP@leftright@skip}{0mm}%
                }
                {%
                        \vspace{5mm}%
                        \def\@title@sep{\@tcb@title@sep}%
                        \setlength{\@tcb@IBP@leftright@skip}{\maxof{0.5\@tcb@IBP@math@content@width - 4mm}{0mm}}%
                }
                \ifdefempty{#4}%
                {}
                {%
                        \def\@title@sep{\@tcb@title@sep}%
                        \def\@listentry@title@sep{\@tcb@title@sep}
                        \addtolength{\@tcb@IBP@leftright@skip}{-0.5\@tcb@IBP@math@content@width + 4mm}%
                }%
                %\begingroup\linespread@settings[context=IBP]\endgroup%
                \setlinespread{IBP}%\linespread@settings[context=IBP]
        },
        extrude left by=\@tcb@IBP@leftright@skip,
        extrude right by=\@tcb@IBP@leftright@skip,
        every float=\centering,
        label={tab:tab\thetable},
        blend before title code=
        {%
                \bookmarkX@hypertarget{IBPtable}%
                \tocX@hypertarget{table}%
                \cftIBPtable@hyperblend*{\@title@sep}%
        },
        title={\tocX@hypertarget[12pt]{table}[IBPtable]#3},
        extrude right by=1mm,
        list entry={\cftIBPtable@listentry{\@listentry@title@sep#4}},
        after={\cftIBPtable@bookmark!\par\smallskip}
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox[blend into=tables]{PLDtable}{O{} m m O{}}
{
        PLDStyle={\@tcb@default@boxrule@linewidth}{doubleinner}{pldColorset-colframeborder}{pldColorset-colinteriorborder},
        code=
        {%
                \def\@title@sep{}
                \def\@listentry@title@sep{}
                \ifdefempty{#3}%
                {%
                        \vspace{5mm}%
                        \setlength{\@tcb@IBP@leftright@skip}{0mm}%
                }
                {%
                        \vspace{5mm}%
                        \def\@title@sep{\@tcb@title@sep}%
                        \setlength{\@tcb@IBP@leftright@skip}{\maxof{0.5\@tcb@IBP@math@content@width - 4mm}{0mm}}%
                }
                \ifdefempty{#4}%
                {}
                {%
                        \def\@title@sep{\@tcb@title@sep}%
                        \def\@listentry@title@sep{\@tcb@title@sep}
                        \addtolength{\@tcb@IBP@leftright@skip}{-0.5\@tcb@IBP@math@content@width + 4mm}%
                }%

        },
        extrude left by=\@tcb@IBP@leftright@skip,
        extrude right by=\@tcb@IBP@leftright@skip,
        every float=\centering,
        label={tab:tab\thetable},
        blend before title code={\bookmarkX@hypertarget{IBPtable}\tocX@hypertarget{table}\cftIBPtable@hyperblend*{\@title@sep}},
        title={#3},
        extrude right by=1mm,
        list entry={\cftIBPtable@listentry{\@listentry@title@sep#4}},
        after={\cftIBPtable@bookmark}
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox[blend into=figures]{boxedfigure}{ o m m O{fig:fig\thefigure}}
        {#1, capture=hbox, label={#4}, title={#2}, list text={\normalsize\bfseries#3}, every float=\centering}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox[blend into=tables]{boxedtable}{ o m m O{h!} O{tab:tab\thetable}}
{%boxedtable[tcb settings]{tcb title text}{toc title text}[table placement][alternative reference label]
        #1, float=#4, every float=\centering, capture=hbox, label={#5},
        code=
        {
                \ifdefempty{#2}
                        {\def\@title@sep{}}
                        {\def\@title@sep{\@tcb@title@sep}}
        },
        title={\shadow{#2}},
        blend before title code={\sffamily\BreakableShadowText:\cftX@tcbtitle@fontfamily:[white](black){##1\@title@sep}},
        list entry={\normalsize\bfseries\protect\numberline{\thetable}#3}
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                                     1 2 3 4     5
\DeclareTColorBox[blend into=listings]{boxedlisting}{ o m m O{h!} O{lst:lst\thelstlisting}}
{float=#4, capture=hbox, label={#5}, title={#2}, list entry={\normalsize\bfseries\protect\numberline{\thelstlisting}#3}, every float=\centering, #1}
%------------------------------------------------------------------------------------------------------------------------------%
%******************************************************************************************************************************%
%****************************************** Coverpage and Document Type Environments ******************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
%                                                    1 2 3
\DeclareDocumentEnvironment{documentation-coverpage}{m m m}
{%\documentation-coverpage{title}{subtitle}{author}
        \unskipspacing%
        \zsavepos{top@coverpage}%
        \begingroup%
        \thispagestyle{empty}%
        \shadowcolor{BaylorGoldCMYK}%
        \centering%
        \savebox{\@coverpage@savebox@title@contents}{\shadowtext{\@coverpage@title@font#1}}%
        \savebox{\@coverpage@savebox@title}{\cshadowbox{\shadowtext{\@coverpage@title@font#1}}}%
        \savebox{\@coverpage@savebox@unilogo}{\cshadowbox{\includegraphics[width=\wd\@coverpage@savebox@title@contents]{\@uni@logo}}}%
        \savebox{\@coverpage@savebox@deptlogo}{\cshadowbox{\includegraphics[width=\wd\@coverpage@savebox@title@contents]{\@uni@dept@logo}}}%
        \savebox{\@coverpage@savebox@description}{\parbox{\textwidth}{\sectionheader!{\raggedright\@coverpage@description@font{#2}}}}%
        \savebox{\@coverpage@savebox@author@date}%
        {%
                \parbox{\textwidth}%
                {%
                        \centering%
                        \@coverpage@author@font\shadowtext{#3}\\[0.5em]%
                        \@coverpage@date@font\shadowtext{\today}\\[-1.0em]%
                        \vspace{\@coverpage@dept@logo@before@skip}%
                        \usebox{\@coverpage@savebox@deptlogo}\unskip%
               }%
        }%
        \setlength{\@coverpage@uni@logo@height}{\ht\@coverpage@savebox@unilogo}%
        \setlength{\@coverpage@dept@logo@height}{\ht\@coverpage@savebox@deptlogo}%
        \setlength{\@coverpage@title@height}{\ht\@coverpage@savebox@title}%
        \setlength{\@coverpage@description@height}{\ht\@coverpage@savebox@description}%
        \setlength{\@coverpage@author@date@height}{\ht\@coverpage@savebox@author@date@deptlogo}%
        \setlength{\@coverpage@free@vspace}%
        {%
                \dimexpr\textheight - \@coverpage@uni@logo@height - \@coverpage@author@date@height - \@coverpage@title@height
                - \@coverpage@description@height - \@coverpage@title@before@skip - \@coverpage@description@before@skip - 2in
                - \@coverpage@dept@logo@before@skip - \@coverpage@author@date@sep\relax%
        }%
        \setlength{\@coverpage@top}{\dimexpr\@coverpage@free@vspace / 2\relax}%
        %\vspace{-4mm}
        %\@section@sep{BaylorGreenCMYK}{BaylorGoldCMYK}\\[-0.7em]%
        \usebox{\@coverpage@savebox@unilogo}\\[-0em]\vspace{\@coverpage@title@before@skip}%
        \usebox{\@coverpage@savebox@title}\\[-1em]\vspace{\@coverpage@description@before@skip}%
        \usebox{\@coverpage@savebox@description}\\[-1em]\vspace{\@coverpage@author@date@before@skip}%
        \usebox{\@coverpage@savebox@author@date}\\[-1em]%
        \usebox{\@coverpage@savebox@author@date@deptlogo}\\[-0.10em]%
        %\@section@sep{BaylorGreenCMYK}{BaylorGoldCMYK}\\[-12.6em]%
        \endgroup%
        \vfill\zsavepos{bottom@coverpage}%
        \clearpage%\setcounter{page}{0}
}{}
%------------------------------------------------------------------------------------------------------------------------------%
% Cover page for homework/assignment documents w/ name/date, course title/#/semester, instructor, and assignment details
%                                                 1 2 3 4 5 6
\DeclareDocumentEnvironment{assignment-coverpage}{m m m m m m}
{%\assignment-coverpage{course #}{course title}{semester}{instructor}{assignment Ch./problem #s}{author}
        \thispagestyle{empty}%
        \shadowcolor{BaylorGoldCMYK}%
        \begin{figure}[h!]
                \centering\savebox{\@coverpage@savebox@title@contents}{\shadowtext{\@title@font#1: #2}}
                \cshadowbox{\includegraphics[width=\wd\@coverpage@savebox@title@contents]{\@uni@logo}}
                \cshadowbox{\usebox{\@coverpage@savebox@title@contents}}
                \@section@sep{BaylorGreenCMYK}{BaylorGoldCMYK}\\[0.1em]
                \parbox{\textwidth}
                {
                    \title{}\centering\LARGE
                    \@coverpage@subtitle@font{#3, #4}\\[0.2em]
                    \@coverpage@description@font{#5}
                    \author{\@coverpage@author@font\shadowtext{#6}}
                    \date{\@coverpage@date@font\shadowtext{\today}}
                }
                \@section@sep{BaylorGreenCMYK}{BaylorGoldCMYK}
                \begin{minipage}{\textwidth}
                        \centering
                        \vspace{-11mm}\maketitle\vspace{-4mm}\fontcolor{Black}
                        \cshadowbox{\includegraphics[width=\wd\@coverpage@savebox@title@contents]{\@uni@dept@logo}}
                \end{minipage}\caption{}
        \end{figure}
        \vfill\zsavepos{bottom@coverpage}%\setcounter{page}{0}
}
{\thispagestyle{empty}}
%------------------------------------------------------------------------------------------------------------------------------%
%                                      1 2 3 4 5 6 7
\DeclareDocumentEnvironment{coverpage}{m m m m o o o}
{%
        \ifmylatex@coverpage
        \@enforce@onecolumn
        \doc@hypertargets{\@coverpage@target@name}\\[-0.75em]%
        \bookmark[keeplevel, dest=\bookmark@hyperaddress{\@coverpage@target@name}, rellevel=0]{Coverpage}%
                \ifstrequal{#1}{documentation}%
                {%
                        %\@set@coverpage@dimensions%
                        \begin{documentation-coverpage}%
                                {#3}{#4}{#2}%
                        \end{documentation-coverpage}%
                        %\@set@document@dimensions%
                }{}%
                \ifstrequal{#1}{assignment}%
                {%
                        %\@set@coverpage@dimensions%
                        \begin{assignment-coverpage}{#2}{#3}{#4}{#5}{#6}\end{assignment-coverpage}%
                        %\@set@document@dimensions%
                }{}%
        \fi%
        %\vfill\zsavepos{bottom@coverpage}%
}{}
%******************************************************************************************************************************%
%******************************************* General Purpose Document Environments ********************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
%                                           1 2               3                  4
%5                                                     6   7   8
\DeclareDocumentEnvironment{tcbenvironment}{s D<>{\textwidth} D''{tcbBlueScheme} D""{\BBBgradientbackground}
 D(){current-colframeborder,current-colinteriorborder} O{} d() d|| }
{%tcbenvironment[*]<box width>'color scheme'{style}[tcbset options](tcbseteverylayer options)
        \@set@current@tcb@colors{#3}%
        %\@let@macro@pair<@tcbenvironmentStyle@colframeborder,@tcbenvironmentStyle@colinteriorborder>=<#5>\relax%
        %\def\@tcbenvironmentStyle@colframeborder{}
        \def\@tcbenvironmentStyle@colinteriorborder{}
        \@parse@split@csv@args{def}%
                <@tcbenvironmentStyle@colframeborder,@tcbenvironmentStyle@colinteriorborder>%
                =<#5>%
        \tcbset%
        {
                tcbenvironmentStyle={\@tcb@default@boxrule@linewidth}%
                        {doubleinner}%
                        {\@tcbenvironmentStyle@colframeborder}%
                        {\@tcbenvironmentStyle@colinteriorborder}%
                        {#4},
                        width=#2
        }%
        \IfValueTF{#7}{\tcbsetforeverylayer{#7}}{}%
        \IfBooleanTF{#1}{\tcbset{sidebyside, segmentation empty, sidebyside gap=0mm, sidebyside align=bottom seam}}{}%
        \IfValueTF{#8}%
        {%
                \ifstrempty{#8}%
                        {\tcolorbox[title={}, #6]}
                        {\tcolorbox[title=\shadowText{#8}, #6]}
        }%
        {\tcolorbox[title={}, #6]}
        %\vspace{1mm}
        %\par\smallskip
}{\endtcolorbox\setlength{\parindent}{\@macro@length}}
%------------------------------------------------------------------------------------------------------------------------------%
        %                              1 2  3               4                  5                 6 7
\DeclareDocumentEnvironment{tcbparbox}{s t- D<>{\linewidth} D''{tcbBlueScheme} G{tcbparboxStyle} o d()}
{%tcbparbox[*]<box width>'color scheme'{style}[tcbset options](tcbseteverylayer options)
        \setlinespread{doc}%
        \tcbset{reset}%
        \@set@current@tcb@colors{#4}%
        \IfValueTF{#7}{\tcbsetforeverylayer{#7}}{}%
        \edef\enumposname{@tcbparbox@counter\Roman{@parbox@counter}}%
        %\zsavepos{@tcbparbox@counter\roman{@parbox@counter}}%
        \@zsavepos@unique!{@tcbparbox@counter}{@parbox@counter}{\@init@docsection@clearpage@threshold}%{Subsection}%
        \setlength\@tcb@enumbox@startpos{\@zsavepos@startpos}%
        %\begingroup\linespread@settings[context=doc]\endgroup
        \ifstrequal{#5}{tcbparboxStyle}
        {%
                \IfBooleanTF{#1}%
                {%
                        \IfValueTF{#6}%
                        {%
                                \tcolorbox%
                        [#5={\@tcb@default@boxrule@linewidth}{single}{current-colframeborder}{current-colinteriorborder},
                                width=#3, #6]%
                        }%
                        {%
                                \tcolorbox%
                        [#5={\@tcb@default@boxrule@linewidth}{single}{current-colframeborder}{current-colinteriorborder},
                                width=#3]%
                        }%
                }%
                {%
                        \IfValueTF{#6}%
                        {%
                                \tcolorbox%
                                [#5={\@frame@border@linewidth}{filled}{current-colframeborder}{current-colinteriorborder},
                                width=#3, #6]%
                        }%
                        {%
                                \tcolorbox%
                                [#5={\@frame@border@linewidth}{filled}{current-colframeborder}{current-colinteriorborder},
                                width=#3]%
                        }%
                }%
        }%
        {%
                \IfValueTF{#6}%
                        {\tcolorbox[#5, width=#3, #6]}%
                        {\tcolorbox[#5, width=#3]}%
        }%
        \IfBooleanTF{#2}{\setkeys[tcb]{paragraph}{indent=true}}{}%
        \bfmseries\normalsize*%
        \normalfont\bfmseries%
        %\stepcounter{@parbox@counter}
        %\bfseries\fontsize{10}{12}\selectfont
}{\endtcolorbox}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentEnvironment{mdfdefinitionbox}{s m D(){\DefinitionName}}
{%mdfdefinitionbox<*>{defbox type}
        \def\@defbox@title{#3}%
        \IfStrEqCase{#2}%
        {%
                {cornerbox}{\def\mdfdef@boxtype{mdfdef@cornerbox}}%
                {fullcornerbox}{\def\mdfdef@boxtype{mdfdef@fullcornerbox}}%
                {borderbox}{\def\mdfdef@boxtype{mdfdef@borderbox}}%
                {titlebox}{\def\mdfdef@boxtype{mdfdef@titlebox}}%
                {tabbox}{\def\mdfdef@boxtype{mdfdef@tabbox}}%
        }[\def\mdfdef@boxtype{mdfdef@tabbox}]%
        \expandafter\begin{\mdfdef@boxtype}%
}{\expandafter\end{\mdfdef@boxtype}}
%------------------------------------------------------------------------------------------------------------------------------%
%******************************************************************************************************************************%
%**************************************** Specialized/Specific Application Environments ***************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
%                                    1   2  3 4   5  6  7
\DeclareDocumentEnvironment{problem}{G{} t> o d() t. t' t+}
{%\problem[<tcb options>]< > parskip >[<ch. #>][<problem #>]<. (sub)problem indicator><' part indicator>
        \iftoggle{@major@section@shift}%
        {%
                \@docsection@yshift{Section}%
                \vspace{\@tikzheading@basesep}%
        }%
        {%
        %
        }%
        \togglefalse{@major@section@shift}
        \bookmarksetupnext{keeplevel}%
        \@macro@length=\parindent%
        \setlength{\parindent}{0em}%
        \stepcounter{@count@problem}%
        %\linespread@settings[context=problem]%
        \setlinespread{problem}%
        \@set@current@tcb@colors{problemColorset}
        \setcounter{@prob@bool@counter}{0}%
        \IfBooleanTF{#2}{\par\bigskip}{}%
        \IfBooleanTF{#5}{\addtocounter{@prob@bool@counter}{1}}{}%
        \IfBooleanTF{#6}{\addtocounter{@prob@bool@counter}{2}}{}%
        \IfBooleanTF{#7}{\addtocounter{@prob@bool@counter}{4}}{}%
        \ifnumcomp{\value{@prob@bool@counter}}{=}{0}%
        {%
                \setcounter{@subproblem@counter}{1}%
                \setcounter{@prob@part@counter}{1}%
                \IfValueTF{#3}{\setcounter{@chap@counter}{#3}}{}%
                \IfValueTF{#4}%
                        {\setcounter{@prob@counter}{#4}}%
                        {\refstepcounter{@prob@counter}}%
                \def\problem@type{problem}
        }{}%
        \ifnumcomp{\value{@prob@bool@counter}}{=}{1}%
                {\def\problem@type{subproblem}}{}%
        \ifnumcomp{\value{@prob@bool@counter}}{=}{2}%
                {\def\problem@type{problempart}}{}%
        \ifnumcomp{\value{@prob@bool@counter}}{=}{5}%
                {\def\problem@type{problempartsubproblem}}{}%
        \ifnumcomp{\value{@prob@bool@counter}}{=}{6}%
                {\def\problem@type{subproblempart}}{}%
        %\reversemarginpar\marginnote{hello}%
        \begin{tcolorbox}[problemStyle,#1]%
                %\reversemarginpar\marginnote{\hyperlink{coverpage}{\includegraphics[width=6.5mm]{{upload-button.png}}}}%%
                %\cftX@uparrow@link*{\problem@type}%[prob\arabic{@count@problem}]
                \bfmseries%
                \problem@type@command{\problem@type}%
}{\end{tcolorbox}\setlength{\parindent}{\@macro@length}}
%------------------------------------------------------------------------------------------------------------------------------%
% Problem environment box fitted to content instead of width of line, for short problem statements
\newenviron{shortprob}[1][]%
        {\tcbset{problemStyle,#1}}
        {\tcbox{\textbf{(\@print@before@increment{\alph}{@subproblem@counter})}\shortprobbody}}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentEnvironment{tcbsolutionverb}{s o}
{%
    \tcbsetforeverylayer{tcbsolutionStyle}%
    \IfValueTF{#2}{\tcbsetforeverylayer{#2}}{}%
    \begin{tcolorbox}%
}{\end{tcolorbox}}%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%                                       1  2                            3          4   5                       6   7
\DeclareDocumentEnvironment{tcblistbox}{s D<>{\@default@tcb@listbox@width} O{\arabic} d() D''{tcblistboxColorset} d"" d||}
{%tcblistbox[- gold borders]<env width>[number format](set counter value)'colorset'"fill color"|title|
        \let\tcbeqnlistboxentrynumbering=#3
        \IfValueTF{#4}
                {\setcounter{@tcb@eqn@list@counter}{#4}}
                {\setcounter{@tcb@eqn@list@counter}{1}}
        \@set@current@tcb@colors{#5}
        \IfValueTF{#6}
                {\@set@tcb@listbox@fill@colors{#6}}{}
        \IfBooleanTF{#1}
                {\tcbsetforeverylayer{tcblistboxStyle, width=#2, colframe=stdyellow, colbacktitle=current-colfill}}%
                {\tcbsetforeverylayer{tcblistboxStyle, width=#2}}%
        \IfValueTF{#7}
                {\tcolorbox[title={#7}]}
                {\tcolorbox}
}{\endtcolorbox}
%------------------------------------------------------------------------------------------------------------------------------%
%                                         1   2 3 4          5   6
\DeclareDocumentCommand{\tcblistboxentry}{d() m m O{\arabic} d() O{}}
{%\tcblistboxentry(set count){text}{math}[counter format](counter prepend text)[count append text]
        \let\tcbeqnlistboxentrynumbering=#4%
        \IfValueTF{#1}{\setcounter{@tcb@eqn@list@counter}{#1}}{}%
        \setlength{\@macro@height}{\heightof{$\displaystyle #3$}}%
        \tcbsubtitle%
        [
                before skip = \dimexpr\@macro@height - 8.5mm\relax,
                after skip = \dimexpr\@macro@height /3 - 3.5mm\relax,
                colback=tcblistboxColorset-colbacksubtitle, toptitle=-3mm, bottomtitle=-3mm,
                top=-0.25mm, bottom=-0.25mm
        ]%
        {%
                \IfValueTF{#5}%
                        {\tcblistboxentrylabel{#5}\quad #2}%
                        {\tcblistboxentrylabel*{@tcb@eqn@list@counter}\quad #2}%
        }%
        \bfmseries%
        \begin{alignat*}{2}%
                #3
        \end{alignat*}
        \addtocounter{@tcb@eqn@list@counter}{1}%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                              1 2         3            4            5 6        7
\DeclareDocumentCommand{\tcblistboxentrylabel}{s O{circle} D(){\arabic} D''{current} m D(){6mm} D<>{0.5pt}}
{%\tcblistboxentrylabel[*<counter on>][shape](counter print format)(color style){character/text or counter}(min size)<inner sep>
        \@set@current@tcb@colors{#4}
        %\fillednumshape[*<counter on>][shape](counter print format)(color style){character/text or counter}(min size)<inner sep>
        \IfBooleanTF{#1}%
                {\fillednumshape*[#2](#3)'#4'{#5}(#6)<#7>}%
                {\fillednumshape[#2](#3)'#4'{#5}(#6)<#7>}%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                          1 2  3          4   5                          6   7
\DeclareDocumentEnvironment{tcbeqnlistbox}{s t- O{\arabic} d() D''{tcbeqnlistboxColorset} d"" d||}
{%tcbeqnlistbox[* no Eqn #s][- colorset->fill colors][number format](set counter value)'color set'"fill color"|title|
        \@set@current@tcb@colors{#5}%tcbBlueGreenScheme, tcbForestGreenScheme, tcbGreenScheme,tcbNavyPurpleScheme
        \let\tcbeqnlistboxentrynumbering=#3
        \tcbsetforeverylayer{tcbeqnlistboxStyle}
        \IfValueTF{#4}
                {\setcounter{@tcb@eqn@list@counter}{#4}}
                {\setcounter{@tcb@eqn@list@counter}{1}}
        \IfValueTF{#6}
                {\@set@tcb@listbox@fill@colors{#6}}{}
        \IfBooleanTF{#2}{}{\tcbsetforeverylayer{colframe=stdyellow, colbacktitle=current-colfill}}
        \IfValueTF{#7}
                {\tcbsetforeverylayer{title={#7}}}
                {}
        \IfBooleanTF{#1}
                {\vspace{-5mm}\empheq[box=\tcboxmath]{alignat*=2}}
                {\vspace{-5mm}\empheq[box=\tcboxmath]{alignat=2}}
}{\endempheq}
%------------------------------------------------------------------------------------------------------------------------------%
%                                            1 2   3         4 5 6 7                     8   9
\DeclareDocumentCommand{\tcbeqnlistboxentry}{s d() O{arabic} m m s O{tcbeqnlistboxStyle} d() O{}}
{%\printcounter{\tcbeqnlistboxentrynumbering}{@tcb@eqn@list@counter}
        \IfValueTF{#2}%
                {\setcounter{@tcb@eqn@list@counter}{#2}}%
                {}%
        \IfBooleanTF{#1}
        {%
                \hspace{0pt}\unskip%
                \text{\normalsize*\bfseries\tcblistboxentrylabel*{@tcb@eqn@list@counter}}%
                &&\qquad\boldsymbol{#4}%
                &\boldsymbol{#5}%
        }%
        {%
                \IfValueTF{#8}%
                {%
                        \hspace{0pt}\unskip%
                        \text{\normalsize*\bfseries\tcblistboxentrylabel{#8#3{@tcb@eqn@list@counter}#9}}%
                        &&\qquad&\boldsymbol{#4#5}%
                }%
                {%
                        \hspace{0pt}\unskip%
                        \text{\normalsize*\bfseries\tcblistboxentrylabel{\printcounter{#3}{@tcb@eqn@list@counter}}}%
                        &&\qquad&\boldsymbol{#4#5}%
                }%
        }%
        \addtocounter{@tcb@eqn@list@counter}{1}%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentEnvironment{tcbfigbox}{r<> O{}}
{%
        %\vspace{\@tikzheading@titlenode@height}
        \par\smallskip%
        \setlength\@tcb@figbox@width{#1}%
        \setlength\@tcb@figbox@skip{\dimexpr(\columnwidth- \@tcb@figbox@width + \hoffset) / 4\relax}%
        \@set@current@tcb@colors{tcbfigboxColorset}%
        \ifstrempty{#2}%
                {\def\@title@sep{}}%
                {\def\@title@sep{\@tcb@title@sep}}%
        \stepcounter{figbox}%
        \cftfigbox@bookmark%
        \figbox{\@title@sep#2}%
}{\endfigbox}
%}{\endtcolorbox}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\functionarg}{m o}
{%\functionarg{option}[option argument]
        \IfValueTF{#2}
                {{[--#1 \caratenclosed{#2}]}}
                {{[--#1]}}
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                        1 2         3            4                  5 6 7 8                               9
\DeclareDocumentCommand{\functionargdef}{s O{circle} D(){\arabic} D''{tcbBlueScheme} m m o D<>{\@filledenumshape@min@size,\@filledenumshape@inner@sep}}
{%\tcblistboxentrylabel[*<counter on>][shape](counter print format)'color style'{character/text or counter}(min size)<inner sep>
        %\@set@length@pair<\@filledenumshape@min@size,\@filledenumshape@inner@sep>=<5mm,0.25pt>%
        \@parse@split@csv@args{setlength}%
        	<\@filledenumshape@min@size,\@filledenumshape@inner@sep>%
        	=<#8>%
        %\@parse@split@csv@args{setlength}<\@filledenumshape@min@size>=<5mm>
        %\@parse@split@csv@args{setlength}<\@filledenumshape@inner@sep>=<0.25pt>
        \@set@current@tcb@colors{\@current@tcb@coloring}
        \IfValueTF{#7}{\setcounter{@tcb@functions@counter}{#7}}{}
        \IfBooleanTF{#1}
        {%
                \@tcb@functions@arg@font%
                \hspace{\@function@entry@label@hskip}%
                \tcblistboxentrylabel*[#2](#3)%
                        '\@current@tcb@coloring'%
                        {@tcb@functions@counter}%
                        (\@filledenumshape@min@size)%
                        <\@filledenumshape@inner@sep>%
                &\hspace{\@current@listbox@column@sep}%
                \parbox[c]{\@current@listbox@second@column}%
                {\@tcb@functions@text@font\textmathdash\space#6}\\[\@function@argdef@crskip]%
        }
        {%
                \@tcb@functions@arg@font%
                \hspace{\@function@entry@label@hskip}%
                \tcblistboxentrylabel[#2](#3)%
                        '\@current@tcb@coloring'%
                        {#5}%
                        (\@filledenumshape@min@size)%
                        <\@filledenumshape@inner@sep>%
                &\hspace{\@current@listbox@column@sep}%
                \parbox[c]{\@current@listbox@second@column}%
                {\@tcb@functions@text@font\textmathdash\space#6}\\[\@function@argdef@crskip]%
        }%
}
%------------------------------------------------------------------------------------------------------------------------------%
%1  2      3                           4                 5                            6 7                             8                                           8                                    9
\DeclareDocumentCommand{\tcbfunctiondesc}
{s D''{t!} O{\usefont{T1}{cmr}{bx}{n}} D(){Description:} D<>{\usefont{T1}{cmr}{m}{n}} m D<>{\@current@listbox@first@column} D<>{\@current@listbox@second@column} O{0.6em}}
{%\tcbfunctiondesc[text formatting]{lst col label}(last col text) <1st col width><last col width>
	\IfBooleanTF{#1}%
                {\gdef\@description@prefix{}}%
                {\gdef\@description@prefix{\textmathdash\space}}%
        \parbox[#2]{#7}{\@tcb@functions@header@font#4}%
        &%
        \hspace{\@current@listbox@column@sep}%
        \parbox[#2]{#8}{\@tcb@functions@text@font\@description@prefix#6}\\[\@function@desc@crskip]
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                        1      2                                 3                4                         5                                    6                                     7
\DeclareDocumentCommand{\tcbfunctionsep}{D''{t} O{\large\usefont{T1}{cmr}{bx}{n}} G{\ul{Options}:} D(){\ul{Option Details}:} D<>{\@current@listbox@first@column} D<>{\@current@listbox@second@column} O{1.2em}}
{%\tcbfunctionsep[<text formatting>]{<lst col label>}(<last col label) <<1st col width>><<last col width>>
        \setlength{\@macro@width}{\widthof{#3}}
        \setlength{\@function@entry@label@hskip}{\dimexpr\@macro@width / 2\relax}
        \parbox[#1]{#5}{\@tcb@functions@header@font#3}
        &\hspace{\@current@listbox@column@sep}\parbox[#1]{#6}{\@tcb@functions@header@font#4}\\[\@function@sep@crskip]%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbfuncdefboxTitle}{s m o}%
{%
        \IfValueTF{#3}%
        {%
                \@the@hypertitle%
                \IfBooleanTF{#1}{\\[0.5em]\Large\shadowText*:\Large:[black]{USAGE\space:\space}}{\space}%
                \shadowText*:\large:[black]{#3}%
        }{\@the@hypertitle}%
        \vspace{1mm}%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                       1 2               3                  4                  5 6
\DeclareDocumentEnvironment{tcbdiagram}{s D<>{\linewidth} D''{tcbBlueScheme} O{tcbdiagramStyle} o d()}
{%\tcbdiagram[*]<box width>'color scheme'{style}[title][tcbset options](tcbseteverylayer options)
        \IfValueTF{#5}{\tcbset{#5}}{}%
        \IfValueTF{#6}{\tcbsetforeverylayer{#6}}{}%
        \tcolorbox[#4]%
        \begin{tikzpicture}%
}{\end{tikzpicture}\endtcolorbox}%
%------------------------------------------------------------------------------------------------------------------------------%
%******************************************************************************************************************************%
%************************************************ Currently in development ****************************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
%******************************************************************************************************************************%
%*********************************************** End of 'my-macros.sty' package ***********************************************%
%******************************************************************************************************************************%
% Change @ character back to \catcode'@=12, i.e. a non letter character, so it can be used in macro names/definitions
\makeatother
\endinput
%%------------------------------------------------------------------------------------------------------------------------------%
