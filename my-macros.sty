%******************************************************************************************************************************%
%****************************************************** `my-macros.sty' *******************************************************%
%******************************************************************************************************************************%
% Provides definitions of standardized/universal document type environments used in place of the standard 'document' environment (e.g. 'homework', 'documentation', etc.), with options to include a coverpage and automatically configure document dimensions/properties/content, as well as the package macros/commands/environments/etc.
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Define provided package name and LaTeX/package dependencies ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
\NeedsTeXFormat{LaTeX2e}[2005/12/01]
\ProvidesPackage{my-macros}
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Package options and corresponding Boolean variables ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
\DeclareOption*{\PackageWarning{my-macros}{Unknown \CurrentOption}}
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Processing of package options ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
\ProcessOptions\relax
%------------------------------------------------------------------------------------------------------------------------------%
\makeatletter                           % Change @ to standard letter, \catcode'@=11 so it can be used in macro names/definition
%\catcode`\!=12
%\catcode`|=12
%------------------------------------------------------------------------------------------------------------------------------%
%******************************************************************************************************************************%
%******************************************************** Package Body ********************************************************%
%******************************************************************************************************************************%

%------------------------------------------------------------------------------------------------------------------------------%
%----------------------------------------------------- Command Definitions ----------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@set@document@dimensions}{}
{
        %\setlength{\headheight}{\dimexpr (\@header@image@height)*5/4\relax}
        \ifmylatex@landscape
                %landscape mode
                \setlength{\textwidth}{\@document@landscape@textwidth}
                \setlength{\hoffset}{\@document@landscape@hoffset}
                \setlength{\textheight}{\@document@landscape@textheight}
                \setlength{\voffset}{\@document@landscape@voffset}
                \setlength{\headsep}{\@document@landscape@headsep}
                \setlength{\topmargin}{\@document@landscape@topmargin}
                \setlength{\footskip}{\@document@landscape@footskip}
                \setlength{\headheight}{\@document@landscape@headheight}
                \setlength{\linewidth}{\@document@landscape@textwidth}
                %\setlength{\parskip}{-1em}
                %\setlength{\parsep}{-1em}
                %\setlength{\baselineskip}{-1em}
        \else
        % Article mode
                \setlength{\textwidth}{\@document@textwidth}
                \setlength{\hoffset}{\@document@hoffset}
                \setlength{\textheight}{\@document@textheight}
                \setlength{\voffset}{\@document@voffset}
                \setlength{\headsep}{\@document@headsep}
                \setlength{\topmargin}{\@document@topmargin}
                \setlength{\footskip}{\@document@footskip}
                \setlength{\headheight}{\@document@headheight}
                \setlength{\linewidth}{\@document@landscape@textwidth}
                %\setlength{\parskip}{-1em}
                %\setlength{\parsep}{-1em}
                %\setlength{\baselineskip}{-1em}
        \fi
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@set@coverpage@dimensions}{}
{
        %\setlength{\headheight}{150pt}
        \ifmylatex@landscape
                %landscape mode
                \setlength{\textwidth}{\@coverpage@landscape@textwidth}
                \setlength{\hoffset}{\@coverpage@landscape@hoffset}
                \setlength{\textheight}{\@coverpage@landscape@textheight}
                \setlength{\voffset}{\@coverpage@landscape@voffset}
                \setlength{\topmargin}{\@coverpage@landscape@topmargin}
                \setlength{\headsep}{\@coverpage@landscape@headsep}
                \setlength{\footskip}{\@coverpage@landscape@footskip}
                \setlength{\headheight}{\@coverpage@landscape@headheight}
        \else
        % Article mode
                \setlength{\textwidth}{\@coverpage@textwidth}
                \setlength{\hoffset}{\@coverpage@hoffset}
                \setlength{\textheight}{\@coverpage@textheight}
                \setlength{\voffset}{\@coverpage@voffset}
                \setlength{\topmargin}{\@coverpage@topmargin}
                \setlength{\headsep}{\@coverpage@headsep}
                \setlength{\footskip}{\@coverpage@footskip}
                \setlength{\headheight}{\@coverpage@headheight}
        \fi
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                             1 2 3   4   5                                 6        7
\DeclareDocumentCommand{\@premeasure@savebox}{s o d<> m o}
{%
        \IfValueTF{#2}{\expandafter\let\csname#2@savebox\endcsname\@premeasured@savebox}{}%
        \IfValueTF{#3}%
        {%
                \expandafter\let\csname#3@width\endcsname\@premeasured@width%
                \expandafter\let\csname#3@height\endcsname\@premeasured@height%
                \expandafter\let\csname#3@depth\endcsname\@premeasured@depth%
        }{}%
        \savebox{\@premeasured@savebox}{#4}%
        \setlength\@premeasured@savebox@width{\wd\@premeasured@savebox}%
        \setlength\@premeasured@savebox@height{\ht\@premeasured@savebox}%
        \setlength\@premeasured@savebox@depth{\dp\@premeasured@savebox}%
        \IfBooleanTF{#1}{}{\usebox{\@premeasured@savebox}}%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\printTrailingEnvCode}{s m}
{%
        %\underline{Trailing Environment Code for \texttt{#2}}\\
        \underline%
        {%
                Code Executed After %
                \texttt%
                {%
                        \textcolor{blue}{\textbackslash end\{}%
                        \textcolor{green}{#2}%
                        \textcolor{blue}{\}}%
                } %
                Closure of \textcolor{green}{\texttt{#2}} Environment%
        }\\[0.5em]
        Content Generated Around ``a'':
        \AfterEndEnvironment{#2}{\qq}%
        \IfBooleanTF{#1}%
                {\ensuremath{\begin{#2}a\end{#2}\qq}}%
                {\begin{#2}a\end{#2}\qq}%
\\
}
%------------------------------------------------------------------------------------------------------------------------------%
% Calculate length of alignat environment
\DeclareDocumentCommand{\settowidthofalign}{m m}
{%
    \setbox\z@=\vbox
    {
        \begin{alignat*}{2}
            #2
            \ifmeasuring@\else\global\let\got@maxcolwd\maxcolumn@widths\fi
        \end{alignat*}
    }%
    \begingroup
    \def\or{+}\edef\x{\endgroup#1=\dimexpr\got@maxcolwd\relax}\x
}
%------------------------------------------------------------------------------------------------------------------------------%
% Insert a blank page, with (default) or without (starred version) increasing the page #
\DeclareDocumentCommand{\blankpage}{s}
{
    \newpage%
    \thispagestyle{empty}%
    \mbox{}%
    \newpage%
    \IfBooleanTF{#1}{\addtocounter{page}{-1}}{}
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\pagelink}{s m O{}}
{
        \begingroup%
                \pgfmathsetmacro{\@destination@pagenum}{#2}
                \pgfmathparse{ifthenelse(\@destination@pagenum==1, 1, 0)}
                \if\pgfmathresult 1\relax
                        \hyperlink{\@page@one@target@name}{#3}%
                \else
                        \hyperlink{\@page@n@target@name#2}{#3}%
                \fi
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\MYhref}[3][blue]{\href{#2}{\fontcolor{#1}{#3}}}%
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbhypertarget}{o m m}
{%
        \IfValueTF{#1}%
                {\hypertarget{#2}{\fontcolor{#1}#3}}%
                {\hypertarget{#2}{#3}}%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbhyperlink}{o m m}
{%
        \IfValueTF{#1}
                {\hyperlink{#2}{\fontcolor{#1}#3}}%
                {\hyperlink{#2}{#3}}%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@autohyperlink}{m m m}
{%
        \begingroup%
                \ifcsstrequal{#1}{Chapter}{\unskip\ignorespaces\docsectionX@hyperlink[0pt]{#1}{#2}{#3}}{}%
                \ifcsstrequal{#1}{Section}{\unskip\ignorespaces\docsectionX@hyperlink[0pt]{#1}{#2}{#3}}{}%
                \ifcsstrequal{#1}{Subsection}{\unskip\ignorespaces\docsectionX@hyperlink[0pt]{#1}{#2}{#3}}{}%
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\autotcbref}{D(){figure} O{1}}
{%
    \ifstrequal{#1}{figure}{\autoref{\reffig{#2}}}{}%
    \ifstrequal{#1}{equation}{\autoref\refeq{#2}}{}%
    \ifstrequal{#1}{listing}{\autoref{\reflst{#2}}}{}
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\caratenclosed}{s m}
{%\shadowText<title font>'color style'{title text}
        \IfBooleanTF{#1}%
                {$<$\emph{#2}$>$}%
                {$<$#2$>$}%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@section@sep}{m m}
{       %
        \shadowoffset{0.5pt}%
        \begingroup%
        %\par\medskip
        %\edef\f@size{11}\selectfont
        \edef\f@size{\@rule@fontsize}\selectfont
        \centering\minibox%
        {
                \normalsize\fontcolor{#1}\rule{\textwidth}{1pt}\\[\dimexpr-1em-2.5pt\relax]
                \normalsize\fontcolor{#2}\rule{\textwidth}{1pt}\\[\dimexpr-1em-2.5pt\relax]
                \normalsize\fontcolor{#2}\rule{\textwidth}{1pt}\\[\dimexpr-1em-2.5pt\relax]
                \normalsize\fontcolor{#1}\rule{\textwidth}{1pt}\par\smallskip%\\%\par\medskip%\parnoskip\medskip
        }%
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\baylorsection}{}{\@section@sep{BaylorGreenCMYK}{BaylorGoldCMYK}}
%------------------------------------------------------------------------------------------------------------------------------%
%                                       1 2  3                4 5                  6
\DeclareDocumentCommand{\sectionheader}{s t! O{\tcbsectionheaderfont} m O{BaylorGreenCMYK} O{BaylorGoldCMYK}}
{%
        \begingroup%
        \parindent=\@par@indent
        \setlength{\parindent}{0pt}
        \settowidth\@macro@width{\shadowtext{#3{#4}}}%
        \shadowcolor{#6}\color{#5}\par\vspace{-\parskip}%
        \unskip\ignorespaces\parbox{\textwidth}%
        {%
                \unskip\ignorespaces\@section@sep{#5}{#6}\unskip\ignorespaces%
                \IfBooleanTF{#2}%
                {%
                        \\\begin{center}%
                                \pgfmathparse{ifthenelse(\@macro@width>= \linewidth, 1, 0)}%
                                \if\pgfmathresult 1\relax%
                                        \vspace{-12.5mm}%
                                        \doublespacing%
                                        \shadowtext{\parbox{\textwidth}{\raggedright#3{#4}}}%
                                        \vspace{1mm}%
                                \else%
                                        \vspace{-6mm}%
                                        \shadowtext{\raggedright#3{#4}}%
                                        \vspace{-4mm}%
                                \fi%
                        \end{center}%
                }%
                {%
                                \\\begin{center}%
                                \pgfmathparse{ifthenelse(\@macro@width>= \linewidth, 1, 0)}%
                                \if\pgfmathresult 1\relax%
                                        \vspace{-12mm}%
                                        \doublespacing%
                                        \shadowtext{\parbox{\textwidth}{\raggedright#3{#4}}}%
                                        \vspace{-0mm}%
                              \else%
                                    \vspace{-13mm}%
                                        \shadowtext{\parbox{\textwidth}{\raggedright#3{#4}}}%
                                        \vspace{-3mm}%
                                \fi%
                        \end{center}%
                }%
                \@section@sep{#5}{#6}%
        }%
        \endgroup\parnoskip\unskip\ignorespaces%
        \parindent=\@par@indent%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\legendentry}{s O{documentation-file} m m}
{
        \begingroup%
                \bfseries\fontcolor{#2}{\textbf{#3}} \fontcolor{Black}: #4%
                \IfBooleanTF{#1}{\parnoskip}%
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\fileentry}{s O{documentation-file} m m}
{
        \begingroup%
                \fontcolor{#2}{\textbf{\textit{#3}}} \fontcolor{Black}: #4%
                \IfBooleanTF{#1}{\parnoskip}%
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\docentry}{s t! O{file} m}
{%
        \begingroup%
        \expandafter\def\expandafter\@text@input\expandafter{#4}%
        \IfBooleanTF{#1}%
                {\def\@text@entry{``\@text@input''}}%
                {\def\@text@entry{\@text@input}}%
        \ifstrequal{#3}{file}{\def\@Atext@entry{\coloredtext*!{documentation-#3}{\textit{\@text@entry}}}}{}%
        \ifstrequal{#3}{fileset}{\def\@Atext@entry{\coloredtext*!{documentation-#3}{\textit{\@text@entry}}}}{}%
        \ifstrequal{#3}{constdir}{\def\@Atext@entry{\coloredtext*{documentation-#3}{\dirsep\@text@entry}}}{}%
        \ifstrequal{#3}{dir}{\def\@Atext@entry{\coloredtext*{documentation-#3}{\dirsep\@text@entry}}}{}%
        \ifstrequal{#3}{subcategory}{\def\@Atext@entry{\coloredtext*!{documentation-#3}{\textit{\@text@entry}}}}{}%
        \ifstrequal{#3}{gitrepo}{\def\@Atext@entry{\coloredtext*{documentation-#3}{\dirsep\@text@entry}}}{}%
        \ifstrequal{#3}{gitaccount}{\def\@Atext@entry{\coloredtext*{documentation-#3}{\dirsep\@text@entry}}}{}%
        \ifstrequal{#3}{gitbranch}{\def\@Atext@entry{\coloredtext*{documentation-#3}{\texttt{\@text@entry}}}}{}%
        \ifstrequal{#3}{script}{\def\@Atext@entry{\coloredtext*!{documentation-#3}{\textup\@text@entry}}}{}%
        \IfBooleanTF{#2}%
                {\bfseries``\@Atext@entry''\@end@macro@spacing}%
                {\bfseries\@Atext@entry\@end@macro@spacing}%
        \endgroup%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                        1 2         3            4            5   6 7        8
\DeclareDocumentCommand{\fillednumshape}{s O{circle} D(){\arabic} D''{current} d() m D(){5mm} D<>{0.5pt}}
{%\fillednumshape[*<counter on>][shape](counter print format){color style}{character/text or counter}(min size)<inner sep>
        \@set@current@tcb@colors{#4}
        \IfBooleanTF{#1}
                {\edef\shapecontents{#3{#6}}}
                {\edef\shapecontents{#6}}
        \IfValueTF{#5}
                {\def\@line@color{#5}}
                {\def\@line@color{#4-colfillborder}}
        \tikz[baseline=(char.base)]%
        {%
                \node[shape=#2, font=\small, fill=fillednumshape-colfill, draw=\@line@color, thick, minimum size=#7, inner sep=#8, align=flush center] (char) {\textcolor{fillednumshape-colfilltext}{\hspace{0pt}\bfseries\shapecontents}};%
        }%
}
%------------------------------------------------------------------------------------------------------------------------------%
% Boxed equation maintaining alignment w/ previous equations that use '&' alignment character
\DeclareDocumentCommand{\@format@counters}{s o}
{%\tcbequation{<LHS>}{<RHS>}[</tcb/.style>]
        \renewcommand{\thesection}%
        {%
                \ifnum\c@chapter<1 \@arabic\c@section
                \else \thechapter.\@arabic\c@section
                \fi
        }
        %\counterwithin{@prob@counter}{@chap@counter}
        \renewcommand{\the@prob@counter}{%
                \ifnum\c@@chap@counter<1 \@arabic\c@@prob@counter
                \else \the@chap@counter.\@arabic\c@@prob@counter
                \fi
        }
        %\renewcommand{\thePart}{\Roman{Part}}
        \renewcommand{\theTopic}{%
                \ifnum\c@Part<1
                        \@arabic\c@Topic
                \else
                        \thePart-\@arabic\c@Topic
                        %\addtolength{\cftTopicnumwidth}{2.0em}
                \fi
        }
        %\addtolength{\cftPartnumwidth}{1.75em}
        %\addtolength{\cftTopicnumwidth}{1.75em}
        \addtolength{\cftPartnumwidth}{\widthof{\thePart} + 0.75em}
        \addtolength{\cftTopicnumwidth}{\widthof{\theTopic} + 1.0em}
}%\preto{\IBP@math@content}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\formattheequation}{s m o}
{%\formattheequation{<LHS>}{<RHS>}[</tcb/.style>]
        %\renewcommand{\theequation}{\Roman{Part} \arabic{Chapter}.\arabic{Section}.\arabic{equation}}
        %\renewcommand{\theequation}{\Roman{Topic} \arabic{Chapter}.\arabic{Section}.\arabic{equation}}
        \IfStrEqCase{#2}%
        {%
                {equation}{\renewcommand{\theequation}{\arabic{equation}}}%
                {problems}%
                {%
                        %\ifnumcomp{\commandkey{underlined}}{=}{1}%
                        %        {\def\@the@styled@title{\underline{\@the@title}}}%
                        %        {\def\@the@styled@title{\@the@title}}%
                        %\renewcommand{\theequation}{\arabic{@chap@counter}.\arabic{@prob@counter}.\arabic{equation}}%
                        \renewcommand{\theequation}{\the@prob@counter-\arabic{equation}}%
                        %\counterwithin{@prob@counter}{@chap@counter}
                        %\renewcommand{\thesection}{%
%                                \ifnum\c@@chap@counter<1 \@arabic\c@section
%                                \else \thechapter.\@arabic\c@section
%                                \fi
%                        }
                        %\preto{\theequation}{\the@prob@counter.}
                }%
                {sections}%
                {%
                        \renewcommand{\theequation}{\thesection.\arabic{equation}}%
                }%
        }%
        []%
        \IfValueTF{#3}{\renewcommand{\theequation}{#3}}{}
        %\counterwithout{equation}{chapter}
        %\renewcommand{\theequation}{\arabic{Chapter}.\arabic{Section}.\arabic{equation}}
        %\renewcommand{\theequation}{\arabic{@chap@counter}.\arabic{@prob@counter}.\arabic{equation}}
        %\renewcommand{\theequation}{\arabic{equation}}
}%\preto{\IBP@math@content}

%------------------------------------------------------------------------------------------------------------------------------%
% Boxed equation maintaining alignment w/ previous equations that use '&' alignment character
%                                     1 2  3 4 5                   6
\DeclareDocumentCommand{\tcbequation}{s t! m m O{tcbequationStyle} d''}
{%\tcbequation{<LHS>}{<RHS>}[</tcb/.style>]
    &
    \begingroup
        \settowidth\@macro@width{$\displaystyle #3$}
        \addtolength\@macro@width{4\fboxsep+4\fboxrule}
        \hspace{-\@macro@width}
    \endgroup
    \IfValueTF{#6}
            {\@set@current@tcb@colors{#6}}
            {
                \IfBooleanTF{#1}
                        {\@set@current@tcb@colors{tcbequationColorset}}
                        {\@set@current@tcb@colors{tcbsolutionColorset}}
            }
    %\tcbsetforeverylayer{#5}%
    \tcboxmath[#5]{\boldsymbol{#3 #4}}
    \\\notag
    %\IfBooleanTF{#2}{\tcbsetforeverylayer{before skip=0mm}}{}
}
\DeclareDocumentCommand \foo { m }
{
        \string\noexpand#1\\
        \noexpand#1\\
        =\@identity{#1}=\\
        =\expandafter\firstoftwo\@identity{#1}=\\
        \firsttwoofthree#1\\
        \thirdofthree#1\\
        \expandafter\firsttwoofthree#1\\
        \expandafter\thirdofthree#1\\
        %\identityCMD#1\\
        \@identity{\firstoftwo#1}\\
        \secondoftwo#1\\
        \def\@argone{\@identity\firstoftwo#1}\\
        \def\@argtwo{\@identity\secondoftwo#1}\\
        argone=\@argone\\
        argtwo=\@argtwo\\
        \def\@argone{\expandafter\@identity\firstoftwo#1}\\
        \def\@argtwo{\expandafter\@identity\secondoftwo#1}\\
        argone=\@argone\\
        argtwo=\@argtwo\\
        \expandafter\@identity\expandafter\@identity\firstoftwo#1
}
%------------------------------------------------------------------------------------------------------------------------------%
\def\IfDefEqCase@case#1%
{
        \def\@argone{\firstoftwo#1}
        \def\@argtwo{\secondoftwo#1}
        %argone=\@argone\\
        %argtwo=\@argtwo\\
        \ifcsequal{\@defequal@cscheck}{\@argone}
        {\secondoftwo#1}{}
}
\DeclareDocumentCommand{\IfDefEqCase}{m >{\SplitList{;}} m } %
{
        \xdef\@defequal@cscheck{#1}
        \ProcessList {#2}{\IfDefEqCase@case}
}
%------------------------------------------------------------------------------------------------------------------------------%
\def\IfCSEqCase@case#1%
{
        \def\@argone{\firstoftwo#1}
        \def\@argtwo{\secondoftwo#1}
        %argone=\@argone\\
        %argtwo=\@argtwo\\
        \ifcsequal{\@defequal@cscheck}{\@argone}
        {\secondoftwo#1}{}
}
\DeclareDocumentCommand{\IfCSEqCase}{m >{\SplitList{;}} m } %
{
        %\string#2\\
        %\@expandtwoargs\unexpanded{#2}\\
        %\string{#2}\\
        %\noexpand#2\\
%        #2\\
%        \@gobbletwo#2\\
%        \@gobbletwo\noexpand#2\\
        \xdef\@defequal@cscheck{#1}
        \ProcessList {#2}{\IfCSEqCase@case}
}
\DeclareDocumentCommand{\IfCSEqCaseTesting}{m } %
{
        \@gobbletwo\noexpand#1\\
        \@firstofone#1\\
        \def\@this@list{{\@gobble#1}}
	\@firstofone\@this@list\\
        %\xdef\@defequal@cscheck{#1}
        %a\ProcessList {#1}{#1}
}
%------------------------------------------------------------------------------------------------------------------------------%
\define@choicekey[tcb]{tikzUL}{linecap}{rect,round,butt}[rect]{\def\@tikzUL@line@cap{#1}}
%------------------------------------------------------------------------------------------------------------------------------%
%                                1   2   3   4       5
\DeclareDocumentCommand{\tikzUL}{d<> d<> d() O{rect} m}
{%
	\IfValueTF{#1}{\setlength\@tikzUL@thickness{#1}}{}%
        \IfValueTF{#2}{\setlength\@tikzUL@depth{#2}}{}%
        \IfValueTF{#3}{\def\@tikzUL@color{#3}}{}%
	%\@set@current@tcb@colors{default}%
      	\setkeys[tcb]{tikzUL}{linecap=#4}
      -\the\font-
	%\setkeys[tcb]{tikzUL}{linecap=butt}
        \tikz%
	[
		baseline=(text.base),
	    	node font=\the\font,
	    	inner sep=0pt,
	    	line width=\@tikzUL@thickness,
	    	line cap=\@tikzUL@line@cap, % rect, butt, also decorations, ...
	]
	\draw node (text) {\@use@curr@font@color#5}
		(text.south east) ++(0.0pt, -\@tikzUL@depth) coordinate (tmp)
	    	-- (text.south west |- tmp);
}
%------------------------------------------------------------------------------------------------------------------------------%
\newkeycommand\linespread@settings
[enum context={doc,IBP,PLD,problem,solution,figbox,listing,Terminal,Matlab,code}, bool restore=false, arrayrulewidth=,baselinestretch=,arraystretch=]%
{%
        %\begingroup
        \xdef\@context@name{\commandkey{context}}
        \setlength\arrayrulewidth{\csuse{@\@context@name @arrayrulewidth}}%
        \renewcommand\baselinestretch{\csuse{@\@context@name @baselinestretch}}%
        \renewcommand\arraystretch{\csuse{@\@context@name @arraystretch}}%
        \ifnumcomp{\commandkey{restore}}{=}{1}
        {
        	\setlength\arrayrulewidth{\@doc@arrayrulewidth}%
	        \renewcommand\baselinestretch{\@doc@baselinestretch}%
	        \renewcommand\arraystretch{\@doc@arraystretch}%	
        }{}%
        \ifcommandkey{arrayrulewidth}{\expandafter\setlength\arrayrulewidth{\commandkey{arrayrulewidth}}}{}%
        \ifcommandkey{baselinestretch}{\expandafter\renewcommand\expandafter\baselinestretch\expandafter{\commandkey{baselinestretch}}}{}%
        \ifcommandkey{arraystretch}{\renewcommand\arraystretch{\commandkey{arraystretch}}}{}%
        %\endgroup
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbfigboxlist}{>{\SplitList{\\}} m O{\@tcbfigbox@width}}
{%
        \begin{tabular}[#2]{c}%
                \ProcessList{#1}{\tcbfigboxrow}%
        \end{tabular}\xspace%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbfigboxrow}{>{\SplitList{|}} m}
{%
        %\setcounter{@num@tcbfigures}{0}\ignorespaces%
        \resetcounter{@num@tcbfigures}\ignorespaces%
        \ProcessList{#1}{\@increment@tcbfigure@counter}%
        \setlength{\@tcb@figboxfigure@width}{\dimexpr\@tcbfigbox@width/\value{@num@tcbfigures}\relax}%
        \ProcessList{#1}{\tcbfigboxfigure}\\%[1.2em]\\[1.2em]%[-0.5em]\\%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbfigboxfigure}{>{ \SplitList{;}} m}{\tcbfigboximage#1}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbfigboximage}{m m G{\@default@fig@ref@label}}
{%
        \refstepcounter{figboxfigure}%
        \@set@current@tcb@colors{tcbfigureColorset}%
        \ifstrempty{#2}%
                {\def\@title@sep{}}%
                {\def\@title@sep{\@tcb@title@sep}}%
        \def\titleargwrapper{#2}%
        \begin{figboxfigure}{#2}[#3]%
                \includegraphics[width=\@tcb@figboxfigure@width]{#1}%
        \end{figboxfigure}%
}
%******************************************************************************************************************************%
%********************************************* Custom mdframed/tcolorbox Boxed Environments **********************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
\newmdtheoremenv[hidealllines=true, backgroundcolor=current-colback, innertopmargin=\f@size pt,
linewidth=4pt, linecolor=current-coldraw,
        singleextra=
        {
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(1cm,0pt);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(0pt,-1cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O-|P) -- +(-1cm,0pt);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O-|P) -- +(0pt,1cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O) -- +(1cm,0pt);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O) -- +(0pt,1cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (P) -- +(-1cm,0pt);
          \draw[line width=3pt,current-coldraw,line cap=rect] (P) -- +(0pt,-1cm);
        },
        firstextra=
        {
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(1cm,0pt);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(0pt,-1cm);
        },
        secondextra=
        {
          \draw[line width=3pt,current-coldraw,line cap=rect] (O-|P) -- +(-1cm,0pt);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O-|P) -- +(0pt,1cm);
        }
]{mdfdef@fullcornerbox}{\@defbox@title}
%------------------------------------------------------------------------------------------------------------------------------%
\newmdtheoremenv[hidealllines=true, backgroundcolor=current-colback, innertopmargin=\f@size pt,
linewidth=4pt, linecolor=current-coldraw,
        singleextra=
        {
          \draw[line width=3pt,current-coldraw,line cap=rect] (P|-O) -- +(-1cm,0pt);
          \draw[line width=3pt,current-coldraw,line cap=rect] (P|-O) -- +(0pt,1cm);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(1cm,0pt);
          \draw[line width=3pt,current-coldraw,line cap=rect] (O|-P) -- +(0pt,-1cm);
        }
]{mdfdef@cornerbox}{\@defbox@title}
%------------------------------------------------------------------------------------------------------------------------------%
\newmdtheoremenv
[roundcorner=5pt, backgroundcolor=current-colback, innertopmargin=7.5pt, innerbottommargin=\f@size pt, linewidth=4pt, linecolor=current-coldraw]
{mdfdef@borderbox}{\@defbox@title}
%------------------------------------------------------------------------------------------------------------------------------%
\newmdenv
[%
        innertopmargin=0pt, backgroundcolor=current-colback, roundcorner=8pt, linewidth=2pt,
        linecolor=current-coldraw, leftmargin=0mm, innertopmargin=\baselineskip, innerleftmargin=10pt, innerrightmargin=10pt,
        %innerbottommargin = 4pt,
        singleextra=
        {
                \node[anchor=west, inner xsep=6pt, inner ysep=4pt, xshift=10pt, fill=current-colfill, rounded corners=4pt, line width=1pt, draw]%
                        at (P-|O) {\normalsize\sffamily\bfseries\fontcolor{current-coltitle}\@defbox@title:};
        },
        firstextra=
        {
                \node[anchor=west, inner xsep=5pt, inner ysep=3pt, fill=current-colfill, rounded corners=4pt, line width=1pt, draw]%
                        at (P-|O) {\normalsize\sffamily\bfseries\fontcolor{current-coltitle}\@defbox@title:};
        }
]{mdfdef@titlebox}
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ tcolorbox Environment Definitions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%------------------------------------------------------------------------------------------------------------------------------%
\newtcolorbox[auto counter, number within=section]{mdfdef@tabbox}[2][]
{%
        before=\bigskip\centering, after=\bigskip, enhanced, arc=15pt, colframe=current-colframe, colback=white,
        fonttitle=\sffamily\bfseries, title=\@defbox@title\space~\thetcbcounter, sharp corners, rounded corners=northeast,
        attach boxed title to top left, colback=stdbackground, left=6pt, right=6pt,
        boxed title style=
        {%
                enhanced, colframe=current-colframe, colback=current-colframeborder, arc=5pt, bottomrule=0pt,
                rightrule=1pt, sharp corners, rounded corners=northeast,
        },
        interior style={},
        frame style={left color=current-colframe, right color=current-coldoubleline, fill=none},
        overlay unbroken and first={\node[anchor=west,font=\sffamily, color=current-coldoubleline] at (title.east) {{\small #2}};},
        #1
}
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
\newtcolorbox{tcbContentsBox}
{%
        reset, enhanced, capture=minipage, boxrule=3pt, breakable, @set@tcb@property@colors=tcbBlueScheme,
        before=\par\bigskip\smallskip\noindent, after=\par\bigskip, %fontupper=\tcbX@title@fontfamily,
        fonttitle=\tcbX@title@fontdef,
        top=1mm, bottom=0.5pt, left=6mm, left skip=1mm, %colback=stdbackground,
        titleframeComboInteriorSetup,
        titleframeComboSetup
}
%------------------------------------------------------------------------------------------------------------------------------%
\newtcbox{\tcbinlinetextbox}[1][inlineboxgray]{enhanced, arc=2pt, boxsep=1pt, top=2.5pt, bottom=1.5pt, left=4pt, right=4pt, fontupper=\fontfamily{cmss}\selectfont,
        colback=white, coltext=black, colframe=#1, boxrule=0.5pt,
        borderline={1.5pt}{1pt}{white}, fuzzy shadow={0.0pt}{-1.5pt}{0.5pt}{0.1mm}{stdgray},%
        interior code=
        {
                \filldraw[draw=#1, fill=#1, sharp corners, line width=0pt]
                        ([xshift=-2pt, yshift =-2pt]interior.north east)
                        --([xshift=2pt, yshift =-2pt]interior.north west)
                        --([xshift=2pt, yshift =2pt]interior.south west)
                        --([xshift=-2pt, yshift =2pt]interior.south east)
                        -- cycle;
        }%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTotalTCBox{\tcboxVerb}{O{red} v O{}}
{
        fontupper=\ttfamily, nobeforeafter, tcbox raise base, arc=0pt, outer arc=0pt, top=0pt, bottom=0pt,
        left=0mm, right=0mm, leftrule=0pt, rightrule=0pt, toprule=0.3mm, bottomrule=0.3mm, boxsep=0.5mm,
        colback=#1!10!white, colframe=#1!50!black, #3
}
{#2}
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox{figbox}{ O{} m O{fig:fig\thefigure}}
{
        tcbfigboxStyle={\@tcb@boxrule@linewidth}{single}{tcbfigboxColorset-colframeborder}{tcbfigboxColorset-colinteriorborder},
        #1, label={#3},
        blend before title code={\bookmarkX@hypertarget{figbox}\cftfigbox@hyperblend*'\@tcb@subtitle@font'{\@title@sep}\unskip\ignorespaces},
        title={\cftfigbox@contentsline{#2}\bookmarkX@hypertarget{figbox}\cftfigbox@hypertitle*'{\shadowText*:\Large:'tcbfigboxColorset'[black]}'{}{#2}},
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox[blend into=figures, number within=figbox]{figboxfigure}{ O{} m O{fig:fig\thefigure}}
{
        reset, tcbfigureStyle, #1, capture=hbox, label={#3}, every float=\centering,
        code=
        {
                \@set@current@tcb@colors{tcbfigureColorset}
                \ifstrempty{#2}
                        {\def\@title@sep{}}
                        {\def\@title@sep{\@tcb@title@sep}}
        },
        blend before title code=
        {%      	
	      	\bookmarkX@hypertarget{figboxfigure}%
	      	\cftfigboxfigure@hyperblend*'\@tcb@subtitle@font'{\@title@sep}%
	      	\unskip\ignorespaces%
      	},
        title={\cftfigboxfigure@hyperblend@title*{}{#2}},
        list entry={\hspace{\cftfigboxfigureindent}\cftfigboxfigure@listentry{\@title@sep}#2},
        after={\cftfigboxfigure@bookmark}
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox[blend into=tables]{IBPtable}{O{} m m O{}}
{
        tabular*=
        {%
                \def\@save@arraystretch{\arraystretch}%
                %\setlength\doublerulesep{0pt}%
                %\setlength{\arrayrulewidth}{0.75pt}%
                %\linespread@settings[context=IBP]
        }{#2},
        IBPStyle={\@tcb@default@boxrule@linewidth}{single}{IBPColorset-colframeborder}{IBPColorset-colinteriorborder},
        code=
        {%
                \def\@title@sep{}
                \def\@listentry@title@sep{}
                \ifdefempty{#3}%
                {%
                        \vspace{5mm}%
                        \setlength{\@tcbIBP@leftright@skip}{0mm}%
                }
                {%
                        \vspace{5mm}%
                        \def\@title@sep{\@tcb@title@sep}%
                        \setlength{\@tcbIBP@leftright@skip}{\maxof{0.5\@tcbIBP@math@content@width - 4mm}{0mm}}%
                }
                \ifdefempty{#4}%
                {}
                {%
                        \def\@title@sep{\@tcb@title@sep}%
                        \def\@listentry@title@sep{\@tcb@title@sep}
                        \addtolength{\@tcbIBP@leftright@skip}{-0.5\@tcbIBP@math@content@width + 4mm}%
                }%
                \linespread@settings[context=IBP]

        },
        extrude left by=\@tcbIBP@leftright@skip,
        extrude right by=\@tcbIBP@leftright@skip,
        every float=\centering,
        label={tab:tab\thetable},
        blend before title code=
        {%
        	\bookmarkX@hypertarget{IBPtable}%
        	\tocX@hypertarget{table}%
        	\cftIBPtable@hyperblend*{\@title@sep}%
        },
        title={\tocX@hypertarget[12pt]{table}[IBPtable]#3},
        extrude right by=1mm,
        list entry={\cftIBPtable@listentry{\@listentry@title@sep#4}},
        after={\cftIBPtable@bookmark\par\smallskip}
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox[blend into=tables]{PLDtable}{O{} m m O{}}
{
        PLDStyle={\@tcb@default@boxrule@linewidth}{doubleinner}{pldColorset-colframeborder}{pldColorset-colinteriorborder},
        code=
        {%
                \def\@title@sep{}
                \def\@listentry@title@sep{}
                \ifdefempty{#3}%
                {%
                        \vspace{5mm}%
                        \setlength{\@tcbIBP@leftright@skip}{0mm}%
                }
                {%
                        \vspace{5mm}%
                        \def\@title@sep{\@tcb@title@sep}%
                        \setlength{\@tcbIBP@leftright@skip}{\maxof{0.5\@tcbIBP@math@content@width - 4mm}{0mm}}%
                }
                \ifdefempty{#4}%
                {}
                {%
                        \def\@title@sep{\@tcb@title@sep}%
                        \def\@listentry@title@sep{\@tcb@title@sep}
                        \addtolength{\@tcbIBP@leftright@skip}{-0.5\@tcbIBP@math@content@width + 4mm}%
                }%

        },
        extrude left by=\@tcbIBP@leftright@skip,
        extrude right by=\@tcbIBP@leftright@skip,
        every float=\centering,
        label={tab:tab\thetable},
        blend before title code={\bookmarkX@hypertarget{IBPtable}\tocX@hypertarget{table}\cftIBPtable@hyperblend*{\@title@sep}},
        title={#3},%\tocX@hypertarget[12pt]{table}[IBPtable]
        extrude right by=1mm,
        list entry={\cftIBPtable@listentry{\@listentry@title@sep#4}},
        after={\cftIBPtable@bookmark}%after={\bookmark[keeplevel, dest=\bookmark@hyperaddress{IBPtable}, rellevel=1]{\cftIBPtable@toctitle}}
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox[blend into=figures]{boxedfigure}{ o m m O{fig:fig\thefigure}}
        {#1, capture=hbox, label={#4}, title={#2}, list text={\normalsize\bfseries#3}, every float=\centering}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareTColorBox[blend into=tables]{boxedtable}{ o m m O{h!} O{tab:tab\thetable}}
{%boxedtable[tcb settings]{tcb title text}{toc title text}[table placement][alternative reference label]
        #1, float=#4, every float=\centering, capture=hbox, label={#5},
        code=
        {
                \ifdefempty{#2}
                        {\def\@title@sep{}}
                        {\def\@title@sep{\@tcb@title@sep}}
        },
        title={\shadow{#2}},
        blend before title code={\sffamily\BreakableShadowText:\cftX@tcbtitle@fontfamily:[white](black){##1\@title@sep}},
        list entry={\normalsize\bfseries\protect\numberline{\thetable}#3}
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                                     1 2 3 4     5
\DeclareTColorBox[blend into=listings]{boxedlisting}{ o m m O{h!} O{lst:lst\thelstlisting}}
{float=#4, capture=hbox, label={#5}, title={#2}, list entry={\normalsize\bfseries\protect\numberline{\thelstlisting}#3}, every float=\centering, #1}
%------------------------------------------------------------------------------------------------------------------------------%
%******************************************************************************************************************************%
%*********************************************** \newkeycommand/\newkeyenvironment commands **********************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
\newkeycommand\ULsettings%
[enum type={all,uline,ul,underline}, bool init=false, bool reset=false, depth=, thickness=, color=]%
{%
        %\begingroup
        \xdef\@type@name{\commandkey{type}}
        \ifnumcomp{\commandkey{init}}{=}{1}
        {%
                \setlength{\@ul@thickness}{\@ul@default@thickness}%
                \setlength{\@ul@sep}{\@ul@default@sep}%
                \setlength{\@ul@depth}{\@ul@default@depth}%
                \renewcommand{\ULdepth}{\@ul@depth}%
                \renewcommand{\ULthickness}{\@ul@thickness}%
                \setul{\@ul@sep}{\@ul@thickness}%
                \setulcolor{\@ul@default@color}%
        }%{}%
        {
                \ifnumcomp{\commandkey{reset}}{=}{1}
                {%
                        \setlength{\@ul@thickness}{\@ul@default@thickness}%
                        \setlength{\@ul@sep}{\@ul@default@sep}%
                        \setlength{\@ul@depth}{\@ul@default@depth}%
                        \renewcommand{\ULdepth}{\@ul@depth}%
                        \renewcommand{\ULthickness}{\@ul@thickness}%
                        \setul{\@ul@sep}{\@ul@thickness}%
                        \setulcolor{\@ul@default@color}%
                }%{}%
                {
                        \IfStrEqCase{\@type@name}%
                        {%
                                {all}%
                                {%
                                        \ifcommandkey{thickness}{\renewcommand{\ULthickness}{\commandkey{thickness}}}{}%
                                        \ifcommandkey{thickness}{\setlength{\@ul@thickness}{\commandkey{thickness}}}{}%
                                        \ifcommandkey{depth}{\setlength{\@ul@sep}{\commandkey{depth}}}{}%
                                        \ifcommandkey{depth}{\setlength{\@ul@depth}{\commandkey{depth}}}{}%
                                        \ifcommandkey{color}{\setulcolor{\commandkey{color}}}{}%
                                        \setul{\@ul@sep}{\@ul@thickness}%
                                        \renewcommand{\ULdepth}{\@ul@depth}
                                }%
                                {uline}%
                                {%
                                        \ifcommandkey{thickness}{\renewcommand{\ULthickness}{\commandkey{thickness}}}{}%
                                        \ifcommandkey{depth}{\setlength{\@ul@depth}{\commandkey{depth}}}{}%
                                        \renewcommand{\ULdepth}{\@ul@depth}
                                }%
                                {ul}%
                                {%
                                        \ifcommandkey{thickness}{\setlength{\@ul@thickness}{\commandkey{thickness}}}{}%
                                        \ifcommandkey{depth}{\setlength{\@ul@sep}{\commandkey{depth}}}{}%
                                        \ifcommandkey{color}{\setulcolor{\commandkey{color}}}{}%
                                        \setul{\@ul@sep}{\@ul@thickness}%
                                }%
                                {underline}{}%
                        }%
                }%
        }%
        %\endgroup
}
%------------------------------------------------------------------------------------------------------------------------------%
\newkeycommand\autohyperlink
[enum type={Chapter,Section,Subsection}, textcolor=hyperlinkcolor, label=][1]
{%
        \xdef\@type@name{#1}
        \ifcommandkey{label}
                {\xdef\hyperlabel{\commandkey{label}}}
                {\xdef\hyperlabel{#1}}%
        \ifcommandkey{textcolor}
        {\@autohyperlink{\commandkey{type}}{\@type@name}{\hyperlabel}}
        {%
                \hypersetup
                {
                        linkcolor=hyperlinkcolor,
                        linkbordercolor=hyperlinkcolor
                }%
                \@autohyperlink{\commandkey{type}}{\@type@name}{\hyperlabel}%
        }%
}
%------------------------------------------------------------------------------------------------------------------------------%
\newkeyenvironment{thedocument}
[enum type={documentation, homework, default}, author={Blake Edward Schultze}, title=, subtitle=, course number=, course title=, instructor=, assignment=, semester=][0]
{
        \xdef\thedoctype{\commandkey{type}}%
        \xdef\theauthor{\commandkey{author}}%
        \begingroup\ULsettings[reset=true]\endgroup%
        %\ULsettings[reset=true]%
        %\global\newcommand{\@print@title}{\protect\commandkey{title}}
        \IfStrEq{\thedoctype}{documentation}%
        {%
                \ifcommandkey{title}{}{\PackageError{\pkgname}{missing 'title' key}{Provide 'title' and recompile}}%
                \ifcommandkey{subtitle}{}{\PackageError{\pkgname}{missing 'subtitle' key}{Provide 'subtitle' and recompile}}%
                \xdef\thetitle{\commandkey{title}}
                \xdef\thesubtitle{\commandkey{subtitle}}
                \hypersetup
                {
                        pdftitle        ={\thetitle},
                        pdfauthor       ={\theauthor},
                        pdfsubject      ={\thesubtitle},
                        pdfcreator      ={\theauthor},
                        pdfproducer     ={\theauthor}
                }
                \document\pagestyle{fancy}%
                \begin{coverpage}{documentation}{\theauthor}{\thetitle}{\thesubtitle}\end{coverpage}
        }{}
        \IfStrEq{\thedoctype}{homework}
        {%
                \ifcommandkey{course number}{}{\PackageError{\pkgname}{missing 'course number' key}{Provide 'course number' and recompile}}%
                \ifcommandkey{course title}{}{\PackageError{\pkgname}{missing 'course title' key}{Provide 'course title' and recompile}}%
                \ifcommandkey{instructor}{}{\PackageError{\pkgname}{missing 'instructor' key}{Provide 'instructor' and recompile}}%
                \ifcommandkey{assignment}{}{\PackageError{\pkgname}{missing 'assignment' key}{Provide 'assignment' and recompile}}%
                \ifcommandkey{semester}{}{\PackageError{\pkgname}{missing 'semester' key}{Provide 'semester' and recompile}}%
                \xdef\coursenumber{\commandkey{course number}}%
                \xdef\coursetitle{\commandkey{course title}}%
                \xdef\instructor{\commandkey{instructor}}%
                \xdef\assignment{\commandkey{assignment}}%
                \xdef\semester{\commandkey{semester}}%
                \ifcommandkey{title}{\xdef\thetitle{\commandkey{title}}}{\xdef\thetitle{\commandkey{course title}}}%
                \ifcommandkey{subtitle}{\xdef\thesubtitle{\commandkey{subtitle}}}{\xdef\thesubtitle{\commandkey{assignment}}}%
                \hypersetup
                {
                        pdftitle        ={\thetitle},
                        pdfauthor       ={\theauthor},
                        pdfsubject      ={\thesubtitle},
                        pdfcreator      ={\theauthor},
                        pdfproducer     ={\theauthor}
                }
                \document\pagestyle{fancy}%
                \begin{coverpage}{assignment}{\coursenumber}{\coursetitle}{\semester}{\instructor}{\assignment}{\theauthor}\end{coverpage}
        }{}
        \IfStrEq{\thedoctype}{default}
        {%
                \ifcommandkey{title}{\xdef\thetitle{}}{\xdef\thetitle{\commandkey{title}}}%
                \ifcommandkey{subtitle}{\xdef\thesubtitle{}}{\xdef\thesubtitle{\commandkey{subtitle}}}%
                \document\pagestyle{fancy}%
                \begin{coverpage}{default}{\coursenumber}{\coursetitle}{\semester}{\instructor}{\assignment}{\theauthor}\end{coverpage}
        }{}
        \@set@document@dimensions%
        \renewcommand*{\sectionmark}[1]{ \markright{Section \thesection :\ ##1} }%
        \fancyhead[L]{\rightmark}%
        \fancyhead[R]{\@header@image}%
        \cfoot[\thepage]{\thepage}
}{\enddocument}%
%------------------------------------------------------------------------------------------------------------------------------%
\newkeyenvironment{tcbenclosure}
[enum type={default, listbox, eqnlistbox, bashscripts, bashfunctions, problems, solutions}, sidebyside, width=\textwidth, gradient=, colorscheme=, colfill=,title=][0]%[1]%
{
        \xdef\@the@envtype{\commandkey{type}}%
        \ifcommandkey{title}
                {\def\@the@title{\commandkey{title}}}%
                {\def\@the@title{}}%
        \xdef\@the@width{\commandkey{width}}%
        \begingroup\ULsettings[reset=true]\endgroup%
        \IfStrEqCase{\@the@envtype}%
        {%
                {default}{\edef\@the@gradient{\BBBgradientbackground}}%
                {listbox}{\edef\@the@gradient{\YYYgradientbackground}}%
                {eqnlistbox}{\edef\@the@gradient{\GGYgradientbackground}}%
                {bashscripts}{\edef\@the@gradient{\GYYgradientbackground}}%
                {bashfunctions}{\edef\@the@gradient{\BYYgradientbackground}}%
                {problems}{\edef\@the@gradient{\YYYgradientbackground}}%
                {solutions}{\edef\@the@gradient{\GYYgradientbackground}}%
        }[\edef\@the@gradient{\BBBgradientbackground}]%
        \IfStrEqCase{\@the@envtype}%
        {%
                {default}{\def\@the@color@scheme{tcbBlueScheme}}%
                {listbox}{\def\@the@color@scheme{tcblistboxColorset}}%
                {eqnlistbox}{\def\@the@color@scheme{tcbeqnlistboxColorset}}%
                {bashscripts}{\def\@the@color@scheme{tcbDarkGreenScheme}}%
                {bashfunctions}{\def\@the@color@scheme{tcbBlueScheme}}%
                {problems}{\def\@the@color@scheme{problemColorset}}%
                {solutions}{\def\@the@color@scheme{solutionColorset}}%
        }[\def\@the@color@scheme{tcbBlueScheme}]%
        \ifcommandkey{colorscheme}{\def\@the@color@scheme{\commandkey{colorscheme}}}{}
        \ifcommandkey{gradient}{\constructgradient{@the@gradient}{\commandkey{gradient}}}{}
        \ifcommandkey{sidebyside}
        {
                \ifdefempty{\@the@title}
                        {\begin{tcbenvironment}*<\@the@width>'\@the@color@scheme'"\@the@gradient"}
                        {\begin{tcbenvironment}*<\@the@width>'\@the@color@scheme'"\@the@gradient"|\@the@title|}
        }
        {
                \ifdefempty{\@the@title}
                        {\begin{tcbenvironment}<\@the@width>'\@the@color@scheme'"\@the@gradient"}
                        {\begin{tcbenvironment}<\@the@width>'\@the@color@scheme'"\@the@gradient"|\@the@title|}
        }
        %|bash functions|
}{\end{tcbenvironment}}
%------------------------------------------------------------------------------------------------------------------------------%
\newkeyenvironment{tcbsection}
[enum type={section,legend,solution, proof}, colorscheme=, tcbset=, tcbsetforeverylayer=, bool underlined=true, bottom=, title=, contentsline=][0]%[1]%
{%
        \@macro@length=\parindent
        \setlength{\parindent}{0em}
        \xdef\@the@envtype{\commandkey{type}}%
        \begingroup\ULsettings[reset=true]\endgroup%
        \IfStrEqCase{\@the@envtype}%
        {%
                {section}{\def\@the@title{Section \theSection}}%
                {legend}{\def\@the@title{Key:}}%
                {solution}{\def\@the@title{Solution:}}%
                {proof}{\def\@the@title{Proof:}}%
        }[\def\@the@title{}]%
        \ifcommandkey{title}{\def\@the@title{\commandkey{title}}}{}
        \ifnumcomp{\commandkey{underlined}}{=}{1}%
                {\def\@the@styled@title{\underline{\@the@title}}}%
                {\def\@the@styled@title{\@the@title}}%
        \IfStrEqCase{\@the@envtype}%
        {%
                {section}%
                {%
                        \def\@the@formatted@title%
                        {%
                                \tcbhyperlink[stddkblue]{\cft@hyperaddress{Section}}%
                                        {\shadowcolor{black}\shadowtext{\@the@title}}%
                        }%
                }%
                {legend}{\def\@the@formatted@title{\@the@styled@title}}%
                {solution}{\def\@the@formatted@title{\@the@styled@title}}%
                {proof}{\def\@the@formatted@title{\@the@styled@title}}%
        }%
        \IfStrEqCase{\@the@envtype}%
        {%
                {section}{\def\@the@color@scheme{tcbBlueScheme}}%
                {legend}{\def\@the@color@scheme{tcbBlueScheme}}%
                {solution}{\def\@the@color@scheme{solutionColorset}}%
                {proof}{\def\@the@color@scheme{solutionColorset}}%
        }[\def\@the@color@scheme{tcbBlueScheme}]%
        \IfStrEqCase{\@the@envtype}%
        {%
                {section}%
                {%
                        \def\@tcolorbox@beginning{\tcbsectiontextfont}%
                        \def\@tcolorbox@ending{}%
                }%
                {legend}%
                {%
                        \def\@tcolorbox@beginning{\begin{legendList}}%
                        \def\@tcolorbox@ending{\end{legendList}}%
                }%
                {solution}%
                {%
                        \setcounter{@save@theequation}{\value{equation}}%
                        \setcounter{equation}{0}%
                        \def\@tcolorbox@beginning{}%
                        \def\@tcolorbox@ending{}%
                }%
                {proof}%
                {%
                        \setcounter{@save@theequation}{\value{equation}}%
                        \setcounter{equation}{0}%
                        \def\@tcolorbox@beginning{\proof[\unskip\nopunct]}%
                        \def\@tcolorbox@ending{\endproof}%
                }%
        }[\def\@tcolorbox@beginning{\tcbsectiontextfont}\def\@tcolorbox@ending{}]%
        \ifcommandkey{colorscheme}{\def\@the@color@scheme{\commandkey{colorscheme}}}{}%
        \@set@current@tcb@colors{\@the@color@scheme}%
        \ifcommandkey{contentsline}%
        {\tcbset{reset, tcbSectionStyle, title={\commandkey{contentsline}\shadowText:\tcbsectiontitlefont:'\@the@color@scheme'{\@the@formatted@title}}}}%
        {\tcbset{reset, tcbSectionStyle, title={\shadowText:\tcbsectiontitlefont:'\@the@color@scheme'{\@the@formatted@title}}}}%
        \ifcommandkey{bottom}{\tcbset{bottom=\commandkey{bottom}}}{}%
        \IfStrEqCase{\@the@envtype}%
        {%
                {section}{\tcbset{after skip=\@tcbSection@after@skip}}%
                {legend}{\tcbset{after skip=\@Legend@after@skip}}%
        }%
        \ifcommandkey{tcbset}{\tcbset{\commandkey{tcbset}}}{}%
        \ifcommandkey{tcbsetforeverylayer}{\tcbsetforeverylayer{\commandkey{tcbsetforeverylayer}}}{}%
        \unskip\begin{tcolorbox}\@tcolorbox@beginning%
}%
{%
        \@tcolorbox@ending\end{tcolorbox}%
        \setlength{\parindent}{\@macro@length}%
        \IfStrEqCase{\@the@envtype}%
        {%
                {solution}{\setcounter{equation}{\value{@save@theequation}}}%
                {proof}{\setcounter{equation}{\value{@save@theequation}}}%
        }%
        %\setcounter{equation}{\value{@save@theequation}}%
}
%------------------------------------------------------------------------------------------------------------------------------%
\newkeyenvironment{tcbeqnlist}
[enum type={default, solution, blue, darkblue}, bool beforeskip=false, bool numbers=false, bool goldtrim=true, colorscheme=, colfill=, title=][0]%[1]%
{
        \renewcommand{\baselinestretch}{\@doc@baselinestretch}
        \xdef\@the@envtype{\commandkey{type}}%
        \ifcommandkey{title}
                {\def\@the@title{\commandkey{title}}}%
                {\def\@the@title{}}%
        \begingroup\ULsettings[reset=true]\endgroup%%
        \IfStrEqCase{\@the@envtype}%
        {%
                {default}{\edef\@the@colfill{current-colfill}}%
                {solution}{\edef\@the@colfill{tcbsolutionColorset-colframe}}%
                {blue}{\edef\@the@colfill{current-colfill}}%
                {darkblue}{\edef\@the@colfill{current-colfill}}%
        }[\edef\@the@colfill{current-colfill}]%
        \IfStrEqCase{\@the@envtype}%
        {%
                {default}{\def\@the@color@scheme{tcbeqnlistboxColorset}}%
                {solution}{\def\@the@color@scheme{tcbsolutionColorset}}%
                {blue}{\def\@the@color@scheme{definitionColorset}}%
                {darkblue}{\def\@the@color@scheme{tcbDarkBlueScheme}}%
        }[\def\@the@color@scheme{tcbeqnlistboxColorset}]%
        \ifcommandkey{colorscheme}%
        {%
                \edef\@the@color@scheme{\commandkey{colorscheme}}%
                \edef\@the@colfill{current-colfill}%
        }{}
        \ifcommandkey{colfill}{\edef\@the@colfill{\commandkey{colfill}}}{}
        \ifnumcomp{\commandkey{beforeskip}}{=}{1}{\par\medskip}{}%
        \ifnumcomp{\commandkey{numbers}}{=}{1}%
        {
                \ifnumcomp{\commandkey{goldtrim}}{=}{1}%
                {
                        \ifdefempty{\@the@title}
                                {\tcbeqnlistbox'\@the@color@scheme'"\@the@colfill"}
                                {\tcbeqnlistbox'\@the@color@scheme'"\@the@colfill"|\@the@title|}
                }
                {
                        \ifdefempty{\@the@title}
                                {\tcbeqnlistbox-'\@the@color@scheme'"\@the@colfill"}
                                {\tcbeqnlistbox-'\@the@color@scheme'"\@the@colfill"|\@the@title|}
                }
        }
        {
                \ifnumcomp{\commandkey{goldtrim}}{=}{1}%
                {
                        \ifdefempty{\@the@title}
                                {\tcbeqnlistbox*'\@the@color@scheme'"\@the@colfill"}
                                {\tcbeqnlistbox*'\@the@color@scheme'"\@the@colfill"|\@the@title|}
                }
                {
                        \ifdefempty{\@the@title}
                                {\tcbeqnlistbox*-'\@the@color@scheme'"\@the@colfill"}
                                {\tcbeqnlistbox*-'\@the@color@scheme'"\@the@colfill"|\@the@title|}
                }
        }
}{\endtcbeqnlistbox}
%------------------------------------------------------------------------------------------------------------------------------%
\newkeyenvironment{tcblist}
[enum type={default, maroon, darkred, blue, darkblue, darkgreen}, bool beforeskip=false, bool numbers=false, bool goldtrim=false, width=\linewidth, colorscheme=, colfill=, title=][0]%[1]%
{
        \renewcommand{\baselinestretch}{\@doc@baselinestretch}
        \xdef\@the@envtype{\commandkey{type}}%
        \ifcommandkey{title}
                {\def\@the@title{\commandkey{title}}}%
                {\def\@the@title{}}%
        \xdef\@the@width{\commandkey{width}}%
        \begingroup\ULsettings[reset=true]\endgroup%%
        \IfStrEqCase{\@the@envtype}%
        {%
                {default}{\edef\@the@colfill{current-colfill}}%
                {darkred}{\edef\@the@colfill{stddkred}}%
                {maroon}{\edef\@the@colfill{stdmaroon}}%
                {blue}{\edef\@the@colfill{stdblue}}%
                {darkblue}{\edef\@the@colfill{stddkblue}}%
                {darkgreen}{\edef\@the@colfill{stddkgreen}}%
        }[\edef\@the@colfill{current-colfill}]%
        \IfStrEqCase{\@the@envtype}%
        {%
                {default}{\def\@the@color@scheme{tcblistboxColorset}}%
                {darkred}{\def\@the@color@scheme{tcbRedScheme}}%
                {blue}{\def\@the@color@scheme{tcbBlueScheme}}%
                {darkblue}{\def\@the@color@scheme{tcbDarkBlueScheme}}%
                {darkgreen}{\def\@the@color@scheme{tcbDarkGreenScheme}}%
        }[\def\@the@color@scheme{tcblistboxColorset}]%
        \ifcommandkey{colorscheme}%
        {%
                \edef\@the@color@scheme{\commandkey{colorscheme}}%
                \edef\@the@colfill{current-colfill}%
        }{}
        \ifcommandkey{colfill}{\edef\@the@colfill{\commandkey{colfill}}}{}
        \ifnumcomp{\commandkey{beforeskip}}{=}{1}{\par\medskip}{}%
        \ifnumcomp{\commandkey{goldtrim}}{=}{1}%
        {
                \ifdefempty{\@the@title}
                        {\tcblistbox*<\@the@width>'\@the@color@scheme'"\@the@colfill"}
                        {\tcblistbox*<\@the@width>'\@the@color@scheme'"\@the@colfill"|\@the@title|}
        }
        {
                \ifdefempty{\@the@title}
                        {\tcblistbox<\@the@width>'\@the@color@scheme'"\@the@colfill"}
                        {\tcblistbox<\@the@width>'\@the@color@scheme'"\@the@colfill"|\@the@title|}
        }
}{\endtcblistbox}
%******************************************************************************************************************************%
%*********************************************** Coverpage and Document Type Environments ************************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
%                                                    1 2 3
\DeclareDocumentEnvironment{documentation-coverpage}{m m m}
{%\documentation-coverpage{title}{subtitle}{author}
        \unskip\ignorespaces\begingroup%
        \thispagestyle{empty}%
        \shadowcolor{BaylorGoldCMYK}%
        \centering%
        \savebox{\@coverpage@savebox@title@contents}{\shadowtext{\@coverpage@title@font#1}}%
        \savebox{\@coverpage@savebox@title}{\cshadowbox{\shadowtext{\@coverpage@title@font#1}}}%
        \savebox{\@coverpage@savebox@unilogo}{\cshadowbox{\includegraphics[width=\wd\@coverpage@savebox@title@contents]{\@uni@logo}}}%
        \savebox{\@coverpage@savebox@deptlogo}{\cshadowbox{\includegraphics[width=\wd\@coverpage@savebox@title@contents]{\@uni@dept@logo}}}%
        \savebox{\@coverpage@savebox@description}{\parbox{\textwidth}{\sectionheader!{\raggedright\@coverpage@description@font{#2}}}}%
        \savebox{\@coverpage@savebox@author@date}%
        {%
                \parbox{\textwidth}%
                {%
                        \centering%
                        \@coverpage@author@font\shadowtext{#3}\\[0.5em]%
                        \@coverpage@date@font\shadowtext{\today}\\[-1.0em]%
                        \vspace{\@coverpage@dept@logo@before@skip}%
                        \usebox{\@coverpage@savebox@deptlogo}\unskip%
               }%
        }%
        \setlength{\@coverpage@uni@logo@height}{\ht\@coverpage@savebox@unilogo}%
        \setlength{\@coverpage@dept@logo@height}{\ht\@coverpage@savebox@deptlogo}%
        \setlength{\@coverpage@title@height}{\ht\@coverpage@savebox@title}%
        \setlength{\@coverpage@description@height}{\ht\@coverpage@savebox@description}%
        \setlength{\@coverpage@author@date@height}{\ht\@coverpage@savebox@author@date@deptlogo}%
        \setlength{\@coverpage@free@vspace}%
        {%
                \dimexpr\textheight - \@coverpage@uni@logo@height - \@coverpage@author@date@height - \@coverpage@title@height
                - \@coverpage@description@height - \@coverpage@title@before@skip - \@coverpage@description@before@skip - 2in
                - \@coverpage@dept@logo@before@skip - \@coverpage@author@date@sep\relax%
        }%
        \setlength{\@coverpage@top}{\dimexpr\@coverpage@free@vspace / 2\relax}%
        %\vspace{-4mm}
        %\@section@sep{BaylorGreenCMYK}{BaylorGoldCMYK}\\[-0.7em]%
        \usebox{\@coverpage@savebox@unilogo}\\[-0em]\vspace{\@coverpage@title@before@skip}%
        \usebox{\@coverpage@savebox@title}\\[-1em]\vspace{\@coverpage@description@before@skip}%
        \usebox{\@coverpage@savebox@description}\\[-1em]\vspace{\@coverpage@author@date@before@skip}%
        \usebox{\@coverpage@savebox@author@date}\\[-1em]%
        \usebox{\@coverpage@savebox@author@date@deptlogo}\\[-0.10em]%
        %\@section@sep{BaylorGreenCMYK}{BaylorGoldCMYK}\\[-12.6em]%
        \endgroup\clearpage%
}{\setcounter{page}{0}}
%------------------------------------------------------------------------------------------------------------------------------%
% Cover page for homework/assignment documents w/ name/date, course title/#/semester, instructor, and assignment details
%                                                 1 2 3 4 5 6
\DeclareDocumentEnvironment{assignment-coverpage}{m m m m m m}
{%\assignment-coverpage{course #}{course title}{semester}{instructor}{assignment Ch./problem #s}{author}
        \thispagestyle{empty}%
        \shadowcolor{BaylorGoldCMYK}%
        \begin{figure}[h!]
                \centering\savebox{\@coverpage@savebox@title@contents}{\shadowtext{\@title@font#1: #2}}
                \cshadowbox{\includegraphics[width=\wd\@coverpage@savebox@title@contents]{\@uni@logo}}
                \cshadowbox{\usebox{\@coverpage@savebox@title@contents}}
                \@section@sep{BaylorGreenCMYK}{BaylorGoldCMYK}\\[0.1em]
                \parbox{\textwidth}
                {
                    \title{}\centering\LARGE
                    \@coverpage@subtitle@font{#3, #4}\\[0.2em]
                    \@coverpage@description@font{#5}
                    \author{\@coverpage@author@font\shadowtext{#6}}
                    \date{\@coverpage@date@font\shadowtext{\today}}
                }
                \@section@sep{BaylorGreenCMYK}{BaylorGoldCMYK}
                \begin{minipage}{\textwidth}
                        \centering
                        \vspace{-11mm}\maketitle\vspace{-4mm}\fontcolor{Black}
                        \cshadowbox{\includegraphics[width=\wd\@coverpage@savebox@title@contents]{\@uni@dept@logo}}
                \end{minipage}\caption{}
        \end{figure}
}
{\thispagestyle{empty}\setcounter{page}{0}}
%------------------------------------------------------------------------------------------------------------------------------%
%                                      1 2 3 4 5 6 7
\DeclareDocumentEnvironment{coverpage}{m m m m o o o}
{%
        \ifmylatex@coverpage
                \doc@hypertargets{\@coverpage@target@name}\\[-0.75em]%
                \bookmark[keeplevel, dest=\bookmark@hyperaddress{\@coverpage@target@name}, rellevel=0]{Coverpage}%
                \ifstrequal{#1}{documentation}%
                {%
                        \@set@coverpage@dimensions%
                        \begin{documentation-coverpage}%
                                {#3}{#4}{#2}%
                        \end{documentation-coverpage}%
                        \@set@document@dimensions%
                }{}%
                \ifstrequal{#1}{assignment}%
                {%
                        \@set@coverpage@dimensions%
                        \begin{assignment-coverpage}{#2}{#3}{#4}{#5}{#6}\end{assignment-coverpage}%
                        \@set@document@dimensions%
                }{}%
        \fi%
}{}
%******************************************************************************************************************************%
%******************************************* General Purpose Document Environments ********************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
%                                           1 2               3                  4
%5                                                     6   7   8
\DeclareDocumentEnvironment{tcbenvironment}{s D<>{\textwidth} D''{tcbBlueScheme} D""{\BBBgradientbackground}
 D(){current-colframeborder,current-colinteriorborder} O{} d() d|| }
{%tcbenvironment[*]<box width>'color scheme'{style}[tcbset options](tcbseteverylayer options)
        \@set@current@tcb@colors{#3}%
        \@let@macro@pair<@tcbenvironmentStyle@colframeborder,@tcbenvironmentStyle@colinteriorborder>=<#5>\relax%
        \tcbset%
        {
                tcbenvironmentStyle={\@tcb@default@boxrule@linewidth}%
                        {doubleinner}%
                        {\@tcbenvironmentStyle@colframeborder}%
                        {\@tcbenvironmentStyle@colinteriorborder}%
                        {#4},
                        width=#2
        }%
        \IfValueTF{#7}{\tcbsetforeverylayer{#7}}{}%
        \IfBooleanTF{#1}{\tcbset{sidebyside, segmentation empty, sidebyside gap=0mm, sidebyside align=bottom seam}}{}%
        \IfValueTF{#8}%
        {%
                \ifstrempty{#8}%
                        {\tcolorbox[title={}, #6]}%
                        {\tcolorbox[title=\shadowText{#8}, #6]}%
        }%
        {\tcolorbox[title={}, #6]}%
        \vspace{1mm}%
        %\par\smallskip
}{\endtcolorbox\setlength{\parindent}{\@macro@length}\par\smallskip}
%------------------------------------------------------------------------------------------------------------------------------%
\define@boolkey[tcb]{paragraph}{indent}%
{%
        \iftcb@paragraph@indent%
                \setlength{\parindent}{\tcbparindent}%
        \else%
                \noindent%
        \fi%
}
%------------------------------------------------------------------------------------------------------------------------------%
        %                                 1 2  3               4                  5                    6 7
\DeclareDocumentEnvironment{tcbparagraph}{s t- D<>{\linewidth} D''{tcbBlueScheme} G{tcbparagraphStyle} o d()}
{%tcbparagraph[*]<box width>'color scheme'{style}[tcbset options](tcbseteverylayer options)
        \setlength\@macro@length{\parindent}%
        \tcbset{reset}%
        \@set@current@tcb@colors{#4}%
        \IfValueTF{#7}{\tcbsetforeverylayer{#7}}{}%
        \ifstrequal{#5}{tcbparagraphStyle}
        {%
                \IfBooleanTF{#1}%
                {%
                        \IfValueTF{#6}%
                        {%
                                \tcolorbox%
                        [#5={\@tcb@default@boxrule@linewidth}{single}{current-colframeborder}{current-colinteriorborder},
                                width=#3, #6]%
                        }%
                        {%
                                \tcolorbox%
                        [#5={\@tcb@default@boxrule@linewidth}{single}{current-colframeborder}{current-colinteriorborder},
                                width=#3]%
                        }%
                }%
                {%
                        \IfValueTF{#6}%
                        {%
                                \tcolorbox%
                                [#5={\@frame@border@linewidth}{filled}{current-colframeborder}{current-colinteriorborder},
                                width=#3, #6]%
                        }%
                        {%
                                \tcolorbox%
                                [#5={\@frame@border@linewidth}{filled}{current-colframeborder}{current-colinteriorborder},
                                width=#3]%
                        }%
                }%
        }%
        {%
                \IfValueTF{#6}%
                        {\tcolorbox[#5, width=#3, #6]}%
                        {\tcolorbox[#5, width=#3]}%
        }%
        \IfBooleanTF{#2}{\setkeys[tcb]{paragraph}{indent=true}}{}%
}{\endtcolorbox\setlength{\parindent}{\@macro@length}}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentEnvironment{mdfdefinitionbox}{s m D(){\DefinitionName}}
{%mdfdefinitionbox<*>{defbox type}
        \def\@defbox@title{#3}
        \IfStrEqCase{#2}%
        {%
                {cornerbox}{\def\mdfdef@boxtype{mdfdef@cornerbox}}%
                {fullcornerbox}{\def\mdfdef@boxtype{mdfdef@fullcornerbox}}%
                {borderbox}{\def\mdfdef@boxtype{mdfdef@borderbox}}%
                {titlebox}{\def\mdfdef@boxtype{mdfdef@titlebox}}%
                {tabbox}{\def\mdfdef@boxtype{mdfdef@tabbox}}%
        }[\def\mdfdef@boxtype{mdfdef@tabbox}]%
        \expandafter\begin{\mdfdef@boxtype}
}{\expandafter\end{\mdfdef@boxtype}}
%------------------------------------------------------------------------------------------------------------------------------%
%******************************************************************************************************************************%
%********************************************* Specialized/Specific Application Environments *********************************************%
%******************************************************************************************************************************%
%                                           1 2          3        4 5 6
\DeclareDocumentCommand{\cftX@uparrow@link}{s D(){arrow} D<>{0.4} m o D(){upload-button.png}}%
{%\cftX@uparrow@link*<clear page>!<add vskip after>'color scheme'{Subsection title}(hypertarget label prefix)[description text]
        %\flushleft\unskip\ignorespaces%
        \IfValueTF{#5}%
                {\def\@link@address{#5}}%
                {\def\@link@address{\@nameuse{cft#4@toc@hyperaddress}}}%
                %{\def\@link@address{\cft@hyperaddress{#2}}}
        \IfBooleanTF{#1}%
        {%
                \reversemarginpar%
                \marginnote%
                {%
                        %\BMKcircle[shape=arrow,scale=0.5, colorscheme=tcbBlueScheme, draw=stdblue, fill=stdblue, outline=black]
                        %\tocX@hyperlink{#1}%colorscheme=tcbBlueScheme, draw=stdblue, fill=stdblue,
                        \hyperlink{\@link@address}%
                        {%
                                \normalsize\normalfont\BMKcircle[shape=#2,scale=#3, outline=black]%
                                %\includegraphics[width=6.5mm]{#2}%
                        }%
                        %{\includegraphics[width=6.5mm]{#2}}%
                        %\hfill%
                }%%
        }%
        {%
                \hyperlink{\@link@address}%
                {%
                       \normalsize\normalfont\BMKcircle[shape=#2,scale=#3, outline=black]%
                       %\includegraphics[width=6.5mm]{#2}%
                }%
        }%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                    1   2  3 4   5  6  7
\DeclareDocumentEnvironment{problem}{G{} t> o d() t. t' t+}
{%\problem[<tcb options>]< > parskip >[<ch. #>][<problem #>]<. (sub)problem indicator><' part indicator>
        \bookmarksetupnext{keeplevel}%
        \@macro@length=\parindent%
        \setlength{\parindent}{0em}%
        \refstepcounter{@count@problem}%
        %\@problems@baselinestretch
        \linespread@settings[context=problem]%
        \@set@current@tcb@colors{problemColorset}
        \setcounter{@prob@bool@counter}{0}%
        \IfBooleanTF{#2}{\par\bigskip}{}%
        \IfBooleanTF{#5}{\addtocounter{@prob@bool@counter}{1}}{}%
        \IfBooleanTF{#6}{\addtocounter{@prob@bool@counter}{2}}{}%
        \IfBooleanTF{#7}{\addtocounter{@prob@bool@counter}{4}}{}%
        \ifnumcomp{\value{@prob@bool@counter}}{=}{0}%
        {%
                \setcounter{@subproblem@counter}{1}%
                \setcounter{@prob@part@counter}{1}%
                \IfValueTF{#3}{\setcounter{@chap@counter}{#3}}{}%
                \IfValueTF{#4}%
                        {\setcounter{@prob@counter}{#4}}%
                        {\refstepcounter{@prob@counter}}%
                \def\problem@type{problem}
        }{}%
        \ifnumcomp{\value{@prob@bool@counter}}{=}{1}%
                {\def\problem@type{subproblem}}{}%
        \ifnumcomp{\value{@prob@bool@counter}}{=}{2}%
                {\def\problem@type{problempart}}{}%
        \ifnumcomp{\value{@prob@bool@counter}}{=}{5}%
                {\def\problem@type{problempartsubproblem}}{}%
        \ifnumcomp{\value{@prob@bool@counter}}{=}{6}%
                {\def\problem@type{subproblempart}}{}%
        %\reversemarginpar\marginnote{hello}%
        \begin{tcolorbox}[problemStyle,#1]%
                %\reversemarginpar\marginnote{\hyperlink{coverpage}{\includegraphics[width=6.5mm]{{upload-button.png}}}}%%
                \cftX@uparrow@link*{\problem@type}%[prob\arabic{@count@problem}]
                \bfmseries%
                \problem@type@command{\problem@type}%
}{\end{tcolorbox}\setlength{\parindent}{\@macro@length}}
%------------------------------------------------------------------------------------------------------------------------------%
% Problem environment box fitted to content instead of width of line, for short problem statements
\newenviron{shortprob}[1][]%
        {\tcbset{problemStyle,#1}}
        {\tcbox{\textbf{(\@print@before@increment{\alph}{@subproblem@counter})}\shortprobbody}}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentEnvironment{tcbsolutionverb}{s o}
{%
    \tcbsetforeverylayer{tcbsolutionStyle}%
    \IfValueTF{#2}{\tcbsetforeverylayer{#2}}{}%
    \begin{tcolorbox}%
}{\end{tcolorbox}}%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%                                       1  2                            3          4   5                       6   7
\DeclareDocumentEnvironment{tcblistbox}{s D<>{\@default@listbox@width} O{\arabic} d() D''{tcblistboxColorset} d"" d||}
{%tcblistbox[- gold borders]<env width>[number format](set counter value)'colorset'"fill color"|title|
        \let\tcbeqnlistboxentrynumbering=#3
        \IfValueTF{#4}
                {\setcounter{@tcb@eqn@list@counter}{#4}}
                {\setcounter{@tcb@eqn@list@counter}{1}}
        \@set@current@tcb@colors{#5}
        \IfValueTF{#6}
                {\@set@tcb@listbox@fill@colors{#6}}{}
        \IfBooleanTF{#1}
                {\tcbsetforeverylayer{tcblistboxStyle, width=#2, colframe=stdyellow, colbacktitle=current-colfill}}%
                {\tcbsetforeverylayer{tcblistboxStyle, width=#2}}%
        \IfValueTF{#7}
                {\tcolorbox[title={#7}]}
                {\tcolorbox}
}{\endtcolorbox}
%------------------------------------------------------------------------------------------------------------------------------%
%                                         1   2 3 4          5   6
\DeclareDocumentCommand{\tcblistboxentry}{d() m m O{\arabic} d() O{}}
{%\tcblistboxentry(set count){text}{math}[counter format](counter prepend text)[count append text]
        \let\tcbeqnlistboxentrynumbering=#4%
        \IfValueTF{#1}{\setcounter{@tcb@eqn@list@counter}{#1}}{}%
        \setlength{\@macro@height}{\heightof{$\displaystyle #3$}}%
        \tcbsubtitle%
        [
                before skip = \dimexpr\@macro@height - 8.5mm\relax,
                after skip = \dimexpr\@macro@height /3 - 3.5mm\relax,
                colback=tcblistboxColorset-colbacksubtitle, toptitle=-3mm, bottomtitle=-3mm,
                top=-0.25mm, bottom=-0.25mm
        ]%
        {%
                \IfValueTF{#5}%
                        {\tcblistboxentrylabel{#5}\quad #2}%
                        {\tcblistboxentrylabel*{@tcb@eqn@list@counter}\quad #2}%
        }%
        \bfseries%
        \begin{alignat*}{2}%
                #3
        \end{alignat*}
        \addtocounter{@tcb@eqn@list@counter}{1}%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                              1 2         3            4            5 6        7
\DeclareDocumentCommand{\tcblistboxentrylabel}{s O{circle} D(){\arabic} D''{current} m D(){6mm} D<>{0.5pt}}
{%\tcblistboxentrylabel[*<counter on>][shape](counter print format)(color style){character/text or counter}(min size)<inner sep>
        \@set@current@tcb@colors{#4}
        %\fillednumshape[*<counter on>][shape](counter print format)(color style){character/text or counter}(min size)<inner sep>
        \IfBooleanTF{#1}%
                {\fillednumshape*[#2](#3)'#4'{#5}(#6)<#7>}%
                {\fillednumshape[#2](#3)'#4'{#5}(#6)<#7>}%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                          1 2  3          4   5                          6   7
\DeclareDocumentEnvironment{tcbeqnlistbox}{s t- O{\arabic} d() D''{tcbeqnlistboxColorset} d"" d||}
{%tcbeqnlistbox[* no Eqn #s][- colorset->fill colors][number format](set counter value)'color set'"fill color"|title|
        \@set@current@tcb@colors{#5}%tcbBlueGreenScheme, tcbForestGreenScheme, tcbGreenScheme,tcbNavyPurpleScheme
        \let\tcbeqnlistboxentrynumbering=#3
        \tcbsetforeverylayer{tcbeqnlistboxStyle}
        \IfValueTF{#4}
                {\setcounter{@tcb@eqn@list@counter}{#4}}
                {\setcounter{@tcb@eqn@list@counter}{1}}
        \IfValueTF{#6}
                {\@set@tcb@listbox@fill@colors{#6}}{}
        \IfBooleanTF{#2}{}{\tcbsetforeverylayer{colframe=stdyellow, colbacktitle=current-colfill}}
        \IfValueTF{#7}
                {\tcbsetforeverylayer{title={#7}}}
                {}
        \IfBooleanTF{#1}
                {\vspace{-5mm}\empheq[box=\tcboxmath]{alignat*=2}}
                {\vspace{-5mm}\empheq[box=\tcboxmath]{alignat=2}}
}{\endempheq}
%------------------------------------------------------------------------------------------------------------------------------%
%                                            1 2   3         4 5 6 7                     8   9
\DeclareDocumentCommand{\tcbeqnlistboxentry}{s d() O{arabic} m m s O{tcbeqnlistboxStyle} d() O{}}
{%\@counter@print{\tcbeqnlistboxentrynumbering}{@tcb@eqn@list@counter}
        \IfValueTF{#2}%
                {\setcounter{@tcb@eqn@list@counter}{#2}}%
                {}%
        \IfBooleanTF{#1}
        {%
                \hspace{0pt}\unskip%
                \text{\bfseries\tcblistboxentrylabel*{@tcb@eqn@list@counter}}%
                &&\qquad\boldsymbol{#4}%
                &\boldsymbol{#5}%
        }%
        {%
                \IfValueTF{#8}%
                {%
                        \hspace{0pt}\unskip%
                        \text{\bfseries\tcblistboxentrylabel{#8#3{@tcb@eqn@list@counter}#9}}%
                        &&\qquad&\boldsymbol{#4#5}%
                }%
                {%
                        \hspace{0pt}\unskip%
                        \text{\bfseries\tcblistboxentrylabel{\@counter@print{#3}{@tcb@eqn@list@counter}}}%
                        &&\qquad&\boldsymbol{#4#5}%
                }%
        }%
        \addtocounter{@tcb@eqn@list@counter}{1}%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentEnvironment{tcbfigbox}{r<> O{}}
{%
        \par\smallskip%
        \setlength\@tcbfigbox@width{#1}%
        \setlength\@tcbfigbox@skip{\dimexpr(\columnwidth- \@tcbfigbox@width + \hoffset) / 4\relax}%
        \@set@current@tcb@colors{tcbfigboxColorset}%
        \ifstrempty{#2}%
                {\def\@title@sep{}}%
                {\def\@title@sep{\@tcb@title@sep}}%
        \refstepcounter{figbox}%
        \cftfigbox@bookmark%
        \figbox{\@title@sep#2}%
}{\endfigbox}
%}{\endtcolorbox}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\functionarg}{m o}
{%\functionarg{option}[option argument]
        \IfValueTF{#2}
                {{[--#1 \caratenclosed{#2}]}}
                {{[--#1]}}
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                        1 2         3            4                  5 6 7 8                               9
\DeclareDocumentCommand{\functionargdef}{s O{circle} D(){\arabic} D''{tcbBlueScheme} m m o D<>{\@filledenumshape@min@size,\@filledenumshape@inner@sep}}
{%\tcblistboxentrylabel[*<counter on>][shape](counter print format)'color style'{character/text or counter}(min size)<inner sep>
        \@set@length@pair<\@filledenumshape@min@size,\@filledenumshape@inner@sep>=<5mm,0.25pt>%
        \@set@current@tcb@colors{\@current@tcb@coloring}
        \IfValueTF{#7}{\setcounter{@tcb@functions@counter}{#7}}{}
        \IfBooleanTF{#1}
        {%
                \@tcb@functions@arg@font%
                \hspace{\@function@entry@label@hskip}%

                \tcblistboxentrylabel*[#2](#3)%
                        '\@current@tcb@coloring'%
                        {@tcb@functions@counter}%
                        (\@filledenumshape@min@size)%
                        <\@filledenumshape@inner@sep>%
                &\hspace{\@current@listbox@column@sep}%
                \parbox[c]{\@current@listbox@second@column}%
                {\@tcb@functions@text@font\textmathdash\space#6}\\[\@function@argdef@crskip]%
        }
        {%
                \@tcb@functions@arg@font%
                \hspace{\@function@entry@label@hskip}%
                \tcblistboxentrylabel[#2](#3)%
                        '\@current@tcb@coloring'%
                        {#5}%
                        (\@filledenumshape@min@size)%
                        <\@filledenumshape@inner@sep>%
                &\hspace{\@current@listbox@column@sep}%
                \parbox[c]{\@current@listbox@second@column}%
                {\@tcb@functions@text@font\textmathdash\space#6}\\[\@function@argdef@crskip]%
        }
}
%------------------------------------------------------------------------------------------------------------------------------%
%1  2      3                           4                 5                            6 7                             8                                           8                                    9
\DeclareDocumentCommand{\tcbfunctiondesc}
{s D''{t!} O{\usefont{T1}{cmr}{bx}{n}} D(){Description:} D<>{\usefont{T1}{cmr}{m}{n}} m D<>{\@current@listbox@first@column} D<>{\@current@listbox@second@column} O{0.6em}}
{%\tcbfunctiondesc[text formatting]{lst col label}(last col text) <1st col width><last col width>
        \IfBooleanTF{#1}%
                {\gdef\@description@prefix{}}%
                {\gdef\@description@prefix{\textmathdash\space}}%
        \parbox[#2]{#7}{\@tcb@functions@header@font#4}%
        &%
        \hspace{\@current@listbox@column@sep}%
        \parbox[#2]{#8}{\@tcb@functions@text@font\@description@prefix#6}\\[\@function@desc@crskip]
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                        1      2                                 3                4                         5                                    6                                     7
\DeclareDocumentCommand{\tcbfunctionsep}{D''{t} O{\large\usefont{T1}{cmr}{bx}{n}} G{\ul{Options}:} D(){\ul{Option Details}:} D<>{\@current@listbox@first@column} D<>{\@current@listbox@second@column} O{1.2em}}
{%\tcbfunctionsep[<text formatting>]{<lst col label>}(<last col label) <<1st col width>><<last col width>>
        \setlength{\@macro@width}{\widthof{#3}}
        \setlength{\@function@entry@label@hskip}{\dimexpr\@macro@width / 2\relax}
        \parbox[#1]{#5}{\@tcb@functions@header@font#3}
        &\hspace{\@current@listbox@column@sep}\parbox[#1]{#6}{\@tcb@functions@header@font#4}\\[\@function@sep@crskip]%
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbfuncdefboxTitle}{s m o}%
{%
        \IfValueTF{#3}%
        {%
                \@the@hypertitle%
                \IfBooleanTF{#1}{\\[0.5em]\Large\shadowText*:\large:[black]{USAGE\space:\space}}{\space}%
                \shadowText*:\large:[black]{#3}%
        }{\@the@hypertitle}%
        \vspace{1mm}%
}
%\let
%------------------------------------------------------------------------------------------------------------------------------%
\newkeyenvironment{tcbcode}
[enum type={script,function,details}, usage=, firstcol=, secondcol=, bool usagenewline=true, colorscheme=, title=][0]%[1]%
{%
        \begingroup\linespread@settings[context=code]\endgroup%
        \bookmarksetupnext{keeplevel}%
        \refstepcounter{@count@function}
        \xdef\@the@envtype{\commandkey{type}}%
        \ifcommandkey{title}
                {\def\@the@title{\commandkey{title}}}%
                {\def\@the@title{}}%
        \ifcommandkey{colorscheme}%
        {\def\@the@color@scheme{\commandkey{colorscheme}}}%
        {%
                \IfStrEqCase{\@the@envtype}%
                {%
                        {script}{\def\@the@color@scheme{tcbDarkGreenScheme}}
                        {function}{\def\@the@color@scheme{tcbBlueScheme}}
                        {details}{\def\@the@color@scheme{tcbBlueScheme}}
                }%
        }%
        \ifnumcomp{\commandkey{usagenewline}}{=}{1}%
                {\def\@tcb@funcdefbox@Title@command{\tcbfuncdefboxTitle*}}%
                {\def\@tcb@funcdefbox@Title@command{\tcbfuncdefboxTitle}}%
        \ifcommandkey{usage}
                {\def\@the@title@line{\@the@contentsline\@tcb@funcdefbox@Title@command{\@the@title}[\commandkey{usage}]}}%
                {\def\@the@title@line{\@the@contentsline\@tcb@funcdefbox@Title@command{\@the@title}}}%
        \IfStrEqCase{\@the@envtype}%
        {%
                {script}%
                {%
                        \refstepcounter{scriptdef}%
                        \def\@first@column@width{\@function@defbox@first@column}
                        \def\@second@column@width{\@function@defbox@second@column}
                        \def\@the@style{tcbfuncdefboxStyle}
                        \def\@the@contentsline{\bookmarkX@hypertarget{\@counter@name}\cftscriptdef@contentsline{: \texttt{\@the@title}}}%
                        \def\@the@hypertitle{\cftscriptdef@hypertitle*!'%
                                {\shadowText*:\large:'\@the@color@scheme'[black]}'{\@the@title}{}}%
                        \let\@current@listbox@column@sep=\@function@defbox@column@sep%
                        \def\@counter@name{scriptdef}%
                        \def\@bookmark@title{\csname cft\@counter@name @toctitle\endcsname\space:\space\@the@title}
                        \cftscriptdef@bookmark%
                }
                {function}%
                {%
                        \refstepcounter{functiondef}%
                        \def\@first@column@width{\@function@defbox@first@column}
                        \def\@second@column@width{\@function@defbox@second@column}
                        \def\@the@style{tcbfuncdefboxStyle}
                        \def\@the@contentsline{\bookmarkX@hypertarget{\@counter@name}\cftfunctiondef@contentsline{: \texttt{\@the@title}}}%
                        \def\@the@hypertitle{\cftfunctiondef@hypertitle*!'%
                                {\shadowText*:\large:'\@the@color@scheme'[black]}'{\@the@title}{}}%
                        \let\@current@listbox@column@sep=\@function@defbox@column@sep%
                        \def\@counter@name{functiondef}%
                        \def\@bookmark@title{\csname cft\@counter@name @toctitle\endcsname\space:\space\@the@title}
                        \cftfunctiondef@bookmark%
                }
                {details}%
                {%
                        \refstepcounter{functiondefdetail}%
                        \def\@first@column@width{\@function@detail@box@first@column}
                        \def\@second@column@width{\@function@detail@box@second@column}
                        \def\@the@style{tcbfuncdetailboxStyle}
                        \def\@the@contentsline{\bookmarkX@hypertarget{\@counter@name}\cftfunctiondefdetail@contentsline{: \texttt{\@the@title}}}
                        \def\@the@hypertitle{\cftfunctiondefdetail@hypertitle!'%
                                {\shadowText'\@the@color@scheme'}'{\texttt{\@the@title} details:}{}}%
                        \def\@the@title@line{\@the@contentsline\@the@hypertitle}%
                        \let\@current@listbox@column@sep=\@function@detail@box@column@sep%
                        \def\@counter@name{functiondefdetail}%
                        \def\@bookmark@title{\csname cft\@counter@name @toctitle\endcsname\space:\space\@the@title}
                        \cftfunctiondefdetail@bookmark%
                }
        }%
        \ifcommandkey{firstcol}{\def\@funcbox@first@column{\commandkey{firstcol}}}%
        \ifcommandkey{secondcol}{\def\@funcbox@second@column{\commandkey{second}}}%
        \@process@multiarg@list{\@let@keyval@macro@pair}%
        {
                <@current@listbox@first@column=\@first@column@width>;
                <@current@listbox@second@column=\@second@column@width>
        }%
        \@set@current@tcb@colors{\@the@color@scheme}%
        %\def\@bookmark@title{\csname cft\@counter@name @toctitle\endcsname\space:\space\@the@title}
        %\bookmark[dest=\bookmark@hyperaddress{\@counter@name}, rellevel=1]{\@bookmark@title}%{\csname cft\@counter@name @toctitle\endcsname}%
        \addtocounter{table}{-1}
        \begin{tcolorbox}[\@the@style, title={\@the@title@line}]%
        %\raisebox{10pt}{\hypertarget{\bookmark@hyperaddress{\@counter@name}}{}}%
        \hspace{0pt}\begin{longtable}{H{\@current@listbox@first@column} H{\@current@listbox@second@column}}
}{\end{longtable}\end{tcolorbox}}%
%------------------------------------------------------------------------------------------------------------------------------%
%                                       1 2               3                  4                  5 6
\DeclareDocumentEnvironment{tcbdiagram}{s D<>{\linewidth} D''{tcbBlueScheme} O{tcbdiagramStyle} o d()}
{%\tcbdiagram[*]<box width>'color scheme'{style}[title][tcbset options](tcbseteverylayer options)
        \IfValueTF{#5}{\tcbset{#5}}{}%
        \IfValueTF{#6}{\tcbsetforeverylayer{#6}}{}%
        \tcolorbox[#4]%
        \begin{tikzpicture}
}{\end{tikzpicture}\endtcolorbox}%
%------------------------------------------------------------------------------------------------------------------------------%
%******************************************************************************************************************************%
%***************************************************** Currently in development **********************************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
%******************************************************************************************************************************%
%**************************************************** End of 'my-macros.sty' package *****************************************************%
%******************************************************************************************************************************%
% Change @ character back to \catcode'@=12, i.e. a non letter character, so it can be used in macro names/definitions
\makeatother
\endinput
%%------------------------------------------------------------------------------------------------------------------------------%
