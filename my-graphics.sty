%******************************************************************************************************************************%
%***************************************************** `my-graphics.sty' ******************************************************%
%******************************************************************************************************************************%
%
%******************************************************************************************************************************%
%********************************** Define provided package name and LaTeX/package dependencies *******************************%
%******************************************************************************************************************************%
\NeedsTeXFormat{LaTeX2e}[2005/12/01]
\ProvidesPackage{my-graphics}
%******************************************************************************************************************************%
%************************************* Package options and corresponding Boolean variables ************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareOption*{\PackageWarning{my-graphics}{Unknown \CurrentOption}}
%******************************************************************************************************************************%
%************************************************* Processing of package options **********************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
\ProcessOptions\relax
%------------------------------------------------------------------------------------------------------------------------------%
\makeatletter                             % Change @ to standard letter, \catcode'@=11 so it can be used in macro names/definition
%******************************************************************************************************************************%
%************************************************* Package register variables *************************************************%
%******************************************************************************************************************************%
% Three counters
\newcounter{x}
\newcounter{y}
\newcounter{z}

% The angles of x,y,z-axes
\newcommand\xaxis{210}
\newcommand\yaxis{-30}
\newcommand\zaxis{90}

\def\@default@cube@scale{1.0}
\def\@default@cube@rotation{0}
\def\@cube@rotation{\@default@cube@rotation}
%\def\@rotate@cube@around@x{0}
%\def\@rotate@cube@around@y{0}
%\def\@rotate@cube@around@z{0}
%******************************************************************************************************************************%
%******************************************************** Package Body ********************************************************%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
\def\@cube@origin@angle@x{210}
\def\@cube@origin@angle@y{-30}
\def\@cube@origin@angle@z{90}
\def\@default@cube@colors{black,yellow,red,blue}
\def\@default@bicolor@cube@colors{green,orange,cyan}
\def\@default@cube@rotate@around@xyz{0,0,0}
\def\@default@cube@sidelengths{1.0cm,1.0cm,1.0cm}
\def\@set@cube@colors(#1,#2,#3,#4)%
{%
        \def\@edge@color{#1}%
        \def\@top@face@color{#2}%
        \def\@front@face@color{#3}%
        \def\@right@face@color{#4}%
        \def\@bottom@face@color{#2}%
        \def\@back@face@color{#3}%
        \def\@left@face@color{#4}%
}
\def\@set@cube@bicolors(#1,#2,#3)%
{%
        \def\@bottom@face@color{#1}%
        \def\@back@face@color{#2}%
        \def\@left@face@color{#3}%
}
\def\@set@cube@sidelengths(#1,#2,#3)%
{%
        \def\@cube@sidelength@x{#1}%
        \def\@cube@sidelength@y{#2}%
        \def\@cube@sidelength@z{#3}%
}
\def\@set@cube@rotate@around@xyz(#1,#2,#3)%
{%
        \def\@cube@rotate@around@x{#1}%
        \def\@cube@rotate@around@y{#2}%
        \def\@cube@rotate@around@z{#3}%
}
\@init@length{@cube@side@length}[0.5cm]
%------------------------------------------------------------------------------------------------------------------------------%
%\pgfmathparse{ifthenelse(\@macro@width>= \linewidth, 1, 0)}%
%                                \if\pgfmathresult 1\relax%
%                                        \vspace{-12.5mm}%
%                                        \doublespacing%
%                                        \shadowtext{\parbox{\textwidth}{\raggedright#3{#4}}}%
%                                        \vspace{1mm}%
%                                \else%
%                                        \vspace{-6mm}%
%                                        \shadowtext{\raggedright#3{#4}}%
%                                        \vspace{-4mm}%
%                                \fi%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
\newkeycommand\@circle@node
[enum shape={circle,dart}, at={(0,0)}, name={c\Roman{@node@auto@naming}}, scale=1.0, size=6mm, linewidth=0.25pt, colorscheme=current, linewidth=0.5pt,fill=, draw=, outline=]
{%
        \stepcounter{@node@auto@naming}%
        \@set@current@tcb@colors{\commandkey{colorscheme}}%tcbBlueScheme
        \ifcommandkey{draw}%
                {\xdef\@@draw@@{\commandkey{draw}}}%
                {\xdef\@@draw@@{current-coldraw}}%
        \ifcommandkey{fill}%
                {\xdef\@@fill@@{\commandkey{fill}}}%
                {\xdef\@@fill@@{current-colfill}}%
        \ifcommandkey{outline}{\xdef\@draw@{\commandkey{outline}}}{}%
        \node at \commandkey{at}%
        [
            scale=\commandkey{scale},
            name=\commandkey{name},%c\Roman{@node@auto@naming},
            circle,
            fill=\@@fill@@,
            draw=\@@draw@@,
            line width=\commandkey{linewidth},
            %thick,
            inner xsep = 1pt,
            minimum size=\commandkey{size},
            inner sep=0.0mm,
            align=flush center
        ] {};%
}
%------------------------------------------------------------------------------------------------------------------------------%
\newkeycommand\@dart@node
[enum shape={circle,dart}, at={(0,0)}, name={d\Roman{@node@auto@naming}}, scale=1.0, linewidth=0.5pt, colorscheme=current, linewidth=0.25pt,fill=, draw=, outline=]
{%
        %\stepcounter{@node@auto@naming}
        \@set@current@tcb@colors{\commandkey{colorscheme}}%tcbBlueScheme
        \ifcommandkey{draw}%
                {\xdef\@@draw@@{\commandkey{draw}}}%
                {\xdef\@@draw@@{current-coldraw}}%
        \ifcommandkey{fill}%
                {\xdef\@@fill@@{\commandkey{fill}}}%
                {\xdef\@@fill@@{current-colfill}}%
        \ifcommandkey{outline}{\xdef\@@draw@@{\commandkey{outline}}}{}%
        %\def\@@scale@@{\numexpr 2/3*\@scale@\relax}
        %\pgfmathsetmacro\@@scale@@{0.67 * \@scale@ }
        \node at \commandkey{at}%
        [
            anchor=base,
            scale=\@@scale@@,
            dart,
            line width=\commandkey{linewidth},
            draw=\@@draw@@,
            fill=\@@fill@@,
            yshift=-0.75pt,
            shape border uses incircle,
            shape border rotate=90
        ] {};%
}
%------------------------------------------------------------------------------------------------------------------------------%
\newkeycommand\@arrow@node
[enum shape={circle,dart}, at={(0,0)}, name={a\Roman{@node@auto@naming}}, scale=1.0, linewidth=0.5pt, colorscheme=current, linewidth=0.25pt,fill=, draw=, outline=]
{%
        %\stepcounter{@node@auto@naming}
        \@set@current@tcb@colors{\commandkey{colorscheme}}%tcbBlueScheme
        \ifcommandkey{draw}%
                {\xdef\@@draw@@{\commandkey{draw}}}%
                {\xdef\@@draw@@{current-coldraw}}%
        \ifcommandkey{fill}%
                {\xdef\@@fill@@{\commandkey{fill}}}%
                {\xdef\@@fill@@{current-colfill}}%
        \ifcommandkey{outline}{\edef\@@draw@@{\commandkey{outline}}}{}%
        %\edef\@@scale@@{\numexpr 2/3*\@scale@\relax}
        %\pgfmathmultiply{2}{\@scale@}
        %\pgfmathdivide{\@scale@}{4}
        %\pgfmathsetmacro\@@scale@@{0.67 * \@scale@ }
        \node at \commandkey{at}%
        [
                anchor=base,
                scale=\@@scale@@,%\pgfmathresult,%2/3*\@scale@,
                single arrow,
                line width=0.75*\commandkey{linewidth},
                draw=\@@draw@@,
                fill=\@@fill@@,
                yshift=-0.75pt,
                minimum height=8.0mm,
                single arrow head extend=2mm,
                single arrow head indent=.65mm,
                shape border uses incircle,
                shape border rotate=90
        ]{};%
}
%------------------------------------------------------------------------------------------------------------------------------%
\newkeycommand\BMKcircle
[enum shape={arrow,circle,dart}, at={(0,0)}, scale=1.0, linewidth=0.5pt, colorscheme=current, fill={}, draw=, outline=]
{%enum orientation={up,down,left,right},
        \normalsize%
        \xdef\@shape@{\commandkey{shape}}%
        \xdef\@scale@{\commandkey{scale}}%
        \xdef\@linewidth@{\commandkey{linewidth}}%
        \xdef\@size@{\commandkey{size}}%
        \xdef\@at@{\commandkey{at}}%
        \pgfmathsetmacro\@@scale@@{0.67 * \@scale@ }
        \ifcommandkey{draw}%
                {\edef\@draw@{\commandkey{draw}}}%
                {\edef\@draw@{current-coldraw}}%
        \ifcommandkey{fill}%
                {\edef\@fill@{\commandkey{fill}}}%
                {\edef\@fill@{current-colfill}}%
        \xdef\@colorscheme@{\commandkey{colorscheme}}%
        \@set@current@tcb@colors{\@colorscheme@}%tcbBlueScheme
        \ifcommandkey{outline}{\edef\@draw@{\commandkey{outline}}}{}%
        \begin{tikzpicture}%[scale=1.5]
                %\@circle@node[shape=circle, at={\@at@}, name=s, scale=\@scale@, size=13mm, draw=\@draw@, linewidth=\@linewidth@,fill=\@fill@]%at={(frame.north)},
                \@circle@node[shape=circle,  name=s, scale=\@scale@, size=13mm, draw=\@draw@, linewidth=\@linewidth@,fill=\@fill@]%
                \@circle@node[shape=circle, at={(s.center)}, name=t, scale=\@scale@, size=10mm, draw=\@draw@, linewidth=\@linewidth@,fill=white]%
                \@circle@node[shape=circle, at={(s.center)}, name=u, scale=\@scale@, size=7.0mm, linewidth=\@linewidth@, draw=\@draw@, fill=\@fill@]%
                \IfStrEqCase{\@shape@}%
                {%
                        {arrow}{\@arrow@node[at={(u.base)}, scale=\@scale@, linewidth=\@linewidth@,draw=\@draw@,fill=white]}%
                        {dart}{\@dart@node[at={(u.base)}, scale=\@scale@, linewidth=\@linewidth@,draw=\@draw@,fill=white]}%
                        {circle}{\@dart@node[at={(u.base)}, scale=\@scale@, linewidth=\@linewidth@,draw=\@draw@,fill=white]}%
                }%
        \end{tikzpicture}%
}
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\blockstructure}%
{D<>{\@default@cube@scale} D(){\@default@cube@rotate@around@xyz} O{\@default@cube@sidelengths} m O{\@default@cube@colors} d||}
{%{O{\@default@rotate@cube@around@xyz} D<>{\@cube@side@length} m O{black,yellow,red,blue}}
        \xp@cmd\@set@cube@rotate@around@xyz(#2)
        \xp@cmd\@set@cube@sidelengths(#3)
        \xp@cmd\@set@cube@colors(#5)
        \IfValueTF{#6}{\xp@cmd\@set@cube@bicolors(#6)}{}
        \begin{tikzpicture}
        [
                scale=#1,
                x=(\@cube@origin@angle@x:\@cube@sidelength@x),
                y=(\@cube@origin@angle@y:\@cube@sidelength@y),
                z=(\@cube@origin@angle@z:\@cube@sidelength@z),
                %scale=#1, x=#3, y=#4, z=#5,
                %rotate around x=25, rotate around y=25, rotate around z=25
                %cm={-1,0,0,-1,(0,0)},
                %cm={0,-1,1,0,(0,0)},
                %rotate=180,
                rotate around x=\@cube@rotate@around@x,
                rotate around y=\@cube@rotate@around@y,
                rotate around z=\@cube@rotate@around@z
        ]
        {        \foreach \m [count=\y] in {#4}
                {
                        \foreach \n [count=\x] in \m
                        {
                                \ifnum \n>0
                                        \foreach \z in {1,...,\n}
                                        {
                                                % Default:
                                                \@bottom@cube@face{\x}{\y}{\z}{\n}
                                                \@back@cube@face{\x}{\y}{\z}{\n}
                                                \@left@cube@face{\x}{\y}{\z}{\n}
                                                \@right@cube@face{\x}{\y}{\z}{\n}
                                                \@front@cube@face{\x}{\y}{\z}{\n}
                                                \@top@cube@face{\x}{\y}{\z}{\n}
                                                % SOLVeS 2/3/5 (40,-30,0)/(0,40,-30)/(40,-30,30)
%                                                \@top@cube@face{\x}{\y}{\z}{\n}
%                                                \@back@cube@face{\x}{\y}{\z}{\n}
%                                                \@left@cube@face{\x}{\y}{\z}{\n}\@right@cube@face{\x}{\y}{\z}{\n}
%                                                \@right@cube@face{\x}{\y}{\z}{\n}\@left@cube@face{\x}{\y}{\z}{\n}
%                                                \@front@cube@face{\x}{\y}{\z}{\n}
%                                                \@bottom@cube@face{\x}{\y}{\z}{\n}
%                                                % SOLVeS 2/5 (40,-30,0)/(40,-30,30)
%                                                \@top@cube@face{\x}{\y}{\z}{\n}
%                                                \@back@cube@face{\x}{\y}{\z}{\n}
%                                                \@left@cube@face{\x}{\y}{\z}{\n}
%                                                \@front@cube@face{\x}{\y}{\z}{\n}
%                                                \@right@cube@face{\x}{\y}{\z}{\n}
%                                                \@bottom@cube@face{\x}{\y}{\z}{\n}
                                                % SOLVeS 3/4 (0,40,-30)/(40,-30,-60)
%                                                \@back@cube@face{\x}{\y}{\z}{\n}
%                                                \@right@cube@face{\x}{\y}{\z}{\n}
%                                                \@top@cube@face{\x}{\y}{\z}{\n}
%                                                \@bottom@cube@face{\x}{\y}{\z}{\n}
%                                                \@left@cube@face{\x}{\y}{\z}{\n}
%                                                \@front@cube@face{\x}{\y}{\z}{\n}
                                                % SOLVeS 4 (40,-30,-60)
%                                                \@back@cube@face{\x}{\y}{\z}{\n}
%                                                \@right@cube@face{\x}{\y}{\z}{\n}
%                                                \@bottom@cube@face{\x}{\y}{\z}{\n}
%                                                \@left@cube@face{\x}{\y}{\z}{\n}
%                                                \@front@cube@face{\x}{\y}{\z}{\n}
%                                                \@top@cube@face{\x}{\y}{\z}{\n}
                                                %\@left@cube@face{\x}{\y}{\z}{\n}
                                                %\@back@cube@face{\x}{\y}{\z}{\n}
                                                %\@front@cube@face{\x}{\y}{\z}{\n}
                                                %\node [rotate=0.9] at (\x+0.5, \y, \n -1.0) {\n};
                                        }
                                        %\node [rotate=0.9] at (\x+0.5, \y, \n -1.0) {\n};
                                        %\node [rotate=-0]at (\x+0.5, \y, \n-1.0) {\n};
                                        %\node [rotate=45]at (\x+0.5, \y, \n-1.5) {\n};
                                        %\node [rotate=-30]at (\x+0.5, \y, \n-1.4) {\n};
                                \fi
                        }
                }}
        \end{tikzpicture}
%\node [rotate around x=\@cube@rotate@around@x, rotate around y=\@cube@rotate@around@y, rotate around z=\@cube@rotate@around@z] at (\x+0.5, \y, \n-1.0) {\n};
}
%------------------------------------------------------------------------------------------------------------------------------%
%%------------------------------------------------------------------------------------------------------------------------------%
\newkeycommand\cubestack%
[sidelengths=\@default@cube@sidelengths, primary colors=\@default@cube@colors, secondary colors=\@default@cube@colors, rotatexyz=\@default@cube@rotate@around@xyz][1]
{%
        \edef\@rotatexyz{\commandkey{rotatexyz}}%
        \edef\@cube@sidelengths{\commandkey{sidelengths}}%
        \edef\@primary@colors{\commandkey{primary colors}}%
        \edef\@secondary@colors{\commandkey{secondary colors}}%
        %\xp@cmd\@set@cube@sidelengths(\commandkey{sidelengths})
        %\xp@cmd\@set@cube@colors(\commandkey{primary colors})
        %\xp@cmd\@set@cube@rotate@around@xyz(\commandkey{rotatexyz})
        %\ifcommandkey{secondary colors}{\xp@cmd\@set@cube@bicolors(\commandkey{secondary colors})}{}%
        %\expandafter\@set@cube@rotate@around@xyz\expandafter(\expandafter\fullyexpand\expandafter{\commandkey{rotatexyz}})%
        \expandafter\@set@cube@rotate@around@xyz\expandafter(\@rotatexyz)%
        \expandafter\@set@cube@sidelengths\expandafter(\@cube@sidelengths)%
        \expandafter\@set@cube@colors\expandafter(\@primary@colors)%
        \ifcommandkey{secondary colors}{\expandafter\@set@cube@bicolors\expandafter(\@secondary@colors)}{}
        %\blockstructure{#1}
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@top@cube@face}{m m m m}
{%
        %\node [rotate=0.9]at (\x+0.5, \y, \n-1.4) {\n};
        \draw [fill=\@top@face@color,draw=\@edge@color] (#1,#2,#3) -- (#1+1,#2,#3) -- (#1+1, #2+1, #3) -- (#1, #2+1, #3) -- cycle;
        %\node [rotate=0] at (#1+0.5, #2, #4-1.0) {#4};
        %\node [rotate around x=0, rotate around y=0, rotate around z=0]at (\x+0.5, \y, \n-1.0) {\n};
        %\node [rotate=0.9]at (#1+0.5, #2+0.5, #4) {#4};
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@bottom@cube@face}{m m m m}
{%
      \draw [fill=\@bottom@face@color,draw=\@edge@color] (#1,#2,#3-1) -- (#1+1,#2,#3-1) -- (#1+1, #2+1, #3-1) -- (#1, #2+1, #3-1) -- cycle;
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@front@cube@face}{m m m m}
{%
        \draw [fill=\@front@face@color, draw=\@edge@color] (#1+1,#2,#3) -- (#1+1,#2+1,#3) -- (#1+1, #2+1, #3-1) -- (#1+1, #2, #3-1) -- cycle;
        %\node [rotate=-0]at (#1+0.5, #2, #4-1.4) {#4};
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@back@cube@face}{m m m m}
{%
        \draw [fill=\@back@face@color, draw=\@edge@color] (#1,#2,#3) -- (#1,#2+1,#3) -- (#1, #2+1, #3-1) -- (#1, #2, #3-1) -- cycle;
        %\node [rotate=0]at (#1-0.4, #2, #4-2.1) {#4};
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@right@cube@face}{m m m m}
{%
        \draw [fill=\@right@face@color,draw=\@edge@color] (#1,#2+1,#3) -- (#1+1,#2+1,#3) -- (#1+1, #2+1, #3-1) -- (#1, #2+1, #3-1) -- cycle;
        %\node [rotate=-0]at (#1+0.5, #2, #4-1.4) {#4};
}
%------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\@left@cube@face}{m m m m}
{%
        \draw [fill=\@left@face@color,draw=\@edge@color] (#1,#2,#3) -- (#1+1,#2,#3) -- (#1+1, #2, #3-1) -- (#1, #2, #3-1) -- cycle;
        %\node [rotate=0]at (#1-0.4, #2, #4-2.1) {#4};
}
%------------------------------------------------------------------------------------------------------------------------------%
%******************************************************************************************************************************%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Document section header Tikx content ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%******************************************************************************************************************************%
%------------------------------------------------------------------------------------------------------------------------------%
%                                                         1  2
%3                                       4                          5 6
\DeclareDocumentCommand{\@header@tikzpicture@pagenum@node}{s D<>{\@tikzheading@xshift} D<>{\@tikzheading@node@yshift} O{current page.south} m D<>{\@tikzheading@baseheight}}
{%{Chapter title}
        \begin{tikzpicture}[remember picture,overlay]%[#2]%[remember picture]%%[remember picture]%
                \node%
                [%
                        circle,
                        anchor=center,
                        draw=majorSectionHeading-coldraw,
                        fill=white,
                        minimum size=9mm,
                        xshift=\dimexpr 0mm\relax,
                        yshift=\dimexpr#3 + \footskip +\f@size\p@\relax,
                        line width=\@tikzheading@title@linewidth,
                        font=\footnotesize%\@tikzheading@font
                ] at (#4)%%
                {#5};
        \end{tikzpicture}%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                                 1  2   3   4   5                                 6        7
\DeclareDocumentCommand{\@header@tikzpicture@rect@node}{s O{}}
{%{Chapter title}
                \draw[fill=majorSectionHeading-colback, line width=\@tikzheading@linewidth, draw=black]
                        (0,0) rectangle (0.9\@tikzheading@width, \@tikzheading@height);%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                                 1  2   3   4   5                                 6        7
\DeclareDocumentCommand{\@header@tikzpicture@titlenode}{s O{} m}
{%{Chapter title}
                \node%
                [%
                        anchor=\@tikzheading@anchor,
                        draw=majorSectionHeading-coldraw, fill=majorSectionHeading-colbacktitle,
                        rounded rectangle, rounded rectangle arc length=\@tikzheading@rounded@arclength,
                        xshift=\@tikzheading@title@xshift,
                        inner xsep=\@tikzheading@inner@xsep, inner ysep=\@tikzheading@inner@ysep,
                        line width=\@tikzheading@title@linewidth, font=\@tikzheading@font
                ]%
                {#3};
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                                 1  2   3   4   5                                 6        7
\DeclareDocumentCommand{\@header@tikzpicture@node}{s O{} m}
{%{Chapter title}
        \begin{tikzpicture}[#2]%[remember picture]%%[remember picture]%
                \@header@tikzpicture@rect@node[#2]%
                \IfBooleanTF{#1}{}{\@header@tikzpicture@titlenode[#2]{#3}}%
        \end{tikzpicture}%
}
%------------------------------------------------------------------------------------------------------------------------------%
%                                                      1 2
% 3                                      4                          5 6
\DeclareDocumentCommand{\@header@tikzpicture@nodewrap}{s D<>{\@tikzheading@xshift} D<>{\@tikzheading@node@yshift} O{current page.north west} m D<>{\@tikzheading@baseheight}}
{%{Chapter title}
        \setlength\@tikzheading@height{#6}%2cm
        \begin{tikzpicture}[remember picture,overlay]%[remember picture]%
                \node (secheading) [xshift=0mm, yshift=#3] at (#4)%
                {%
                        \IfBooleanTF{#1}%
                                {\@header@tikzpicture@node*[remember picture,overlay]{#5}}%
                                {\@header@tikzpicture@node[remember picture,overlay]{#5}}%
                 };%
        \end{tikzpicture}%
}
%******************************************************************************************************************************%
%********************************************** End of 'my-graphics.sty' package **********************************************%
%******************************************************************************************************************************%
% Change @ character back to \catcode'@=12, i.e. a non letter character, so it can be used in macro names/definitions
\makeatother
%------------------------------------------------------------------------------------------------------------------------------%
\endinput
%\newkeycommand\cubestack%
%[sidelengths=\@default@cube@sidelengths, primary colors=\@default@cube@colors, secondary colors=\@default@cube@colors, rotatexyz=\@default@cube@rotate@around@xyz, scale=\@default@cube@scale][1]
%{%
%        \xdef\@cube@sidelengths{\commandkey{sidelengths}}%
%        \xdef\@cube@scale{\commandkey{scale}}%
%        \gdef\@rotatexyz{\commandkey{rotatexyz}}%
%        \xdef\@primary@colors{\commandkey{primary colors}}%
%        \xdef\@secondary@colors{\commandkey{secondary colors}}%
%        %\xp@cmd\@set@cube@sidelengths(\commandkey{sidelengths})
%        %\xp@cmd\@set@cube@colors(\commandkey{primary colors})
%        %\xp@cmd\@set@cube@rotate@around@xyz(\commandkey{rotatexyz})
%        %\ifcommandkey{secondary colors}{\xp@cmd\@set@cube@bicolors(\commandkey{secondary colors})}{}%
%        %\expandafter\@set@cube@rotate@around@xyz\expandafter(\expandafter\fullyexpand\expandafter{\commandkey{rotatexyz}})%
%        %\expandafter\@set@cube@rotate@around@xyz\expandafter(\@rotatexyz)%
%        %\expandafter\@set@cube@sidelengths\expandafter(\@cube@sidelengths)%
%        %\expandafter\@set@cube@colors\expandafter(\@primary@colors)%
%        %\ifcommandkey{secondary colors}{\expandafter\@set@cube@bicolors\expandafter(\@secondary@colors)}{}
%        \blockstructure{#1}
%        %\blockstructure<\@cube@scale>(\@rotatexyz)[\@cube@sidelengths]{#1}[\@primary@colors]|\@secondary@colors|
%}
%------------------------------------------------------------------------------------------------------------------------------%
%\pgfmathparse{ifthenelse(\@macro@width>= \linewidth, 1, 0)}%
%                                \if\pgfmathresult 1\relax%
%                                        \vspace{-12.5mm}%
%                                        \doublespacing%
%                                        \shadowtext{\parbox{\textwidth}{\raggedright#3{#4}}}%
%                                        \vspace{1mm}%
%                                \else%
%                                        \vspace{-6mm}%
%                                        \shadowtext{\raggedright#3{#4}}%
%                                        \vspace{-4mm}%
%                                \fi%
