%*****************************************************************************************************************************************%
%*********************************************************** `my-styles.sty' *************************************************************%
%*****************************************************************************************************************************************%
% This is an adaptation of the 'glossaries' package's 'glossary-hypernav.sty' component implementing the 'indexhypergroup' glossary style selected using the
% \setglossarystyle{indexhypergroup} command
%*****************************************************************************************************************************************%
%*************************************** Define provided package name and LaTeX/package dependencies *************************************%
%*****************************************************************************************************************************************%
\ProvidesPackage{my-styles}
%*****************************************************************************************************************************************%
%****************************************** Package options and corresponding Boolean variables ******************************************%
%*****************************************************************************************************************************************%
%-----------------------------------------------------------------------------------------------------------------------------------------%
\DeclareOption*{\PackageWarning{my-styles}{Unknown \CurrentOption}}
%*****************************************************************************************************************************************%
%***************************************************** Processing of package options *****************************************************%
%*****************************************************************************************************************************************%
\ProcessOptions\relax
%-----------------------------------------------------------------------------------------------------------------------------------------%
%\makeatletter						% Change @ to standard letter, \catcode'@=11 so it can be used in macro names/definition
%\catcode`\!=12
%\catcode`|=12
%\catcode`\!=12
%*****************************************************************************************************************************************%
%************************************************************* Package Body **************************************************************%
%*****************************************************************************************************************************************%
%\draw (current bounding box.north east) rectangle (current bounding box.south west);
%-----------------------------------------------------------------------------------------------------------------------------------------%
%--------------------------------------------------------- Tikz/tcolorbox macro/command definitions ----------------------------------------------------------%
%-----------------------------------------------------------------------------------------------------------------------------------------%
\def\@IBP@arrow@head{Stealth[length = 12pt, fill=green, width=5pt]}
%\def\@IBP@diag@arrow@tail{Computer Modern Rightarrow[sharp, fill=green,length=4pt, width=2.5pt, reversed]}
\def\@IBP@diag@arrow@tail{Latex[length = 11pt, reversed, fill=green, width=3.0pt]}%, inset = 1pt
\def\@IBP@arrow@lines{draw=IBPstyle-colline, font=\boldmath, line width=0.75pt, text=black}
%\def\liftedshadow{lifted shadow={1mm}{-2mm}{3mm}{0.1mm}{current-colbacktitle}}
%-----------------------------------------------------------------------------------------------------------------------------------------%
\def\setfillednumcolors#1%
{
	\colorlet{fillednumshape-colfill}{#1-colfill}
	\colorlet{fillednumshape-colfilltext}{#1-colfilltext}
}
%-----------------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\tcbsetcurrentcolors}{m}
{
	\colorlet{fillednumshape-colfill}{#1-colfill}
	\colorlet{fillednumshape-colfilltext}{#1-colfilltext}
	\colorlet{current-colback}{#1-colback}
	\colorlet{current-colbackupper}{#1-colbackupper}
	\colorlet{current-colbacklower}{#1-colbacklower}
	\colorlet{current-colbacktitle}{#1-colbacktitle}
	\colorlet{current-colbackinterior}{#1-colbackinterior}
	\colorlet{current-colupper}{#1-colupper}
	\colorlet{current-collower}{#1-collower}
	\colorlet{current-colframe}{#1-colframe}
	\colorlet{current-colleftframe}{#1-colleftframe}
	\colorlet{current-colrightframe}{#1-colrightframe}
	\colorlet{current-colframeborder}{#1-colframeborder}
	\colorlet{current-colframeoutline}{#1-colframeoutline}
	\colorlet{current-colinteriorborder}{#1-colinteriorborder}
	\colorlet{current-colinterioroutline}{#1-colinterioroutline}
	\colorlet{current-coltitle}{#1-coltitle}
	\colorlet{current-coltext}{#1-coltext}
	\colorlet{current-coltextshadowbase}{#1-coltextshadowbase}
	\colorlet{current-coldraw}{#1-coldraw}
	\colorlet{current-colfill}{#1-colfill}
	\colorlet{current-colfilltext}{#1-colfilltext}
	\colorlet{current-lightcol}{#1-lightcol}
	\colorlet{current-darkcol}{#1-darkcol}
	\colorlet{current-rulecolor}{#1-rulecolor}
	\colorlet{current-highlightcol}{#1-highlightcol}
	\colorlet{current-colboxshadow}{#1-colboxshadow}
	\colorlet{current-coltextshadow}{#1-coltextshadow}
	\edef\@current@tcb@coloring{#1}
}
%-----------------------------------------------------------------------------------------------------------------------------------------%
%-------------------------------------------------------------- Tikz/tcolorbox styles/settings ---------------------------------------------------------------%
%-----------------------------------------------------------------------------------------------------------------------------------------%
\tikzset
{	
	,>=stealth', thick, black!50, text=black, %arrows =-{Stealth[length=5mm]}, %arrows = -{Triangle[open, angle=60:3mm]},	
%-----------------------------------------------------------------------------------------------------------------------------------------%
	fontscale/.style = {font=\relsize{#1}},
	textonly/.style={minimum size=0pt, draw=diagram-text-coldraw, top color=diagram-text-topcolor, bottom color=diagram-text-bottomcolor},%, font=\large},
	D/.style={rectangle, minimum size=1pt, line width=4ex, very thick, draw=diagram-dir-coldraw, top color=diagram-dir-topcolor, bottom color=diagram-dir-bottomcolor, font=\itshape},
	F/.style={rectangle, rounded corners=5pt, minimum size=1mm, line width=4ex, very thick, draw=diagram-file-coldraw, top color=diagram-file-topcolor, bottom color=diagram-file-bottomcolor, font=\itshape},
	end/.style={rectangle, rounded corners=5pt, minimum size=4mm, line width=4ex, very thick, draw=diagram-end-coldraw, top color=diagram-end-topcolor, bottom color=diagram-end-bottomcolor, font=\itshape},
	pt/.style={draw,inner sep=0pt,minimum size=0.3pt,fill=diagram-point-colfill},
graphs/every graph/.style={edges=rounded corners},
	skip loop/.style={to path={-- ++(0,#1) -| (\tikztotarget)}},
	every new ->/.style={shorten >=0pt},
%-----------------------------------------------------------------------------------------------------------------------------------------%
	chapterFormatCode/.style=
   	{%
   		code={\begin{tikzpicture}[remember picture, overlay]
	    		\node[xshift=3.15cm, yshift=1cm] at (current page.north west)
	      	{%
	      		\begin{tikzpicture}[remember picture, overlay]
	        			\draw[fill=LightSkyBlue] (0,0) rectangle (\paperwidth,2cm);
	        			\node
	        			[
	        				anchor=east, xshift=.9\paperwidth, rectangle, rounded corners=20pt, inner sep=11pt,
	        				fill=MidnightBlue
	        			]
	              		{\color{white}\chapterlabel#1};
	       		\end{tikzpicture}
	     	 	};
	   	\end{tikzpicture}}
   	},
   	% Arc Barb[length=2pt], Diamond[open] , Kite[]
	%Latex, Stealth, Straight Barb[length=5pt,width=5pt], Straight Barb[angle=60:2pt 3], Kite[]
   	IBPdiagArrows/.style=
   	{% 	Arc Barb[length=2pt], Diamond[open] , Kite[]
		%Latex, Stealth, Straight Barb[length=5pt,width=5pt], Straight Barb[angle=60:2pt 3], Kite[] 	
   		draw=IBPstyle-colline, font=\boldmath, line width=0.75pt, text=black,
   		{\@IBP@diag@arrow@tail}-{\@IBP@arrow@head}
   	},
   	IBPhorizArrows/.style=
   	{%
   		draw=IBPstyle-colline, font=\boldmath, line width=0.75pt, text=black,
   		{\@IBP@diag@arrow@tail}-{\@IBP@arrow@head}
   	},
   	weird fill/.style=
	{%
		append after command=
		{
   			\pgfextra
       	 	\draw[sharp corners, fill=#1]%
    			(\tikzlastnode.west)%
    			[rounded corners=3pt] |- (frame.north east)%
    			[rounded corners=1pt] -| (frame.north west)%
    			[rounded corners=5pt] |- (title.south west)%
    			[rounded corners=0pt] -| (title.south east);
   			\endpgfextra%
   		}
   	}%
}		
%\makeatletter
%\def\mycommand#1\pgfeov{%
%    \mycommand@#1++\pgfeov%
%}
%\def\mycommand@#1+#2+#3\pgfeov{%
%    Argument=#1, Option=#2.%
%}
%\pgfkeyslet{/example/.@cmd}{\mycommand}
%\makeatother
%\pgfkeysdefargs{/my key}{#1+#2}{\def\a{#1}\def\b{#2}}
%\pgfkeys{/my key=hello+world}
\pgfkeysdefargs{/my theekey}{(#1)[#2]<#3><#4>}{\edef\a{#1}\edef\b{#2}\edef\c{#3}\edef\f{#4}}
%\pgfkeys{/my key={(colback=blue)[colframe=red]<coltext=green><enhanced>}}
\pgfkeys{/akey/.code={colback=#1}}
\pgfkeys{/bkey/.code={colframe=#1}}
\pgfkeys{/my style/.style={/akey=green, /bkey=blue}}%,/a=#1}}
%\pgfkeys{/my style=red}
%\pgfkeysdefnargs{/my keyB}{2}{#1, #2.}
%%\pgfkeysdefnargs{/my key}{2}{\def\a{#1}\def\b{#2}}
%\pgfkeys{/my keyB={hello}{there}}
%-----------------------------------------------------------------------------------------------------------------------------------------%
%--------------------------------- Tikz/tcolorbox styles/settings ------------------------------%
%-----------------------------------------------------------------------------------------------------------------------------------------%
\tcbset
{%
	addtolol/.code={\phantomsection\addcontentsline{lol}{subsection}{\large#1}},
	addtolol/.default={\kvtcb@title},
	%IfNoValueTF/.code args={#1#2#3}{\IfNoValueTF{#1}{\pgfkeysalso{#2}}{\pgfkeysalso{#3}}},
  	testStyleArgs/.style 2 args={colback=#1,colframe=#2,coltitle=#1},%,coltitle=#3},
    	testStyleArgsB/.style n args={4}%
    	{%
    		code={\pgfkeys{/my theekey={(#1)[#2]<#3><#4>}}},
    		colback=\a, colframe=\b, coltitle=\c, coltext=\f
    	},
    	testStyleArgsB/.default={green}{red}{yellow}{blue},
    	%testStyleArgs/.default={red}{green},%{green}{green},
%*************************************************************************************************%
%******************************************* Title *********************************************%
%*************************************************************************************************%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%-------------------------------------------------------------------------------------------------%
    	save height/.code={%
    \tcbset{breakable}%
    \providecommand{#1}{2cm}%
    \def\tcb@split@start{%
      \tcb@breakat@init%
      \tcb@comp@h@page%
      \def\tcb@ch{%
        \tcbset{height=\tcb@h@page}%
        \tcbdimto#1{#1+\tcb@h@page-\tcb@natheight}%
        \immediate\write\@auxout{\string\gdef\string#1{#1}}%
        \tcb@ch%
      }%
      \tcb@drawcolorbox@standalone%
    }%
  },%
%*************************************************************************************************%
%******************************************* Title *********************************************%
%*************************************************************************************************%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%-------------------------------------------------------------------------------------------------%
	subtitleStyle/.style args={#1#2#3}
	{	
    		subtitle style=
    		{
    			colback=#1-colback, coltext=#1-coltext, boxrule=#2, left=#3,
    			right=#3
    		}
    	},     	
    	subtitleStyle/.default={current}{-1pt}{4.1pt},
	%titleSepCode/.style n args={4}
	titleSepCode/.style=
	{	
    		% Horizontal line on title/interior edge connecting north east/west interior border
        	title code=
	  	{
			\path[draw=#1-colinteriorborder, use as bounding box,
				line width=\@title@interior@sep@linewidth]
				([xshift=-\@title@sep@xshift, yshift=-\@title@sep@yshift]title.south west)
				--([xshift=\@title@sep@xshift,yshift=-\@title@sep@yshift]title.south east);
		}
	},
	filledTitleSepCode/.style args={#1#2}
	{
		% Outline along boundary between title and interior
        	title code=
	  	{
			\filldraw[draw=#1-colinteriorborder, fill=#1-colbacktitle,
				rounded corners=\@interior@corner@radius, line width=#2]
				([xshift=0pt, yshift=0pt]title.south west)
				--([xshift=0pt, yshift=0pt]title.north west)	
				--([xshift=0pt, yshift=0pt]title.north east)	
				--([xshift=0pt, yshift=0pt]title.south east);	
		}		
	},
	filledTitleSepCode/.default={current}{\@title@interior@sep@linewidth},	
%-------------------------------------------------------------------------------------------------%
	attachBoxedTitleTopCenter/.style=
	{%attachBoxedTitleTopCenter{yshift=0.25mm}{yshifttext=2mm}
		attach boxed title to top center=
			{yshift=-0.25mm-\tcboxedtitleheight/2, yshifttext=2mm-\tcboxedtitleheight/2}
	},		
%*************************************************************************************************%
%******************************************* Frame ******************************************%
%*************************************************************************************************%
%-------------------------------------------------------------------------------------------------%
	%frameCodeSetup/.style n args={4}
    	frameCodeSetup/.style=
    	{
    		frame code=
        	{% Outter frame around entire box and title
        		\filldraw[draw=#1-colframeborder, rounded corners=\@frame@corner@radius,
        			fill=#1-colfill, line width=\@frame@border@linewidth]
        			(frame.north east)
        			--(frame.north west)
        			--(frame.south west)
        			--(frame.south east)
        			-- cycle;
        	}
    	},
%-------------------------------------------------------------------------------------------------%
    	titleframeComboSetup/.style=
    	{
	    	frame code=
		{
		  	\node
			[
				anchor=south west, inner xsep=8pt, xshift=8pt, rounded corners=\@frame@corner@radius,
				font=\bfseries\color{white}, fill=current-darkcol, draw=current-colframeborder, line width=1.5pt
			]%
			at (frame.north west) (tit) {\shadowText<\large\sffamily\bfseries>{\ul{Contents:}}};
			\draw[line width=8pt, rounded corners=\@frame@corner@radius, draw=current-colframeborder]%
				(tit.west)
				-| ([xshift=0pt, yshift=-6pt]frame.south west)
				-- ([xshift=13pt, yshift=-6pt]frame.south west);
		  	\draw[line width=2pt, rounded corners=\@frame@corner@radius, draw=current-darkcol, double=current-highlightcol, double distance=0.75pt]%
				(tit.west)
				-| ([xshift=0pt, yshift=-6pt]frame.south west)
				-- ([xshift=13pt, yshift=-6pt]frame.south west);
		}
	},
%*************************************************************************************************%
%******************************************* Interior ******************************************%
%*************************************************************************************************%
%-------------------------------------------------------------------------------------------------%
	%interiorCode/.style n args={4}
	interiorCode/.style=
	{	
		interior titled code=
        	{% Frame around interior region except for top line under title
        		\filldraw[draw=#1-colinteriorborder, line width=\@interior@border@linewidth,
        			fill=#1-colbackinterior, rounded corners=\@interior@corner@radius]
        			([xshift=0pt, yshift =0pt]interior.north east)
        			--([xshift=0pt, yshift =0pt]interior.south east)
        			--([xshift=0pt, yshift=0pt]interior.south west)
        			--([xshift=0pt, yshift=0pt]interior.north west);
        	},
        	interior code=
        	{       		
        		\filldraw[draw=#1-colinteriorborder, fill=#1-colbackinterior,
        		rounded corners=\@interior@corner@radius,
        		line width=\@interior@border@linewidth]
        			(interior.north east)
        			--(interior.north west)
				--(interior.south west)
				--(interior.south east)
				-- cycle;
        	}
	},
%-------------------------------------------------------------------------------------------------%
	%multilineInteriorCode/.style n args={4}
	multilineInteriorCode/.style=
	{	
		boxrule=2pt,
		interior titled code=
        	{% Frame around interior region except for top line under title
        		\filldraw[draw=#1-coldraw, rounded corners=\@interior@corner@radius,
        			fill=#1-colbackinterior, line width=\@interior@border@linewidth,
				double=#1-highlightcol, double distance=\@interior@double@distance]
        			([xshift=0pt, yshift =0pt]interior.north east)
        			--([xshift=0pt, yshift =0pt]interior.south east)
        			--([xshift=0pt, yshift=0pt]interior.south west)
        			--([xshift=0pt, yshift=0pt]interior.north west);
        	},
        	interior code=
        	{       		
        		\filldraw[draw=#1-coldraw, rounded corners=\@interior@corner@radius,
        			fill=#1-colbackinterior, line width=\@interior@border@linewidth,
				double=#1-highlightcol, double distance=\@interior@double@distance]
        			(interior.north east)
        			--(interior.north west)
				--(interior.south west)
				--(interior.south east)
				-- cycle;
        	}
	},
%-------------------------------------------------------------------------------------------------%
	interiorStyle/.style=
	{
        	interior style=
			{draw=#1-colinteriorborder, line width=\@interior@border@linewidth, rounded corners=\@interior@corner@radius}
	},
%-------------------------------------------------------------------------------------------------%
	interiorMultilineStyle/.style=
	{
        	interior style=
		{
			draw=#1-coldraw, line width=\@interior@border@linewidth,
			double=#1-highlightcol, double distance=\@interior@double@distance, rounded corners=\@interior@corner@radius
		}
	},
%-------------------------------------------------------------------------------------------------%
    	biColorInteriorStyle/.style=
    	{
    		interior style=
		{
			draw=#1-colinteriorborder, line width=\@interior@border@linewidth,
			top color=blue!2!white, middle color=blue!6!white, bottom color=blue!13!white, rounded corners=\@interior@corner@radius
		}
	},
%-------------------------------------------------------------------------------------------------%
	biColorMultilineInteriorStyle/.style=
    	{
    		interior style=
		{
			draw=#1-coldraw, line width=\@interior@border@linewidth,
			double=#1-highlightcol, double distance=\@interior@double@distance,
			top color=blue!2!white, middle color=blue!6!white, bottom color=blue!13!white, rounded corners=\@interior@corner@radius
		}
	},
%-------------------------------------------------------------------------------------------------%
	titleframeComboInteriorSetup/.style=
    	{
		interior titled code=
        	{% Frame around interior region except for top line under title
        		\draw[draw=current-colinteriorborder, rounded corners=1pt,
	        		fill=current-colinteriorborder, line width=5pt]
	        		([yshift=-1pt]interior.north east)
	        		--([xshift=10pt, yshift=-1pt]interior.north west)
				--([xshift=10pt, yshift=-1pt]interior.south west)
				--([yshift=-1pt]interior.south east)
				-- cycle;
			\filldraw[draw=current-coldraw, rounded corners=1pt,
	        		fill=current-colbackinterior, line width=1pt,
				double=current-highlightcol, double distance=0.5pt]
	        		([yshift=-1pt]interior.north east)
	        		--([xshift=10pt, yshift=-1pt]interior.north west)
				--([xshift=10pt, yshift=-1pt]interior.south west)
				--([yshift=-1pt]interior.south east)
				-- cycle;
        	},
        	interior code=
	      {       		
	        	\draw[draw=current-colinteriorborder, rounded corners=1pt,
	        		fill=current-colinteriorborder, line width=5pt]
	        		([yshift=-1pt]interior.north east)
	        		--([xshift=10pt, yshift=-1pt]interior.north west)
				--([xshift=10pt, yshift=-1pt]interior.south west)
				--([yshift=-1pt]interior.south east)
				-- cycle;
			\filldraw[draw=current-coldraw, rounded corners=1pt,
	        		fill=current-colbackinterior, line width=1pt,
				double=current-highlightcol, double distance=0.5pt]
	        		([yshift=-1pt]interior.north east)
	        		--([xshift=10pt, yshift=-1pt]interior.north west)
				--([xshift=10pt, yshift=-1pt]interior.south west)
				--([yshift=-1pt]interior.south east)
				-- cycle;
	      }
	},
%-------------------------------------------------------------------------------------------------%
    	terminalSegmentationCode/.style=
    	{
    		segmentation code=
		{	% Bottom portion of comment section	
			\filldraw[fill=#1-colbacklower, draw=#1-coldraw, rounded corners=6pt, line width=0.0pt]
				([xshift=0.5pt, yshift=0.5pt]interior.south west)
				-- ([xshift=-0.5pt, yshift=0.5pt]interior.south east)
				-- ([xshift=-0.5pt, yshift=-2pt]segmentation.north east)
				-- ([xshift=0.5pt, yshift=-2pt]segmentation.north west)
				-- cycle;,
			% Top portion of comment section	
			\filldraw[fill=#1-colbacklower, draw=#1-colbacklower, sharp corners, line width=1.0pt]
				([xshift=1.25pt, yshift=-2.75pt]segmentation.north west)
				-- ([xshift=-1.25pt, yshift=-2.75pt]segmentation.north east)
				-- ([xshift=-1.25pt, yshift=-12pt]segmentation.north east)
				-- ([xshift=1.25pt, yshift=-12pt]segmentation.north west)
				-- cycle;,
			% Line around comment connecting the ends of the line separating terminal and comment sections	
			\path[draw=#1-coldraw, rounded corners=6pt, line width=1.0pt]
				([xshift=0.75pt, yshift=-2.2pt]segmentation.north west)
				-- ([xshift=0.75pt, yshift=0.5pt]interior.south west)
				-- ([xshift=-0.75pt, yshift=0.5pt]interior.south east)
				-- ([xshift=-0.75pt, yshift=-2.2pt]segmentation.north east);,
			% Line separating terminal and comment sections	
			\path[draw=#1-rulecolor, line width=1.25pt]
				([xshift=0.2pt, yshift=-2.6pt]segmentation.north west)
				-- ([xshift=-0.2pt, yshift=-2.6pt]segmentation.north east);,
			% Line separating terminal and comment sections	
			\path[draw=#1-segmentationcol, line width=1.5pt]
				([xshift=0.15pt, yshift=-1.6pt]segmentation.north west)
				-- ([xshift=-0.15pt, yshift=-1.6pt]segmentation.north east);			
		}
	},
%		segmentation code=
%		{	% Bottom portion of comment section	
%			\filldraw
%			[
%				fill=tcbbashboxgoldStyle-colbacklower, draw=tcbbashboxgoldStyle-colbacklower,
%				sharp corners, line width=0.0pt
%			]
%				([xshift=1.00pt, yshift=0.0pt]interior.south west)
%				-- ([xshift=-1.00pt, yshift=0.0pt]interior.south east)
%				-- ([xshift=-1.00pt, yshift=-0.0pt]segmentation.north east)
%				-- ([xshift=1.00pt, yshift=-0.0pt]segmentation.north west)
%				-- cycle;,			
%			% Line around comment connecting the ends of the line separating terminal and comment sections	
%			\path[draw=tcbbashboxgoldStyle-colinterioroutline, rounded corners=6pt, line width=1.25pt]
%				([xshift=0.5pt, yshift=-0.5pt]segmentation.north west)
%				-- ([xshift=0.5pt, yshift=0.5pt]interior.south west)
%				-- ([xshift=-0.5pt, yshift=0.5pt]interior.south east)
%				-- ([xshift=-0.5pt, yshift=-0.5pt]segmentation.north east);
%			% Line separating terminal and comment sections	
%			\path[draw=tcbbashboxgoldStyle-segmentationcol, line width=1.0pt]
%				([xshift=0.0pt, yshift=-0.0pt]segmentation.north west)
%				-- ([xshift=-0.0pt, yshift=-0.0pt]segmentation.north east);,
%			\path[draw=tcbbashboxgoldStyle-rulecolor, line width=1.0pt]
%				([xshift=0.25pt, yshift=-1.0pt]segmentation.north west)
%				-- ([xshift=-0.25pt, yshift=-1.0pt]segmentation.north east);%,
%		},
%*************************************************************************************************%
%******************************************* Interior ******************************************%
%*************************************************************************************************%
%-------------------------------------------------------------------------------------------------%
	PLDBoxedTitleSetup/.style n args={5}
	{%{xshift}{yshift}{line width}{rounded corners}{color style} 		
		%{2pt}{8.5}{4.0pt}{6pt}{pldStyle}
		titleSepCode, frameCodeSetup, interiorMultilineStyle%, multilineInteriorCode,      	
	},
%-------------------------------------------------------------------------------------------------%
   	topLeftSectionTitleStyle/.style=
	{
		boxed title style=
		{
			empty, size=minimal, toprule=\@boxed@title@top, top=\@boxed@title@top, %bottom=\@boxed@title@top,
			overlay=
			{
				\draw
				[
					#1-coldraw, line width=\@boxed@title@linewidth,
					double=#1-highlightcol, double distance=\@overlay@double@distance
				]
				([yshift=\@overlay@yshift]frame.north west)
				--([yshift=\@overlay@yshift]frame.north east);
			}
		},
		overlay unbroken=
		{
			\draw
	        	[
	        		#1-coldraw, line width=\@overlay@linewidth, 			
	        		double=#1-highlightcol, double distance=\@overlay@double@distance
	        	]
	        	([yshift=\@overlay@yshift]title.north east)
			--([xshift=\@overlay@xshift,yshift=\@overlay@yshift]title.north-|frame.east)
			--([xshift=\@overlay@xshift]frame.south east)
			--(frame.south west);
		},
		overlay first=
		{
	        	\draw
			[
			   	#1-coldraw, line width=\@overlay@linewidth,
				double=#1-highlightcol, double distance=\@overlay@double@distance
			]
	        	([yshift=\@overlay@yshift]title.north east)
	        	--([xshift=\@overlay@xshift,yshift=\@overlay@yshift]title.north-|frame.east)
	        	--([xshift=\@overlay@xshift]frame.south east);
		},
		overlay middle=
		{
	        	\draw
			[
				#1-coldraw, line width=\@overlay@linewidth,
				double=#1-highlightcol, double distance=\@overlay@double@distance
			]
	        	([xshift=\@overlay@xshift]frame.north east)
	        	--([xshift=\@overlay@xshift]frame.south east);
		},
		overlay last=
		{
	        	\draw
			[
				#1-coldraw, line width=\@overlay@linewidth,
				double=#1-highlightcol, double distance=\@overlay@double@distance
			]
	        	([xshift=\@overlay@xshift]frame.north east)
	        	--([xshift=\@overlay@xshift]frame.south east)
	        	--(frame.south west);
		}
	},
%-------------------------------------------------------------------------------------------------%
	topCenterBoxedTitleStyle/.style=
	%topCenterBoxedTitleStyle/.style n args={4}
	{%
		boxed title style=
		{%
			enhanced, boxrule=0.6mm, top=0.25mm, bottom=0.5mm, left=3.0mm, right=3.0mm, %size=title,
			% outter border of angled title box
			frame code=
			{%
				\path
				[
					draw=#1-colframeborder, use as bounding box,
					line width=2.0pt, double=#1-highlightcol,
					double distance=\@frame@double@distance
				]
					([xshift=-\@outter@angle@distance - 2mm]frame.west)%
					-- ([xshift=-1mm, yshift= 0.5mm]frame.north west)
					-- ([xshift=1mm, yshift= 0.5mm]frame.north east)
					-- ([xshift=\@outter@angle@distance + 2mm]frame.east)%
					-- ([xshift=1mm, yshift= -0.5mm]frame.south east)
					-- ([xshift=-1mm, yshift= -0.5mm]frame.south west)
					-- cycle;,
				\path
				[
					tcb fill frame, #1-darkcol, line width=2.0pt,
					double=#1-highlightcol, double distance=\@frame@double@distance
				]
					([xshift=-\@outter@angle@distance - 2mm]frame.west)%
					-- ([xshift=-1mm, yshift= 0.5mm]frame.north west)
					-- ([xshift=1mm, yshift= 0.5mm]frame.north east)
					-- ([xshift=\@outter@angle@distance + 2mm]frame.east)%
					-- ([xshift=1mm, yshift= -0.5mm]frame.south east)
					-- ([xshift=-1mm, yshift= -0.5mm]frame.south west)
					-- cycle;,
			},
			% inner border of angled title box
			interior code=
			{
				\path
				[
					draw=red, use as bounding box, #1-colinteriorborder,
					line width=2.0pt, double=#1-highlightcol,
					double distance=1.75pt
				]
					([xshift=-\@inner@angle@distance - 0.0mm]interior.west)
					-- ([yshift=1.75pt]interior.south west)
					--  ([yshift=1.75pt]interior.south east)
					-- ([xshift=\@inner@angle@distance + 0.0mm]interior.east)
					-- ([yshift=-1.75pt]interior.north east)
					-- ([yshift=-1.75pt]interior.north west)
					-- cycle;,
				\path[tcb fill frame, #1-lightcol, double=#1-highlightcol,
					double distance=0.75pt]
					([xshift=-\@inner@angle@distance - 0.0mm]interior.west)
					-- ([yshift=-1.75pt]interior.north west)
					-- ([yshift=-1.75pt]interior.north east)
					-- ([xshift=\@inner@angle@distance + 0.0mm]interior.east)
					--  ([yshift=1.75pt]interior.south east)
					-- ([yshift=1.75pt]interior.south west)
					-- cycle;
			}
		}
	},
%-------------------------------------------------------------------------------------------------%
%-------------------------------------------------------------------------------------------------%
%-------------------------------------------------------------------------------------------------%
	biColorInteriorStyle/.default=current,
    	biColorMultilineInteriorStyle/.default=current,
    	frameCodeSetup/.default=current,
    	interiorCode/.default=current,
	interiorMultilineStyle/.default=current,
	interiorStyle/.default=current,
	multilineInteriorCode/.default=current,
	terminalSegmentationCode/.default=tcbbashboxStyle,
	subtitleStyle/.default=current,
	titleSepCode/.default=current,		
	topCenterBoxedTitleStyle/.default=current,
	topLeftSectionTitleStyle/.default=current,
%-----------------------------------------------------------------------------------------------------------------------------------------%    	 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Style Construction Components %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    	 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    	%-----------------------------------------------------------------------------------------------------------------------------------------%
    	@BASIC@STYLE/.style =
    	{
        	empty, enhanced, breakable, segmentation empty, every float=\centering,
        	hyphenationfix, drop lifted shadow=default-colbacktitle,
        	coltitle=black, coltext=black, colframe=black, colback=white,
        	boxrule=2pt, boxsep=2pt, arc=6pt, top=2mm, bottom=2mm, left=2mm, right=2mm,
        	before=\par\smallskip, after=\par\smallskip, fonttitle=\large\bfseries,
        	fontupper=\normalsize\bfseries, fontlower=\normalsize\bfseries   	
   	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	@DEFAULT@STYLE/.style =
    	{
        	empty, enhanced, breakable, segmentation empty, every float=\centering,
        	drop lifted shadow=default-colbacktitle, hyphenationfix, arc = 6pt,
        	colback= default-colback, colbacktitle=default-colbacktitle,
        	colframe=default-colframe, coltitle=default-coltitle, coltext=default-coltext,
        	code={\tikzset{draw=default-coldraw}}, after=\par\smallskip, before=\par\smallskip,
        	fonttitle=\large\bfseries, fontupper=\normalsize\bfseries,%\liftedshadow,
        	fontlower=\normalsize\bfseries
   	},	
%-----------------------------------------------------------------------------------------------------------------------------------------%
	tcbdoubleborder/.style=
	{
		borderline={\@tcb@double@border@linewidth}{\dimexpr#1 / 2 - 0.25pt\relax}{current-colframeborder, rounded corners=\@frame@corner@radius},
         	borderline={\@tcb@double@border@linewidth}{\dimexpr#1 / 2 + 0.25pt\relax}{current-colframeoutline, rounded corners=\@frame@corner@radius},
         	borderline={\@tcb@double@border@linewidth}{\dimexpr#1 / 2 + 0.75pt\relax}{current-colframeborder, rounded corners=\@frame@corner@radius},          	    		
	},
    	tcbdoubleborder/.default=4.5pt,
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbsetcoloringStyle/.style=
	{
		colback=#1-colback, colbacklower=#1-colbacklower,
		colframe=#1-colframe, coltitle=#1-coltitle, coltext=#1-coltext,
		colupper=#1-colupper, collower=#1-collower, colbacktitle=#1-colbacktitle
		%left color=#1-colleftframe, right color=#1-colrightframe
	},
	tcbsetcoloringStyle/.default=current,	
%-----------------------------------------------------------------------------------------------------------------------------------------%    	 %---------------------------------------------------------------- Composite/Complete Styles ------------------------------------------------------------------%
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	angleBoxedTitleStyle/.style=
	{
		enhanced, breakable, fonttitle=\bfseries, after=\medskip, top=5mm,
		title={\shadowText<\anttmcap16pt>(current){Preliminaries:}},
		before skip=2mm, after skip=3mm, attachBoxedTitleTopCenter,%{0.25mm}{2mm},
		tcbsetcoloringStyle, biColorInteriorStyle, topCenterBoxedTitleStyle
	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
	corollaryStyle/.style=
    	{
    		@BASIC@STYLE, tcbsetcoloringStyle=corollaryStyle, toptitle=1mm, bottomtitle=1mm,
    		before skip=0mm, after=\par\medskip, before title=\bfseries
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	definitionStyle/.style =
    	{
        	@BASIC@STYLE, %\liftedshadow,
        	tcbsetcoloringStyle=definitionStyle, boxsep=3mm, before skip= 3mm, after skip =0mm,
        	before title=\bfseries, arc=6pt, boxrule=5pt, toptitle=-0.25mm, bottomtitle=-1mm,
        	lefttitle=2mm, top=3mm, fontupper=\normalsize\bfseries, fonttitle=\large\bfseries,
        	subtitleStyle=definitionStyle, titleSepCode, frameCodeSetup=definitionStyle,
        	interiorMultilineStyle=definitionStyle
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	equationStyle/.style =
    	{
    		@BASIC@STYLE, tcbsetcoloringStyle=equationStyle,
    		before skip=0mm, before=\par\smallskip, after=\par\smallskip
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	exampleStyle/.style =
    	{
    		@BASIC@STYLE, tcbsetcoloringStyle=exampleStyle, toptitle=1mm, bottomtitle=1mm,
    		before title=\bfseries, before=\par\smallskip, after=\par\smallskip
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
	figureStyle/.style =
    	{
        	@BASIC@STYLE, tcbsetcoloringStyle=figureStyle, center title, toptitle=2mm,
        	bottom=3mm, boxsep=0mm, before=\vspace{-2cm}%before skip = -8mm%, after skip = 10mm%
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	frontBackMatterStyle/.style n args={3}%
    	{%frontBackMatterStyle{color style}{bottomtitle}{title}
		reset, @DEFAULT@STYLE, tcbsetcoloringStyle=#1, title={#3},
		before=\\par\\smallskip, after=\\par\\smallskip, left skip=0mm, %after skip=1mm,
		fonttitle=\\Large\\bfseries, fontupper=\\tiny\\upshape, fontlower=\\tiny\\upshape, toptitle=0mm, bottomtitle=#2,
		boxsep=2mm, boxrule=3pt, top=1mm, left=2mm,
		colframe=tcbFrontBackMatterStyle-colframe, colback=tcbFrontBackMatterStyle-colback,
		colbacktitle=tcbFrontBackMatterStyle-colbacktitle, coltitle=tcbFrontBackMatterStyle-coltitle
		%colframe=stdDKblue, colback=stdbackground, colbacktitle=stdgray, coltitle=white	   	    	
    	},
    	frontBackMatterStyle/.default={tcbFrontBackMatterStyle}{0mm}{{}},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	glossariesStyle/.style =
    	{%		
		reset, @DEFAULT@STYLE, colframe=blue!25!black, before skip=1mm, after skip=2mm, boxsep=2mm, top=0.0mm,
		bottom=1.0mm,left=2mm, colback=blue!5!yellow!10!, toptitle=-18mm, bottomtitle=-14mm,
		boxrule=3pt, colbacktitle=black!50!white, coltitle=white, left skip=0mm
 		%,before={\protect\\par\\smallskip}, after={\protect\string\\par\string\\smallskip}, fonttitle=\protect\string\\Large\string\\bfseries,
 		%fontupper=\protect\string\\normalsize\string\\normalfont
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
   	IBPstyle/.style=%, tcbsetcoloringStyle=IBPstyle
    	{
        	@DEFAULT@STYLE, hbox, tcbsetcoloringStyle=IBPstyle,
        	no shadow, arc=6pt, fonttitle=\large\bfseries\sffamily, boxrule=5pt, boxsep=8pt, %toprule=4pt,
        	%%  left=2mm, right=2mm,
        	before skip=0mm, before title=\bfseries, after title=\vspace{0mm}, top=-2.5mm,
        	bottom=-0.5mm, toptitle=-1.0mm, bottomtitle=-1.5mm, lefttitle=1mm, righttitle=1mm,
        	titlerule=1.0pt, titlerule style=black, %subtitleStyle=IBPstyle,
        	filledTitleSepCode={IBPstyle}{\@title@interior@sep@linewidth}, frameCodeSetup=IBPstyle, interiorStyle=IBPstyle, %tcbdoubleborder
        	%@DEFAULT@STYLE, unbreakable, capture=hbox, tcbsetcoloringStyle=IBPstyle,
%        	box align=center, valign=top, center title, arc=6pt, boxrule=6pt, boxsep=2mm,
%        	left=2mm, right=2mm, top=-1mm, bottom=-1mm, before skip=1mm, after skip=2mm,    	
%        	lefttitle=2mm, righttitle=1mm, toptitle=-0.5mm, bottomtitle=-0.5mm, fonttitle=\LARGE\bfseries,
%        	titlerule=#1, tcbdoubleborder=#1, interiorStyle=IBPstyle,%\dimexpr#1 + 1.0pt\relax
%    		title code=
%	  	{
%			enhanced, %boxrule=1.75mm,
%			\filldraw[draw=IBPstyle-colframe, fill=IBPstyle-colbacktitle,
%				rounded corners=\@interior@corner@radius, line width=\@title@interior@sep@linewidth]
%				([xshift=0pt, yshift=-0.0pt]title.south west)
%				--([xshift=0pt, yshift=0pt]title.north west)	
%				--([xshift=0pt, yshift=0pt]title.north east)	
%				--([xshift=0pt, yshift=-0.0pt]title.south east);,
%		},
%		finish=
%		{
%			\draw[draw=IBPstyle-colframeborder, rounded corners=\@interior@corner@radius, line width=0.5pt,
%				double=IBPstyle-colframeoutline, double distance=0.5pt]
%				([xshift=-\dimexpr#1 / 2 - 0.75pt\relax, yshift=-\dimexpr#1 / 2 + 0.5pt\relax]title.south west)
%				--([xshift=\dimexpr#1 / 2 - 0.75pt\relax, yshift=-\dimexpr#1 / 2 + 0.5pt\relax]title.south east);,
%		}		
	},
	IBPstyle/.default=3.5pt,
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	indexStyle/.style =
    	{%		
		colframe=blue!25!black, colback=blue!5!yellow!10!, colbacktitle=black!50!white, coltitle=white,
    		boxrule=3pt, boxsep=2mm, top=-0mm, left=2mm, toptitle=0mm, bottomtitle=0mm, lefttitle=2mm, left skip=0mm, after skip=1mm
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	lemmasStyle/.style =
    	{
    		@BASIC@STYLE, tcbsetcoloringStyle=lemmasStyle, before title=\bfseries, toptitle=1mm,
    		bottomtitle=1mm, before skip=0mm, before=\par\smallskip, after=\par\smallskip
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	listingsStyle/.style =
    	{
    		@BASIC@STYLE, coltext=tcblistingsStyle-coltext,
    		colback=tcblistingsStyle-backgroundcolor, coltitle=tcblistingsStyle-coltitle,
    		colbacktitle=tcblistingsStyle-colbacktitle, colframe=tcblistingsStyle-colframe,
    		before skip=0mm, before=\par\smallskip, after=\par\smallskip
	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	nomenclatureStyle/.style =
    	{%		
    		%frontBackMatterStyle={\nomenclatureStyle}{2mm}{title={\\anttmcap18pt\\nomname}}
    		reset, @DEFAULT@STYLE, colframe=blue!25!black, colback=blue!5!yellow!10!white, colbacktitle=black!50!white, coltitle=white,
    		toptitle=0mm, bottomtitle=0mm, boxrule=3pt, boxsep=2mm, top=1.5mm, left=2mm, left skip=0mm
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	pldStyle/.style=
    	{
        	@DEFAULT@STYLE, tcbsetcoloringStyle=pldStyle, breakable=false,
        	fontupper=\normalsize\bfseries, fonttitle=\large\bfseries,
        	before title=\bfseries, lefttitle=2mm, toptitle=0.25mm, bottomtitle=-3mm,
        	arc=6pt, boxrule=10pt, boxsep=1mm, left=2mm, right=3mm, top=1mm, bottom=1mm,
        	before skip=3mm, after skip=0mm, after=\par\smallskip, toprule=6pt, bottomrule=7pt,
        	#1, frameCodeSetup=pldStyle, interiorMultilineStyle=pldStyle
        	%titleSepCode=pldStyle / filledTitleSepCode=pldStyle (pldTitledStyle)
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	pldTitledStyle/.style =
    	{
        	@DEFAULT@STYLE, tcbsetcoloringStyle=pldStyle,
        	boxsep=1mm, left=2mm, right=3mm, top=1mm, bottom=1mm, %before=\par,
        	before skip= 3mm, after skip =0mm, before title=\bfseries, arc=6pt, boxrule=10pt, toprule= 6pt, bottomrule= 7pt,
        	lefttitle = 2mm, toptitle=1.75mm,  bottomtitle=-2mm,
        	fontupper=\normalsize\bfseries, fonttitle=\large\bfseries,
        	after =\par\smallskip, breakable=false, titleSepCode, frameCodeSetup, interiorMultilineStyle
        	% Outline along boundary between title and interior
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	pldStyle on Layer 2/.style =
    	{
        	reset, @DEFAULT@STYLE, tcbsetcoloringStyle=pldStyle, before skip=-10mm,
        	after skip=0mm, boxsep=-1mm, boxrule=3pt, left=3mm, right=3mm, top=3mm, bottom=2mm,
        	title filled, righttitle=3mm, lefttitle=4mm, toptitle=2.5mm, bottomtitle=-2mm,
        	fontupper=\normalsize\bfseries, fontlower=\bfseries, fonttitle=\bfseries
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	problemsStyle/.style =
    	{
    		reset, @DEFAULT@STYLE, tcbsetcoloringStyle=problemsStyle,
    		width=\linewidth, after skip=1mm, before skip=1mm, no shadow,
    		boxrule=2pt, boxsep=2pt, arc=6pt, fontupper=\fontsize{11}{\baselinestretch}\bfseries,
        	before=\par\smallskip, after=\par\smallskip,% before skip = 0mm, after skip = 0mm,
        	top=2mm, bottom=2mm, left=2mm, right=2mm, before skip=0mm
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	solutionlistsStyle/.style =
    	{
        	reset, @BASIC@STYLE, tcbsetcoloringStyle=solutionlistsStyle, top=2mm, toptitle=1.0mm,
        	bottomtitle=1mm, before skip=0mm, before=\par\smallskip, after=\par\smallskip
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	subproblemsStyle/.style =
    	{
    		reset, @DEFAULT@STYLE, tcbsetcoloringStyle=subproblemsStyle, width=\linewidth,
    		no shadow, boxrule=2pt, boxsep=2pt, arc=6pt, before skip=0mm, after skip=0mm,
    		fontupper=\fontsize{10}{\baselinestretch}\bfseries, before=\par\smallskip,
    		after=\par\smallskip, top=2mm, bottom=2mm, left=2mm, right=2mm    	
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	summariesStyle/.style =
    	{
    		@BASIC@STYLE, tcbsetcoloringStyle=summariesStyle, before skip=0mm
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tablesStyle/.style =
    	{
    		reset, @DEFAULT@STYLE, tcbsetcoloringStyle=tcbTableStyle,
    		before skip=0mm, after skip=3mm, boxrule=2pt, boxsep=2mm,
    		bottom=0mm, left=1mm, right=2mm, every float=\centering,
    		skin=bicolor, biColorInteriorStyle=tcbTableStyle
	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tablesStyle on layer 2/.style = {reset, summariesStyle, top=0mm},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbbashboxStyle/.style n args={2}%=
    	{
    		reset, skin=bicolor, tcbsetcoloringStyle=tcbbashboxStyle, colframe=#1, width=1.0\@tcblistings@width,
    		%before title={\begingroup\shadowText<\sffamily>[black](white){}, after title={}\endgroup},
    		fontupper=\ttfamily, fontlower=\upshape, fonttitle=\Large\bfseries\sffamily,
    		lefttitle=0mm, toptitle=1mm, bottomtitle=1.0mm,
    		arc=6pt, boxsep=2pt, bottom=0.5mm,
    		boxrule=2pt, leftrule=3.5pt, rightrule=3.5pt, toprule=1.225mm, bottomrule=1.225mm,	
    		left=4mm, leftupper=0.12mm, leftlower=2.5mm, right=0mm, rightlower=3.0mm,
    		%before skip=1mm, after skip=1mm, after=\stepcounter{@tcb@terminal@listing@counter},
    		borderline={2.0pt}{0pt}{tcbbashboxStyle-colframeborder},
		borderline={1.0pt}{2.0pt}{#1},
		title style={draw=tcbbashboxStyle-colframeborder, fill=tcbbashboxStyle-colbacktitle, line width=1.0pt},
    		interior style={draw=tcbbashboxStyle-colframeborder, line width=1.0pt},
        	before lower pre=\vspace{-1.0mm}, %safter upper pre=\vspace{-5mm},
		segmentation code=
		{	
			\path[draw=tcbbashboxStyle-colinteriorborder, line width=1.0pt]
				([xshift=0.0pt, yshift=-0.0pt]interior.north west)
				-- ([xshift=-0.0pt, yshift=0.0pt]interior.north east);,
			\begin{tcbclipframe}
				\filldraw[fill=tcbbashboxStyle-colbacklower, draw=tcbbashboxStyle-colinteriorborder, line width=0.0pt]
					([xshift=0.0pt, yshift=1.25mm]segmentation.south west)
					-- ([xshift=-0.0pt, yshift=1.25mm]segmentation.south east)
					-- ([xshift=-0.0pt, yshift=-1.0pt]interior.south east)
					-- ([xshift=0.0pt, yshift=-1.0pt]interior.south west)
					-- cycle;
			\end{tcbclipframe}
		},
		every listing line*={\textcolor{#2}>\ \unskip\ignorespaces },
    		listing remove caption=false, listing and comment, listing engine=listings,
    		listing options={style=terminalStyle, language=bash-extended,  name=bash-extended, fillcolor=\color{#2}},
    		finish=
		{
			\draw[draw=tcbbashboxStyle-colinteriorborder, rounded corners=6pt, line width=1.0pt]%
					([xshift=0.0pt, yshift=1.25mm]segmentation.south west)
					-- ([xshift=3.5pt, yshift=3.5pt]frame.south west)
					-- ([xshift=-3.5pt, yshift=3.5pt]frame.south east)
					-- ([xshift=-0.0pt, yshift=1.25mm]segmentation.south east);,
			\draw[draw=tcbbashboxStyle-colinteriorborder, line width=1.0pt]%
					([xshift=-0.5pt, yshift=1.25mm]segmentation.south west)
					-- ([xshift=0.5pt, yshift=1.25mm]segmentation.south east);	
		}	
	},
tcbbashboxStyle/.default={Matlab-figcolback}{green},
%-----------------------------------------------------------------------------------------------------------------------------------------%
	MatlabStyle/.style=
    	{
    		reset, breakable, enforce breakable, width=1.05\@tcblistings@width,%width=\linewidth, %
    		fonttitle=\Large\bfseries\sffamily, lefttitle=-3mm, toptitle=1mm,
		tcbsetcoloringStyle=MatlabStyle, %coltitle=MatlabStyle-coltitle,
    		bottomtitle=0mm, %title={\@tcblisting@caption@title},
		before skip=2mm, after skip=3mm, left=12.0mm, right=2mm, top=1.0mm, bottom=0.5mm, boxrule=3pt,
		listing engine=listings, listing only, %after=\par\smallskip, after lower=\par\bigskip, %addtolol,
		listing remove caption=false
    	},
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
	tcbdefinitionlistboxStyle/.style =
    	{
        	@BASIC@STYLE, %\liftedshadow,
        	tcbsetcoloringStyle, before skip=3mm, after skip=0mm, before title=\bfseries,
        	arc=6pt, boxrule=5pt, toptitle=-0.25mm, bottomtitle=-1mm, lefttitle=2mm, top=3mm,
        	fontupper=\normalsize\bfseries, fonttitle=\large\bfseries,
		subtitleStyle, titleSepCode, frameCodeSetup, interiorMultilineStyle		
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbenumeratedStyle/.style=
	{%\fontsize{10}{\baselinestretch}\selectfont
		enhanced, breakable=unlimited, enforce breakable, drop fuzzy shadow=current-colboxshadow,
		fonttitle=\bfseries\fontsize{11}{\baselinestretch}\selectfont,
		fontupper=\bfseries\fontsize{10}{10pt*\baselinestretch}\selectfont,
		tcbsetcoloringStyle, interiorStyle, frameCodeSetup, %colframe=black,
		left=0mm, left skip=0mm, boxsep=3mm, toptitle=-3.5mm, bottomtitle=-3.995mm, right=1mm, boxrule=5pt,
		borderline={2.5pt}{-0.5mm}{tcbbashboxStyle-colframeborder,rounded corners=6pt},   		
    		before skip=2mm, after skip=3.5mm, top=-2.0mm, bottom=-1.0mm,
    		enlarge top at break by=-2.5mm, enlarge bottom at break by=1.5mm, pad before break*=2mm%
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbenvironmentStyle/.style =
    	{
        	enhanced, breakable=unlimited, fonttitle=\bfseries, tcbsetcoloringStyle,
		boxrule=5pt, boxsep=3mm, title={\shadowText{Functions:}}, colframe=black,
		attachBoxedTitleTopCenter, topCenterBoxedTitleStyle, biColorMultilineInteriorStyle,
		top=-1.0mm, bottom=-0.0mm, before skip=0mm, after=\par\bigskip\bigskip,
		pad before break*=1.5mm, enlarge top at break by=0.0mm, enlarge bottom at break by=-1.0mm
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbequationStyle/.style =
    	{
        	@BASIC@STYLE, tcbsetcoloringStyle=tcbequationStyle,
        	width=\linewidth, box align=center, valign=top, fontupper=\@tcb@solutionVerb@font,
        	before skip=-3mm, after skip=3mm, left skip=0mm,
        	biColorMultilineInteriorStyle
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbequationlistboxStyle/.style =
    	{
        	@DEFAULT@STYLE, box align=center, valign=top, fontupper=\@tcb@solutionVerb@font,
        	tcbsetcoloringStyle=tcbequationlistboxStyle, before skip=1mm, after skip=1mm
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbfigboxStyle/.style =
    	{
        	@DEFAULT@STYLE, unbreakable, capture=hbox, tcbsetcoloringStyle=tcbfigboxStyle,
        	box align=center, valign=top, center title, arc=6pt, boxrule=#1, boxsep=0mm,
        	left=0mm, right=0mm, top=2mm, bottom=0mm, before skip=3mm, after skip=3mm,    	
        	lefttitle=2mm, righttitle=1mm, toptitle=1.5mm, bottomtitle=1mm, fonttitle=\LARGE\bfseries,
        	titlerule=#1, tcbdoubleborder=#1, interiorStyle=tcbfigboxStyle,%\dimexpr#1 + 1.0pt\relax
    		title code=
	  	{
			enhanced, %boxrule=1.75mm,
			\filldraw[draw=tcbfigboxStyle-colframe, fill=tcbfigboxStyle-colbacktitle,
				rounded corners=\@interior@corner@radius, line width=\@title@interior@sep@linewidth]
				([xshift=0pt, yshift=-0.0pt]title.south west)
				--([xshift=0pt, yshift=0pt]title.north west)	
				--([xshift=0pt, yshift=0pt]title.north east)	
				--([xshift=0pt, yshift=-0.0pt]title.south east);,
		},
		finish=
		{
			\draw[draw=tcbfigboxStyle-colframeborder, rounded corners=\@interior@corner@radius, line width=0.5pt,
				double=tcbfigboxStyle-colframeoutline, double distance=0.5pt]
				([xshift=-\dimexpr#1 / 2 - 0.75pt\relax, yshift=-\dimexpr#1 / 2 + 0.5pt\relax]title.south west)
				--([xshift=\dimexpr#1 / 2 - 0.75pt\relax, yshift=-\dimexpr#1 / 2 + 0.5pt\relax]title.south east);,
		}	
    	},
    	tcbfigboxStyle/.default = 2.5pt,
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbfigureStyle/.style =
    	{
        	@DEFAULT@STYLE, tcbsetcoloringStyle=tcbfigureStyle, title filled, after skip=3mm,
        	fonttitle=\bfseries\sffamily, boxsep=-1mm, boxrule=2.0pt, left=1mm, right=1mm, %\liftedshadow,
        	top=2mm, bottom=3mm, righttitle=3mm, lefttitle=4mm, toptitle=3mm, bottomtitle=2mm
	},
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    	tcbfunctiondetailboxStyle/.style=
    	{
        	@BASIC@STYLE, breakable=unlimited, tcbsetcoloringStyle, colframe=black,
        	%lifted  shadow={1mm}{-2mm}{3mm}{0.1mm}{current-colbacktitle}, %drop fuzzy shadow=current-colboxshadow,
        	%%%lefttitle=1mm, toptitle=-3.5mm, bottomtitle=-4.0mm,
		%%%before skip=-0.0mm, after skip=2.25mm, top=-0.5mm, bottom=-1.0mm, boxrule=5pt,
		%%%%borderline={2pt}{0.0mm}{tcbbashboxgoldStyle-colframeborder,rounded corners=6pt},
    		%%%boxsep=3mm,	interiorStyle, frameCodeSetup
    		arc=6pt, boxrule=5pt, boxsep=3mm, before skip=0mm, after skip=2.25mm, %, after skip=0mm,
        	top=-7mm, bottom=-1mm, before=\vspace{0mm}, pad before break=2.5mm, pad after break=-5.0mm,
        	toptitle=2.25mm,  bottomtitle=1mm, lefttitle=0mm, before title=\bfseries,
        	fontupper=\normalsize\bfseries, fonttitle=\LARGE\bfseries,
    		attachBoxedTitleTopCenter, topCenterBoxedTitleStyle, interiorMultilineStyle
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbfunctionenvStyle/.style=
	{
		enhanced, breakable=unlimited, fonttitle=\bfseries, tcbsetcoloringStyle, before skip=0mm,
		top=-1.0mm, bottom=-1.0mm, boxrule=5pt, boxsep=3mm, %after skip=10mm,%after=\medskip,
		title=\shadowText{Functions:}, colframe=black, after=\par\bigskip\smallskip,
		attachBoxedTitleTopCenter, topCenterBoxedTitleStyle, biColorMultilineInteriorStyle,
		enlarge top at break by=0.0mm, enlarge bottom at break by=2.0mm%, enlarge bottom finally by=1cm	
	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbfunctionlistboxStyle/.style =
    	{
        	enhanced, breakable, tcbsetcoloringStyle, titleSepCode, frameCodeSetup, interiorStyle,
        	%fuzzy shadow={5mm}{-5mm}{3mm}{0.3mm}{current-colboxshadow},
        	%lifted shadow={1mm}{-2mm}{2mm}{0.1mm}{current-colboxshadow},
        	arc=6pt, boxrule=5pt,
        	before skip=3mm, after skip=-1mm, top=-9.25mm, bottom=-2.5mm, left=4.0mm,      	
        	before title=\bfseries, toptitle=-0.5mm, bottomtitle=-1.75mm, lefttitle=1mm,
        	fontupper=\normalsize\bfseries, fonttitle=\LARGE\bfseries, after=\par\smallskip,  	
    	},	
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbfunctionlistboxStyle on Layer 2/.style =
    	{
        	 breakable, tcbsetcoloringStyle, titleSepCode, frameCodeSetup, interiorStyle,
        	%fuzzy shadow={5mm}{-5mm}{3mm}{0.3mm}{current-colboxshadow},
        	%lifted shadow={1mm}{-2mm}{2mm}{0.1mm}{current-colboxshadow},
        	arc=6pt, boxrule=5pt, pad before break=2mm,
        	before skip=3mm, after skip=0mm, top=-7.5mm, bottom=-2.5mm, left=0.0mm, after=\par\smallskip,  	
        	before title=\bfseries, toptitle=-0.25mm, bottomtitle=-1mm, lefttitle=1mm,
        	fontupper=\normalsize\bfseries, fonttitle=\Large\bfseries,  after=\par\smallskip  	   	
    	},	
%-----------------------------------------------------------------------------------------------------------------------------------------%
   	tcbinlinebashboxStyle/.style=
    	{
    		reset, reset, verbatim, title={}, arc=2pt, outer arc=3pt, boxrule=1pt, boxsep=0pt,
    		colupper=white, colback=black, boxrule=1pt, colframe=black, coltext=white, bottom=0pt,
    		no shadow,
    		listing options=
		{
			language=bash-extended,  name=bash-extended%,, identifierstyle=\textcolor{blue},
			%commentstyle=\textcolor{green}, stringstyle=\upshape\color{red},
     			%showstringspaces=true, keywordstyle=\color{blue!35!white}
		}		
	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
	tcbinlinebashlistingStyle/.code=	
    	{
    		code={\lstinline
		[
     			language=bash-extended,  name=bash-extended, identifierstyle=\textcolor{white},
     			commentstyle=\textcolor{listingsStyle-commentcolor},
			stringstyle=\upshape\color{listingsStyle-stringcolor},
     			showstringspaces=true, keywordstyle=\color{listingsStyle-keywordcolor1}
     		]}
    	%\lstinline
		%[
	     		language=bash-extended,  name=bash-extended, identifierstyle=\textcolor{white},
			commentstyle=\textcolor{listingsStyle-commentcolor},
			stringstyle=\upshape\color{listingsStyle-stringcolor},
     			showstringspaces=true, keywordstyle=\color{listingsStyle-keywordcolor1}
	     	%]%
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcblistboxStyle/.style =
    	{
        	@BASIC@STYLE, left=1.5mm, boxsep=2pt, lefttitle=2mm, toptitle=1.5mm, bottomtitle=1mm, box align=center,
        	valign=top, before skip=2mm, after skip=2mm, titlerule=1mm, boxrule=1mm,%leftrule=2mm,
        	tcbsetcoloringStyle=tcblistboxStyle, fontupper=\@tcb@text@font, filledTitleSepCode={current}{0pt},
        	%titleSepCode, %interiorStyle%, frameCodeSetup
        	subtitle style={}
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbparagraphStyle/.style=
	{%\fontsize{10}{\baselinestretch}\selectfont
		enhanced, breakable=unlimited, enforce breakable, drop fuzzy shadow=current-colboxshadow,
		fonttitle=\bfseries\fontsize{12}{\baselinestretch}\selectfont,
		fontupper=\bfseries\fontsize{10}{10pt*\baselinestretch}\selectfont,
		tcbsetcoloringStyle, before skip=2mm, %colframe=black,
		lefttitle=1mm, toptitle=-3.5mm, bottomtitle=-4.0mm,
		before skip=-0.0mm, after skip=2.25mm, top=-0.5mm, bottom=-1.0mm, boxrule=5pt,
		%borderline={2pt}{0.0mm}{tcbbashboxgoldStyle-colframeborder,rounded corners=6pt},
    		boxsep=3mm,	interiorStyle, frameCodeSetup
	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbSectionStyle/.style =
    	{
        	empty, no shadow, breakable, attach boxed title to top left, %drop fuzzy shadow,
        	width=\linewidth, tcbsetcoloringStyle, topLeftSectionTitleStyle, pad at break*=0mm,
        	fontupper=\normalsize\normalfont, fontlower=\normalsize\normalfont, fonttitle=\Large\bfseries, toptitle=0mm,
        	boxsep=0pt, boxrule=2pt, arc=6pt, top=4pt, bottom=2mm, left=4mm, right=3mm, %after skip=1.5mm, % -> initial after skip probably applied to "solution" environment
        	before skip=0mm, before=\par, after skip=2mm, before upper=\par\smallskip%=#1        	        	
    	},
    	%tcbSectionStyle/.default=current,
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbSubsectionStyle/.style =
    	{
		enhanced, colframe=white, colback=white, colbacktitle=white, before skip=-1mm, after skip=3mm,
		top=0mm, bottom=1.5mm, left=1.5mm, right=1.0mm, width=1.05\wd\@frontbackmatter@savebox@,
		interior code=
		{
			\draw[line width=3pt,current-colframe,line cap=rect] (interior.south east) -- +(-0.5cm,0pt);
		  	\draw[line width=3pt,current-colframe,line cap=rect] (interior.south east) -- +(0pt,0.5cm);
		  	\draw[line width=3pt,current-colframe,line cap=rect] (interior.south west) -- +(0.5cm,0pt);
		  	\draw[line width=3pt,current-colframe,line cap=rect] (interior.south west) -- +(0pt,0.5cm);
		}
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbsolutionboxStyle/.style =
    	{
        	@DEFAULT@STYLE, box align=center, valign=top, before skip=-10mm, after skip=1mm,
        	tcbsetcoloringStyle=tcbsolutionboxStyle, fontupper=\@tcb@solutionVerb@font
    	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	tcbsolutionverbStyle/.style =
    	{
        	@DEFAULT@STYLE, box align=center, valign=top, fontupper=\@tcb@solutionVerb@font,
        tcbsetcoloringStyle=tcbsolutionverbStyle, before skip=-3mm, after skip=3mm, left skip=0mm
	},
%-----------------------------------------------------------------------------------------------------------------------------------------%
    	theoremStyle/.style =
    	{
    		@BASIC@STYLE, tcbsetcoloringStyle, before skip = 3mm, after skip = 3mm,
    		arc=6pt, boxrule=5pt, fontupper=\normalsize\bfseries, no shadow,
    		fonttitle=\bfseries, toptitle=-0.25mm, bottomtitle=-1mm, lefttitle=2mm, top=3mm,	
    		subtitleStyle, titleSepCode, frameCodeSetup, interiorMultilineStyle
	}
}
%-----------------------------------------------------------------------------------------------------------------------------------------%
%*****************************************************************************************************************************************%
%**************************************************** End of 'my-styles.sty' package *****************************************************%
%*****************************************************************************************************************************************%
%\catcode`\!=\active
\endinput 