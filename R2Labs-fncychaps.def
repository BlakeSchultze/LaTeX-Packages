%*******************************************************************************************************************************%
%***************************************************** `R2Labs-fncychaps.def' ***************************************************%
%*******************************************************************************************************************************%
% Provides macros/commands for adding, configuring, and printing the Table of Contents and back matter material (e.g. index, glossary, acronym/symbol/abbreviation lists, etc.).  The entries added to the Table of Contents and its settings/appearance are configured using the 'tocloft' package and additional supplemental macros/commands designed to interact/interface with the package.  The back matter material is added, configured, and printed using the 'my-glossaries', 'my-imakeidx', and 'my-nomencl' packages (where each 'my-X' package is an adaptation of the 'X' package) as well as the definitions/macros/commands which these packages depend/rely on.
%*******************************************************************************************************************************%
%********************************** Define provided package name and LaTeX/package dependencies ********************************%
%*******************************************************************************************************************************%
%\ProvidesPackage{R2Labs-fncychaps}[\pkginfo]
\ProvidesFile{R2Labs-fncychaps.def}[\pkginfo]
%*******************************************************************************************************************************%
%************************************* Package options and corresponding Boolean variables *************************************%
%*******************************************************************************************************************************%
%-------------------------------------------------------------------------------------------------------------------------------%
%\DeclareOption*{\PackageWarning{frontbackmatter}{Unknown `\CurrentOption'}}
%*******************************************************************************************************************************%
%************************************************ Processing of package options ************************************************%
%*******************************************************************************************************************************%
%\ProcessOptions\relax
%-------------------------------------------------------------------------------------------------------------------------------%
\makeatletter                                   % Change @ -> catcode'@=11 (letter) for use in macro names/definition
%*******************************************************************************************************************************%
%******************************************************** Package Body *********************************************************%
%*******************************************************************************************************************************%
%-------------------------------------------------------------------------------------------------------------------------------%
%-------------------------------------------------------------------------------------------------------------------------------%
\newcounter{AlphaCnt}
\newcounter{AlphaDecCnt}
\newlength{\backskip}
\newlength{\bl}                           %  bottom left   : orig \space
\newlength{\br}                           %  bottom right  : orig 1pt
\newlength{\tl}                           %  top left      : orig 2pt
\newlength{\trr}                           %  top right      :orig 1pt
\newlength{\blrule}                           %  top right      :orig 1pt
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\fncychap@hrule}[1][0pt]{\raggedleft\mghrulefill{\RW}\par@nbskip{#1}}%\f@size\p@
\newcommand{\fncychap@dblhrule}[1][0pt]{\raggedleft\mghrulefill{\RW}\vskip -\f@size\p@\mghrulefill{\RW}\par@nbskip{#1}}%\f@size\p@
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\BL}[1]{\setlength{\bl}{#1}}
\newcommand{\BR}[1]{\setlength{\br}{#1}}
\newcommand{\TL}[1]{\setlength{\tl}{#1}}
\newcommand{\TR}[1]{\setlength{\trr}{#1}}
\newcommand{\BLrule}[1]{\setlength{\blrule}{#1}}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\set@fancychap@PetersLenny}{%
    \pagestyle{empty}
    \setlength{\bl}{6pt}
    \setlength{\br}{1pt}
    \setlength{\tl}{2pt}
    \setlength{\trr}{1pt}
    \setlength{\trr}{0pt}
    \ChNameVar{\fontsize{14}{16}\usefont{OT1}{phv}{m}{n}\selectfont}
    \ChNumVar{\fontsize{60}{62}\usefont{OT1}{ptm}{m}{n}\selectfont}
    \ChTitleVar{\HUGE\rmfamily\bfseries}
    \ChRuleWidth{1pt}
    \renewcommand{\DOTI}[1]{\raggedright\CTV\FmTi{##1}\par\nobreak\vskip 40\p@}
    \renewcommand{\DOTIS}[1]{\raggedright\CTV\FmTi{##1}\par\nobreak\vskip 40\p@}
    \renewcommand{\DOCH}{%tweaks for 1--9 and A--Z
        \ifcase\c@chapter\relax%
            \or\BL{-3pt}\TL{-4pt}\BR{0pt}\TR{-6pt}%1
            \or\BL{0pt}\TL{-4pt}\BR{2pt}\TR{-4pt}%2
            \or\BL{0pt}\TL{-4pt}\BR{2pt}\TR{-4pt}%3
            \or\BL{0pt}\TL{5pt}\BR{2pt}\TR{-4pt}%4
            \or\BL{0pt}\TL{3pt}\BR{2pt}\TR{-4pt}%5
            \or\BL{-1pt}\TL{0pt}\BR{2pt}\TR{-2pt}%6
            \or\BL{0pt}\TL{-3pt}\BR{2pt}\TR{-2pt}%7
            \or\BL{0pt}\TL{-3pt}\BR{2pt}\TR{-2pt}%8
            \or\BL{0pt}\TL{-3pt}\BR{-4pt}\TR{-2pt}%9
            \or\BL{-3pt}\TL{-3pt}\BR{2pt}\TR{-7pt}%10
            \or\BL{-6pt}\TL{-6pt}\BR{0pt}\TR{-9pt}%11
            \or\BL{-6pt}\TL{-6pt}\BR{2pt}\TR{-7pt}%12
            \or\BL{-5pt}\TL{-5pt}\BR{0pt}\TR{-9pt}%13
            \or\BL{-6pt}\TL{-6pt}\BR{0pt}\TR{-9pt}%14
            \or\BL{-3pt}\TL{-3pt}\BR{3pt}\TR{-6pt}%15
            \or\BL{-3pt}\TL{-3pt}\BR{3pt}\TR{-6pt}%16
            \or\BL{-5pt}\TL{-3pt}\BR{-8pt}\TR{-6pt}%17
            \or\BL{-5pt}\TL{-5pt}\BR{0pt}\TR{-9pt}%18
            \or\BL{-3pt}\TL{-3pt}\BR{-6pt}\TR{-9pt}%19
            \or\BL{0pt}\TL{0pt}\BR{0pt}\TR{-5pt}%20
        \fi
        \ifinapp\ifcase\c@chapter\relax%
            \or\BL{0pt}\TL{14pt}\BR{5pt}\TR{-19pt}%A
            \or\BL{0pt}\TL{-5pt}\BR{-3pt}\TR{-8pt}%B
            \or\BL{-3pt}\TL{-2pt}\BR{1pt}\TR{-6pt}\BLrule{0pt}%C
            \or\BL{0pt}\TL{-5pt}\BR{-3pt}\TR{-8pt}\BLrule{0pt}%D
            \or\BL{0pt}\TL{-5pt}\BR{2pt}\TR{-3pt}%E
            \or\BL{0pt}\TL{-5pt}\BR{-10pt}\TR{-1pt}%F
            \or\BL{-3pt}\TL{0pt}\BR{0pt}\TR{-7pt}%G
            \or\BL{0pt}\TL{-5pt}\BR{3pt}\TR{-1pt}%H
            \or\BL{0pt}\TL{-5pt}\BR{3pt}\TR{-1pt}%I
            \or\BL{2pt}\TL{0pt}\BR{-3pt}\TR{1pt}%J
            \or\BL{0pt}\TL{-5pt}\BR{3pt}\TR{-1pt}%K
            \or\BL{0pt}\TL{-5pt}\BR{2pt}\TR{-19pt}%L
            \or\BL{0pt}\TL{-5pt}\BR{3pt}\TR{-1pt}%M
            \or\BL{0pt}\TL{-5pt}\BR{-2pt}\TR{-1pt}%N
            \or\BL{-3pt}\TL{-2pt}\BR{-3pt}\TR{-11pt}%O
            \or\BL{0pt}\TL{-5pt}\BR{-9pt}\TR{-3pt}%P
            \or\BL{-3pt}\TL{-2pt}\BR{-3pt}\TR{-11pt}%Q
            \or\BL{0pt}\TL{-5pt}\BR{4pt}\TR{-8pt}%R
            \or\BL{-2pt}\TL{-2pt}\BR{-2pt}\TR{-7pt}%S
            \or\BL{-3pt}\TL{0pt}\BR{-5pt}\TR{4pt}\BLrule{8pt}%T
            \or\BL{-7pt}\TL{-11pt}\BR{-5pt}\TR{-7pt}\BLrule{0pt}%U
            \or\BL{-14pt}\TL{-5pt}\BR{-14pt}\TR{-1pt}\BLrule{14pt}%V
            \or\BL{-10pt}\TL{-9pt}\BR{-13pt}\TR{-3pt}\BLrule{7pt}%W
            \or\BL{0pt}\TL{-5pt}\BR{3pt}\TR{-1pt}\BLrule{0pt}%X
            \or\BL{-6pt}\TL{-4pt}\BR{-7pt}\TR{1pt}\BLrule{7pt}%Y
            \or\BL{0pt}\TL{-5pt}\BR{3pt}\TR{-1pt}\BLrule{0pt}%Z
        \fi\fi
        \settowidth{\px}{\CNV\FmN{\@fancychap@chName}}
            \addtolength{\px}{\tl}        %MOD change 2pt to \tl
            \settoheight{\py}{\CNV\FmN{\@fancychap@chName}}
            \addtolength{\py}{1pt}
            \settowidth{\mylen}{\CNV\FmN{\@fancychap@chName}\@fancychap@chNumbering*}%\space\@fancychap@chNumbering
            \addtolength{\mylen}{\trr}% MOD change 1pt to \tr
            \settowidth{\pxx}{\@fancychap@chNumbering}
            \addtolength{\pxx}{-1pt}
            \settoheight{\pyy}{\@fancychap@chNumbering}
            \addtolength{\pyy}{-2pt}
            \setlength{\myhi}{\pyy}
            \addtolength{\myhi}{-1\py}\par
            \parbox[b]{\textwidth}{%
                \rule[\py]{\RW}{\myhi}\hskip -\RW%
                \rule[\pyy]{\px}{\RW}\hskip -\px%
                \raggedright\CNV\FmN{\@fancychap@chName}\rule{\blrule}{\RW}\hskip\bl\@fancychap@chNumbering%MOD
            %\CNV\FmN{\@fancychap@chName}\space\@fancychap@chNumbering                     %ORIGINAL
                \hskip\br\mghrulefill{\RW}%%MOD 1pt to \br
                \rule{\RW}{\pyy}\par\nobreak\vskip -\baselineskip\vskip -\pyy\hskip \mylen%
                \mghrulefill{\RW}\par\nobreak\vskip \pyy%
        }\vskip 20\p@%
    }
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\set@fancychap@Lenny}{%
    \pagestyle{empty}%
        \ChNameVar{\fontsize{20}{22}\usefont{OT1}{phv}{m}{n}\selectfont}%
        \ChNumVar{\fontsize{60}{62}\usefont{OT1}{ptm}{m}{n}\selectfont}%
        \ChTitleVar{\HUGE\rmfamily\mdseries}%\bfseries\rmfamily\scshape                                                                                                       \selectfont
        \ChRuleWidth{1.0pt}%
    \renewcommand{\DOTI}[1]{\raggedright\CTV\FmTi{##1}\par\nobreak\vskip 40\p@}%
    \renewcommand{\DOTIS}[1]{\raggedright\CTV\FmTi{##1}\par\nobreak\vskip 40\p@}%
    \renewcommand{\DOCH}{%
            \setlength{\px}{\widthof{\CNV\FmN{\@fancychap@chName}}+2\p@}%\space\@fancychap@chNumbering
                \setlength{\py}{\heightof{\CNV\FmN{\@fancychap@chName}\@fancychap@chNumbering*}+1\p@}%\space\@fancychap@chNumbering
                \setlength{\mylen}{\widthof{\CNV\FmN{\@fancychap@chName}}+1\p@}%\space\@fancychap@chNumbering
                \setlength{\pxx}{\widthof{\@fancychap@chNumbering}-1\p@}
        \setlength{\pyy}{\heightof{\@fancychap@chNumbering}-2\p@}%
                \setlength{\myhi}{\pyy-\py}%
        \par%
            \parbox[b]{\textwidth}{%
                \rule[\py]{\RW}{\myhi}\hskip -\RW% left/vrule
                \rule[\pyy]{\px}{\RW}\hskip -\px%top/hrule, from left corner to \@fancychap@chName
                \raggedright\CNV\FmN{\@fancychap@chName}\@fancychap@chNumbering*\hskip1pt%%\space\@fancychap@chNumbering%
                \mghrulefill{\RW}%bottom/hrule/from \@fancychap@chName
                \rule{\RW}{\pyy}%right/vrule
            \par@nbskip{-\baselineskip-\pyy}\hskip \mylen%
                \fncychap@hrule[\pyy]%top/hrule
            }\vskip 20\p@%
    }%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\set@fancychap@Sonny}{%
        \ChNameVar{\Large\sffamily\mdseries}
    \ChNumVar{\HUGE\rmfamily\bfseries}
    \ChTitleVar{\Large\sffamily\mdseries}
    \ChRuleWidth{0.5pt}
    \ChNameUpperCase
        \renewcommand{\DOCH}{\fncychap@dblhrule[5\p@]\CNV\FmN{\@fancychap@chName}\@fancychap@chNumbering*\par@nbskip{40\p@}}%\space \@fancychap@chNumbering
    \renewcommand{\DOTI}[1]{%
            \CTV\fncychap@hrule[\f@size\p@]
            \CTV\FmTi{##1}\par@nbskip{\f@size\p@}
            \fncychap@hrule[30\p@]
    }
    \renewcommand{\DOTIS}[1]{%
            \CTV\fncychap@hrule[\f@size\p@]
            \CTV\FmTi{##1}\par@nbskip{\f@size\p@}
            \fncychap@hrule[30\p@]
        }
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\set@fancychap@Bjornstrup}{%
    \usecolortrue% pzc (Zapf Chancelery) is nice.  ppl (Palatino) is cool too.
    \ChNumVar{\raggedleft\fontsize{76}{80}\usefont{OT1}{pzc}{m}{n}\selectfont}
    \ChTitleVar{\raggedleft\Large\sffamily\bfseries}
    \setlength{\myhi}{10pt}         % Space between grey box border and text
    \setlength{\mylen}{\textwidth}
    \addtolength{\mylen}{-2\myhi}
    \renewcommand{\DOCH}{%
            \raggedleft\settowidth{\py}{\@fancychap@chNumbering}\addtolength{\py}{-10pt}\fboxsep=0pt% Amount of space by which the number is shifted right
            \raggedleft\colorbox[gray]{.85}{\rule{0pt}{40pt}\parbox[b]{\textwidth}{\hfill}}%
            \kern-\py\raise20pt\hbox{\color[gray]{.5}\@fancychap@chNumbering}\\%
    }
    \renewcommand{\DOTI}[1]{%
            \nointerlineskip\raggedright\fboxsep=\myhi\vskip-1ex%
            \raggedleft\colorbox[gray]{.85}{\parbox[t]{\textwidth-2\myhi}{\CTV\FmTi{##1}}}\par\nobreak\vskip 40\p@%
    }
    \renewcommand{\DOTIS}[1]{%
            \fboxsep=0pt\raggedleft\colorbox[gray]{.85}{\rule{0pt}{40pt}\parbox[b]{\textwidth}{\hfill}}\\[-\myhi]%
            \nointerlineskip\raggedright\fboxsep=\myhi\vskip-1ex%
            \flushleft\colorbox[gray]{.85}{\parbox[t]{\textwidth-2\myhi}{\CTV\FmTi{##1}}}\par\nobreak\vskip 40\p@%
    }
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\set@fancychap@Glenn}{%
    \ChNameVar{\Large\sffamily\mdseries}
    \ChNumVar{\HUGE\rmfamily\bfseries}
    \ChTitleVar{\Large\rmfamily\mdseries}
    \ChRuleWidth{1pt}
    \ChNameUpperCase
    %\ChTitleUpperCase
    \renewcommand{\DOCH}{%
            \settoheight{\myhi}{\CTV\FmTi{Test}}
            \setlength{\py}{\baselineskip}
            \addtolength{\py}{\RW}
            \addtolength{\py}{\myhi}
            \setlength{\pyy}{\py}
            \addtolength{\pyy}{-1\RW}
            \raggedright\CNV\FmN{\@fancychap@chName}\@fancychap@chNumbering*\hskip 6pt%\space\@fancychap@chNumbering
            \mghrulefill{\RW}\rule[-1.75\pyy]{2\RW}{1.75\pyy+\RW}\par\nobreak%
        }
    \renewcommand{\DOTI}[1]{%
            \addtolength{\pyy}{20pt}
            \settoheight{\myhi}{\CNV\FmTi{##1}}
            \addtolength{\myhi}{\py}
            \addtolength{\myhi}{-1\RW}\vskip -1\pyy
            \rule{2\RW}{1.5\myhi}\mghrulefill{\RW}\hskip 2pt
            \raggedleft\CNV\FmTi{##1}\par\nobreak\vskip 80\p@%
    }
    \renewcommand{\DOTIS}[1]{%
            \setlength{\py}{25pt}  % eller vad man vill
            \setlength{\pyy}{\py}
            \setlength{\backskip}{\py}
            \addtolength{\backskip}{11pt}
            \addtolength{\pyy}{\RW}
            \setlength{\myhi}{\baselineskip}
            \addtolength{\myhi}{\pyy}
            \mghrulefill{\RW}\rule[-1.\myhi+3pt]{2\RW}{1.\myhi-2pt}\par\nobreak\vskip -\backskip
            \rule{2\RW}{1.25\myhi}\mghrulefill{\RW}\hskip 3pt %
            \raggedleft\CNV\FmTi{##1}\par\nobreak\vskip 40\p@%
        }
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\set@fancychap@Conny}{%
    \ChNameUpperCase
    \ChTitleUpperCase
    \ChNameVar{\centering\HUGE\rmfamily\bfseries}
    \ChNumVar{\HUGE\rmfamily\mdseries}
    \ChTitleVar{\centering\HUGE\rmfamily\bfseries}
    \ChRuleWidth{2pt}
    \renewcommand{\DOCH}{%
            \mghrulefill{3\RW}\par\nobreak\vskip -0.5\baselineskip
            \mghrulefill{\RW}\par\nobreak\bigskip
            \CNV\FmN{\@fancychap@chName}\@fancychap@chNumbering*\par\nobreak\vskip -0.5\baselineskip\bigskip
    }
    \renewcommand{\DOTI}[1]{\mghrulefill{\RW}\par\nobreak\bigskip\CTV\FmTi{##1}\par\nobreak\vskip 60\p@}
    \renewcommand{\DOTIS}[1]{\mghrulefill{\RW}\par\nobreak\bigskip\CTV\FmTi{##1}\par\nobreak\vskip 60\p@}
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\set@fancychap@Rejne}{%
    \ChNameUpperCase
    \ChTitleUpperCase
    \ChNameVar{\centering\Large\rmfamily\mdseries}
    \ChNumVar{\HUGE\rmfamily\mdseries}
    \ChTitleVar{\centering\HUGE\rmfamily\mdseries}
    \ChRuleWidth{1pt}
    \renewcommand{\DOCH}{%
            \settoheight{\py}{\@fancychap@chNumbering}
            \parskip=0pt plus 1pt % Set parskip to default, just in case v1.31
            \addtolength{\py}{-1pt}
            \CNV\FmN{\@chapapp}\par\nobreak\vskip 20\p@
            \setlength{\myhi}{0.5\py+\RW}
            \setlength{\px}{\myhi}
            \addtolength{\px}{-1\RW}
            \rule[-1\px]{\RW}{\myhi}%
            \mghrulefill{\RW}\hskip 10pt%
            \raisebox{-0.5\py}{\@fancychap@chNumbering}\hskip 10pt%
            \mghrulefill{\RW}%
            \rule[-1\px]{\RW}{\myhi}\par\nobreak\vskip -1\baselineskip%3\p@% Added -2pt vskip to correct for streched text v1.31
        }
    \renewcommand{\DOTI}[1]{%
            \setlength{\mylen}{\textwidth}
            \parskip=0pt plus 0pt % Set parskip to default, just in case v1.31
            \addtolength{\mylen}{-2\RW}
            {\vrule width\RW}%
            \parbox{\mylen}{\par\nobreak\bigskip\bigskip\CTV\FmTi{##1}\par\nobreak\bigskip\bigskip}%
            {\vrule width\RW}\par\nobreak\vskip -3pt%
            \rule{\RW}{2\baselineskip}%
            \mghrulefill{\RW}\rule{\RW}{2\baselineskip}\vskip 60\p@% Added -2pt in vskip to correct for streched text v1.31
        }
    \renewcommand{\DOTIS}[1]{%
            \setlength{\py}{\fboxrule}
            \setlength{\fboxrule}{\RW}
            \setlength{\mylen}{\textwidth}
            \addtolength{\mylen}{-2\RW}
            \fbox{\parbox{\mylen}{\vskip \baselineskip\CTV\FmTi{##1}\par\nobreak\vskip\baselineskip\bigskip}}
            \setlength{\fboxrule}{\py}\vskip 60\p@%
        }
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\set@fancychap@Bjarne}{%
    \ChNameUpperCase
    \ChTitleUpperCase
    \ChNameVar{\raggedleft\normalsize\rmfamily\mdseries}
    \ChNumVar{\raggedleft\Large\rmfamily\bfseries}
    \ChTitleVar{\raggedleft\Large\rmfamily\mdseries}
    \ChRuleWidth{1pt}
    \newcommand{\AlphaNo}{%
            \ifcase\number\theAlphaCnt
                \ifnum\c@chapter=0 ZERO\else{}\fi
                \or ONE\or TWO\or THREE\or FOUR\or FIVE\or SIX\or SEVEN\or EIGHT\or NINE\or TEN
                \or ELEVEN\or TWELVE\or THIRTEEN\or FOURTEEN\or FIFTEEN\or SIXTEEN\or SEVENTEEN\or EIGHTEEN\or NINETEEN%
            \fi
    }
    \newcommand{\AlphaDecNo}{%
            \setcounter{AlphaDecCnt}{0}
            \@whilenum\number\theAlphaCnt>0\do{
                \addtocounter{AlphaCnt}{-10}
                \addtocounter{AlphaDecCnt}{1}%
            }
            \ifnum\number\theAlphaCnt=0\else
                \addtocounter{AlphaDecCnt}{-1}
                \addtocounter{AlphaCnt}{10}
            \fi
            \ifcase\number\theAlphaDecCnt\or TEN\or TWENTY\or THIRTY\or FORTY\or FIFTY\or SIXTY\or SEVENTY\or EIGHTY\or NINETY\fi%
        }
    \newcommand{\TheAlphaChapter}{%
            \ifinapp\thechapter\else
                \setcounter{AlphaCnt}{\c@chapter}
                \ifnum\c@chapter<20\AlphaNo\else\AlphaDecNo\AlphaNo\fi
        \fi
        }
    \renewcommand{\DOCH}{%
            \mghrulefill{\RW}\par\nobreak
            \CNV\FmN{\@chapapp}\par\nobreak\vskip 0.5\baselineskip
            \CNoV\TheAlphaChapter\par\nobreak\vskip -1\baselineskip\vskip 5pt%
            \mghrulefill{\RW}\par\nobreak\vskip 20\p@
        }
    \renewcommand{\DOTI}[1]{\CTV\FmTi{##1}\par\nobreak\vskip 40\p@}
    \renewcommand{\DOTIS}[1]{\CTV\FmTi{##1}\par\nobreak\vskip 40\p@}
}
%-------------------------------------------------------------------------------------------------------------------------------%
\newcommand{\set@fancychap@chName}[1]{\gdef\@fancychap@chName{#1}}%[\@chapapp]
\newcommand{\set@fancychap@chTitle}[1]{\gdef\@fancychap@chTitle{\CTV\FmTi{#1}}}%
\newcommand{\set@fancychap@chNumbering}[1]{\gdef\@fancychap@chNumbering{\@ifstar{\space}{}#1}}%[\CNoV\thechapter]
\newcommand{\@fncychap}[1]{\raggedleft\@nameuse{set@fancychap@#1}\DOCH\DOTI{\RefsName}}
\WithSuffix\newcommand\@fncychap*[1]{\raggedleft\@nameuse{set@fancychap@#1}\DOTIS{\RefsName}}
%-------------------------------------------------------------------------------------------------------------------------------%
\DeclareDocumentCommand{\fncychap}{s D(){fncychap} O{\@chapapp} m G{\thechapter} }
{%
        \set@fancychap@chName{#3}%
        \set@fancychap@chTitle{#4}%
        \set@fancychap@chNumbering{\CNoV#5}%
        \@fncychap{#2}%{Sonny}%{Lenny}%{PetersLenny}%{Bjornstrup}%{Glenn}%{Conny}%{Bjarne}%
}
%-------------------------------------------------------------------------------------------------------------------------------%
\renewcommand{\toc@chapter}[1]{%
	\@set@BKM@context{Biblink}\begingroup\usecolortrue%\prw@mkboth{#1}%
	%\ifHy@backref\cleardoublepage\fi%
        \ifHy@implicit\cleardoublepage\fi%
	%\cleardoublepage%
        %\chapter*{#1}%
%        \set@fancychap@chName
%        \set@fancychap@chTitle{#1}
%        \set@fancychap@chNumbering
        \fncychap(Lenny)[\@chapapp]{#1}{\thechapter}%{Sonny}%{Lenny}%{PetersLenny}%{Bjornstrup}%{Glenn}%{Conny}%{Bjarne}%
        \addcontentsline{toc}{Biblink}{\protect\numberline{\raisebox{10pt}{\protect\hypertarget{bibtarget}{}}}#1}%Part
	\endgroup
}
%-------------------------------------------------------------------------------------------------------------------------------%
%*******************************************************************************************************************************%
%******************************************** End of 'R2Labs-fncychaps.def' package ********************************************%
%*******************************************************************************************************************************%
% Restore @ -> \catcode'@=12 (active), peventing user access to macro names containing @ character
\makeatother
\endinput
%-------------------------------------------------------------------------------------------------------------------------------%
%*******************************************************************************************************************************%
%*********************************************************** NOTES *************************************************************%
%*******************************************************************************************************************************%
%-------------------------------------------------------------------------------------------------------------------------------%
